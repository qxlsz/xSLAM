import{a as u,u as ei,b as Ve,k as S,h as $l,R as b,g as Nn,l as ti,C as kl}from"./fiber-B5OO0akA.js";import{r as Il,u as Nl,c as ms,B as Bl,C as Fl,T as zl,S as Ul,L as Ai,R as Ll,M as jl,a as Hl,b as Wl,d as Vl,E as Gl,e as Kl,O as ql}from"./drei-DnhCH9qG.js";import{g as ee,U as _e,c as Q,ad as Yl,ay as Xl,az as Zl,ao as Ql,ac as we,u as yn,aA as Jl,C as Ye,aB as xn,F as ec,aC as et,aD as ni,L as vs,aE as bs,a9 as $,f as ze,S as $i,O as tc,M as nc,ae as ln,m as At,l as Ee,af as rc,at as $e,aF as ys,a6 as xs,j as Ss,P as ws,aG as ic,aa as oc,k as ki,Y as Ii,H as sc,N as ac,aH as lc,Q as cc,ab as uc,aI as ri,$ as Ni}from"./three-DwezJHtP.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var nr=1/1e3,fc=1e3,dc=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*nr}get fixedDelta(){return this._fixedDelta*nr}set fixedDelta(e){this._fixedDelta=e*fc}get elapsed(){return this._elapsed*nr}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(e!==void 0?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},hc=(()=>{const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]),n=new oc;return n.setAttribute("position",new ki(e,3)),n.setAttribute("uv",new ki(t,2)),n})(),ce=class Dr{static get fullscreenGeometry(){return hc}constructor(t="Pass",n=new $i,r=new tc){this.name=t,this.renderer=null,this.scene=n,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let n=this.screen;n!==null?n.material=t:(n=new nc(Dr.fullscreenGeometry,t),n.frustumCulled=!1,this.scene===null&&(this.scene=new $i),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,n=et){}render(t,n,r,i,o){throw new Error("Render method not implemented!")}setSize(t,n){}initialize(t,n,r){}dispose(){for(const t of Object.keys(this)){const n=this[t];(n instanceof we||n instanceof ys||n instanceof xs||n instanceof Dr)&&this[t].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},pc=class extends ce{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,r,i){const o=e.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},gc=`#ifdef COLOR_WRITE
#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#endif
#ifdef DEPTH_WRITE
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
#ifdef USE_WEIGHTS
uniform vec4 channelWeights;
#endif
uniform float opacity;varying vec2 vUv;void main(){
#ifdef COLOR_WRITE
vec4 texel=texture2D(inputBuffer,vUv);
#ifdef USE_WEIGHTS
texel*=channelWeights;
#endif
gl_FragColor=opacity*texel;
#ifdef COLOR_SPACE_CONVERSION
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
#else
gl_FragColor=vec4(0.0);
#endif
#ifdef DEPTH_WRITE
gl_FragDepth=readDepth(vUv);
#endif
}`,Ht="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Es=class extends Ee{constructor(){super({name:"CopyMaterial",defines:{DEPTH_PACKING:"0",COLOR_WRITE:"1"},uniforms:{inputBuffer:new $(null),depthBuffer:new $(null),channelWeights:new $(null),opacity:new $(1)},blending:$e,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:gc,vertexShader:Ht}),this.depthFunc=ic}get inputBuffer(){return this.uniforms.inputBuffer.value}set inputBuffer(e){const t=e!==null;this.colorWrite!==t&&(t?this.defines.COLOR_WRITE=!0:delete this.defines.COLOR_WRITE,this.colorWrite=t,this.needsUpdate=!0),this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){const t=e!==null;this.depthWrite!==t&&(t?this.defines.DEPTH_WRITE=!0:delete this.defines.DEPTH_WRITE,this.depthTest=t,this.depthWrite=t,this.needsUpdate=!0),this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}get channelWeights(){return this.uniforms.channelWeights.value}set channelWeights(e){e!==null?(this.defines.USE_WEIGHTS="1",this.uniforms.channelWeights.value=e):delete this.defines.USE_WEIGHTS,this.needsUpdate=!0}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},mc=class extends ce{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new Es,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new we(1,1,{minFilter:yn,magFilter:yn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==_e?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e!==null&&e.outputColorSpace===Q&&(this.renderTarget.texture.colorSpace=Q))}},Bi=new Ye,Rs=class extends ce{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,r,i){const o=this.overrideClearColor,s=this.overrideClearAlpha,a=e.getClearAlpha(),l=o!==null,c=s>=0;l?(e.getClearColor(Bi),e.setClearColor(o,c?s:a)):c&&e.setClearAlpha(s),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(Bi,a):c&&e.setClearAlpha(a)}},vc=class extends ce{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new Rs(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,r,i){const o=e.getContext(),s=e.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,f=this.inverted?0:1,d=1-f;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.stencil.setFunc(o.ALWAYS,f,4294967295),s.stencil.setClear(d),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(a,l)):(e.setRenderTarget(t),e.render(a,l),e.setRenderTarget(n),e.render(a,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(o.EQUAL,1,4294967295),s.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.stencil.setLocked(!0)}},bc=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new mc,this.depthTexture=null,this.passes=[],this.timer=new dc,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new ee),n=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===_e&&e.outputColorSpace===Q&&(this.inputBuffer.texture.colorSpace=Q,this.outputBuffer.texture.colorSpace=Q,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const i of this.passes)i.initialize(e,n,r)}}replaceRenderer(e,t=!0){const n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(n.domElement),r.appendChild(e.domElement)),n}createDepthTexture(){const e=this.depthTexture=new Yl;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Xl,e.type=Zl):e.type=Ql,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,r){const i=this.renderer,o=i===null?new ee:i.getDrawingBufferSize(new ee),s={minFilter:yn,magFilter:yn,stencilBuffer:t,depthBuffer:e,type:n},a=new we(o.width,o.height,s);return r>0&&(a.samples=r),n===_e&&i!==null&&i.outputColorSpace===Q&&(a.texture.colorSpace=Q),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new ee),o=r.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(i.width,i.height),e.initialize(r,o,s),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const a=this.createDepthTexture();for(e of n)e.setDepthTexture(a)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,n=t.indexOf(e);if(n!==-1&&t.splice(n,1).length>0){if(this.depthTexture!==null){const o=(a,l)=>a||l.needsDepthTexture;t.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,n=this.copyPass;let r=this.inputBuffer,i=this.outputBuffer,o=!1,s,a,l;e===void 0&&(this.timer.update(),e=this.timer.getDelta());for(const c of this.passes)c.enabled&&(c.render(t,r,i,e,o),c.needsSwap&&(o&&(n.renderToScreen=c.renderToScreen,s=t.getContext(),a=t.state.buffers.stencil,a.setFunc(s.NOTEQUAL,1,4294967295),n.render(t,r,i,e,o),a.setFunc(s.EQUAL,1,4294967295)),l=r,r=i,i=l),c instanceof vc?o=!0:c instanceof pc&&(o=!1))}setSize(e,t,n){const r=this.renderer,i=r.getSize(new ee);(e===void 0||t===void 0)&&(e=i.width,t=i.height),(i.width!==e||i.height!==t)&&r.setSize(e,t,n);const o=r.getDrawingBufferSize(new ee);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const s of this.passes)s.setSize(o.width,o.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),ce.fullscreenGeometry.dispose()}},Ue={NONE:0,DEPTH:1,CONVOLUTION:2},V={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},yc=class{constructor(){this.shaderParts=new Map([[V.FRAGMENT_HEAD,null],[V.FRAGMENT_MAIN_UV,null],[V.FRAGMENT_MAIN_IMAGE,null],[V.VERTEX_HEAD,null],[V.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Ue.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=vs}},rr=!1,Fi=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let n;if(t.material.flatShading)switch(t.material.side){case At:n=this.materialsFlatShadedDoubleSide;break;case ln:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(t.material.side){case At:n=this.materialsDoubleSide;break;case ln:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=n[2]:t.isInstancedMesh?t.material=n[1]:t.material=n[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof Ee))return e.clone();const t=e.uniforms,n=new Map;for(const i in t){const o=t[i].value;o.isRenderTargetTexture&&(t[i].value=null,n.set(i,o))}const r=e.clone();for(const i of n)t[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const n of t)n.uniforms=Object.assign({},e.uniforms),n.side=rc;t[2].skinning=!0,this.materialsBackSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.side=ln,r}),this.materialsDoubleSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.side=At,r}),this.materialsFlatShaded=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=ln,r}),this.materialsFlatShadedDoubleSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=At,r})}}render(e,t,n){const r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,rr){const i=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(const o of i)o[0].material=o[1];this.meshCount!==i.size&&i.clear()}else{const i=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=i}e.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return rr}static set workaroundEnabled(e){rr=e}},qe=-1,te=class extends ni{constructor(e,t=qe,n=qe,r=1){super(),this.resizable=e,this.baseSize=new ee(1,1),this.preferredSize=new ee(t,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new ee,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,n=this.effectiveSize,r=this.scale;t.width!==qe?n.width=t.width:t.height!==qe?n.width=Math.round(t.height*(e.width/Math.max(e.height,1))):n.width=Math.round(e.width*r),t.height!==qe?n.height=t.height:t.width!==qe?n.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):n.height=Math.round(e.height*r)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(qe),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.baseSize.width!==e||this.baseSize.height!==t)&&(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferredSize.width!==e||this.preferredSize.height!==t)&&(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return qe}},H={ADD:0,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},xc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),y.a*opacity);}",Sc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),y.a*opacity);}",wc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",Ec="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),y.a*opacity);}",Rc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),y.a*opacity);}",Cc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),y.a*opacity);}",Tc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),y.a*opacity);}",Mc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),y.a*opacity);}",Pc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),y.a*opacity);}",Oc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),y.a*opacity);}",_c="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),y.a*opacity);}",Dc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),y.a*opacity);}",Ac="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),y.a*opacity);}",$c="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),y.a*opacity);}",kc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),y.a*opacity);}",Ic="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",Nc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),y.a*opacity);}",Bc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",Fc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",zc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),y.a*opacity);}",Uc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),y.a*opacity);}",Lc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}",jc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",Hc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),y.a*opacity);}",Wc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",Vc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",Gc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),y.a*opacity);}",Kc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),y.a*opacity);}",qc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Yc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),y.a*opacity);}",Xc="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",Zc=new Map([[H.ADD,xc],[H.AVERAGE,Sc],[H.COLOR,wc],[H.COLOR_BURN,Ec],[H.COLOR_DODGE,Rc],[H.DARKEN,Cc],[H.DIFFERENCE,Tc],[H.DIVIDE,Mc],[H.DST,null],[H.EXCLUSION,Pc],[H.HARD_LIGHT,Oc],[H.HARD_MIX,_c],[H.HUE,Dc],[H.INVERT,Ac],[H.INVERT_RGB,$c],[H.LIGHTEN,kc],[H.LINEAR_BURN,Ic],[H.LINEAR_DODGE,Nc],[H.LINEAR_LIGHT,Bc],[H.LUMINOSITY,Fc],[H.MULTIPLY,zc],[H.NEGATION,Uc],[H.NORMAL,Lc],[H.OVERLAY,jc],[H.PIN_LIGHT,Hc],[H.REFLECT,Wc],[H.SATURATION,Vc],[H.SCREEN,Gc],[H.SOFT_LIGHT,Kc],[H.SRC,qc],[H.SUBTRACT,Yc],[H.VIVID_LIGHT,Xc]]),Qc=class extends ni{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new $(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return Zc.get(this.blendFunction)}},vt=class extends ni{constructor(e,t,{attributes:n=Ue.NONE,blendFunction:r=H.NORMAL,defines:i=new Map,uniforms:o=new Map,extensions:s=null,vertexShader:a=null}={}){super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=a,this.defines=i,this.uniforms=o,this.extensions=s,this.blendMode=new Qc(r),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=vs,this._outputColorSpace=bs}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=et){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof we||t instanceof ys||t instanceof xs||t instanceof ce)&&this[e].dispose()}}},Bn={MEDIUM:2,LARGE:3},Jc=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,eu="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",tu=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],nu=class extends Ee{constructor(e=new Ii){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new $(null),texelSize:new $(new Ii),scale:new $(1),kernel:new $(0)},blending:$e,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Jc,vertexShader:eu}),this.setTexelSize(e.x,e.y),this.kernelSize=Bn.MEDIUM}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return tu[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,e*.5,t*.5)}setSize(e,t){const n=1/e,r=1/t;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},Cs=class extends ce{constructor({kernelSize:e=Bn.MEDIUM,resolutionScale:t=.5,width:n=te.AUTO_SIZE,height:r=te.AUTO_SIZE,resolutionX:i=n,resolutionY:o=r}={}){super("KawaseBlurPass"),this.renderTargetA=new we(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const s=this.resolution=new te(this,i,o,t);s.addEventListener("change",a=>this.setSize(s.baseWidth,s.baseHeight)),this._blurMaterial=new nu,this._blurMaterial.kernelSize=e,this.copyMaterial=new Es}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){const o=this.scene,s=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,f=c.kernelSequence;let d=t;this.fullscreenMaterial=c;for(let h=0,p=f.length;h<p;++h){const g=(h&1)===0?a:l;c.kernel=f[h],c.inputBuffer=d.texture,e.setRenderTarget(g),e.render(o,s),d=g}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(o,s)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(e,t)}initialize(e,t,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==_e?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e!==null&&e.outputColorSpace===Q&&(this.renderTargetA.texture.colorSpace=Q,this.renderTargetB.texture.colorSpace=Q))}static get AUTO_SIZE(){return te.AUTO_SIZE}},ru=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,iu=class extends Ee{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Ss.replace(/\D+/g,"")},uniforms:{inputBuffer:new $(null),threshold:new $(0),smoothing:new $(1),range:new $(null)},blending:$e,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ru,vertexShader:Ht}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},ou=class extends ce{constructor({renderTarget:e,luminanceRange:t,colorOutput:n,resolutionScale:r=1,width:i=te.AUTO_SIZE,height:o=te.AUTO_SIZE,resolutionX:s=i,resolutionY:a=o}={}){super("LuminancePass"),this.fullscreenMaterial=new iu(n,t),this.needsSwap=!1,this.renderTarget=e,this.renderTarget===void 0&&(this.renderTarget=new we(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new te(this,s,a,r);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,n,r,i){const o=this.fullscreenMaterial;o.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){n!==void 0&&n!==_e&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},su=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,au="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",lu=class extends Ee{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new $(null),texelSize:new $(new ee)},blending:$e,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:su,vertexShader:au})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},cu=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,uu="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",fu=class extends Ee{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new $(null),supportBuffer:new $(null),texelSize:new $(new ee),radius:new $(.85)},blending:$e,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:cu,vertexShader:uu})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},du=class extends ce{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new we(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new lu,this.upsamplingMaterial=new fu,this.resolution=new ee}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<e;++n){const r=t.clone();r.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(t);for(let n=1,r=e-1;n<r;++n){const i=t.clone();i.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,n,r,i){const{scene:o,camera:s}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:f}=this;let d=t;this.fullscreenMaterial=a;for(let h=0,p=c.length;h<p;++h){const g=c[h];a.setSize(d.width,d.height),a.inputBuffer=d.texture,e.setRenderTarget(g),e.render(o,s),d=g}this.fullscreenMaterial=l;for(let h=f.length-1;h>=0;--h){const p=f[h];l.setSize(d.width,d.height),l.inputBuffer=d.texture,l.supportBuffer=c[h].texture,e.setRenderTarget(p),e.render(o,s),d=p}}setSize(e,t){const n=this.resolution;n.set(e,t);let r=n.width,i=n.height;for(let o=0,s=this.downsamplingMipmaps.length;o<s;++o)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[o].setSize(r,i),o<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[o].setSize(r,i)}initialize(e,t,n){if(n!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=n;if(n!==_e)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(e!==null&&e.outputColorSpace===Q)for(const i of r)i.texture.colorSpace=Q}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},hu=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}`,pu=class extends vt{constructor({blendFunction:e=H.SCREEN,luminanceThreshold:t=1,luminanceSmoothing:n=.03,mipmapBlur:r=!0,intensity:i=1,radius:o=.85,levels:s=8,kernelSize:a=Bn.LARGE,resolutionScale:l=.5,width:c=te.AUTO_SIZE,height:f=te.AUTO_SIZE,resolutionX:d=c,resolutionY:h=f}={}){super("BloomEffect",hu,{blendFunction:e,uniforms:new Map([["map",new $(null)],["intensity",new $(i)]])}),this.renderTarget=new we(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Cs({kernelSize:a}),this.luminancePass=new ou({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new du,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=o,this.mipmapBlurPass.levels=s,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const p=this.resolution=new te(this,d,h,l);p.addEventListener("change",g=>this.setSize(p.baseWidth,p.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,i.renderTarget):this.blurPass.render(e,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,r)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,n){this.blurPass.initialize(e,t,n),this.luminancePass.initialize(e,t,n),this.mipmapBlurPass.initialize(e,t,n),n!==void 0&&(this.renderTarget.texture.type=n,e!==null&&e.outputColorSpace===Q&&(this.renderTarget.texture.colorSpace=Q))}},gu=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,mu="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",vu=class extends vt{constructor({offset:e=new ee(.001,5e-4),radialModulation:t=!1,modulationOffset:n=.15}={}){super("ChromaticAberrationEffect",gu,{vertexShader:mu,attributes:Ue.CONVOLUTION,uniforms:new Map([["offset",new $(e)],["modulationOffset",new $(n)]])}),this.radialModulation=t}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(e){e?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(e){this.uniforms.get("modulationOffset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},Ts={RED:0,GREEN:1},ii={DISCARD:0,MULTIPLY_RGB_SET_ALPHA:2,MULTIPLY_RGB:3},bu=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 cocNearFar=texture2D(cocBuffer,vUv).rg*scale;float coc=cocNearFar.x;
#else
float coc=texture2D(cocBuffer,vUv).g*scale;
#endif
if(coc==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(cocNearFar.x,cocNearFar.y);
#else
vec2 step=texelSize*coc;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,cn=class extends Ee{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{inputBuffer:new $(null),cocBuffer:new $(null),texelSize:new $(new ee),kernel64:new $(null),kernel16:new $(null),scale:new $(1)},blending:$e,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:bu,vertexShader:Ht}),t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.scale}setScale(e){this.scale=e}generateKernel(){const e=2.39996323,t=new Float64Array(128),n=new Float64Array(32);let r=0,i=0;for(let o=0,s=Math.sqrt(80);o<80;++o){const a=o*e,l=Math.sqrt(o)/s,c=l*Math.cos(a),f=l*Math.sin(a);o%5===0?(n[i++]=c,n[i++]=f):(t[r++]=c,t[r++]=f)}this.uniforms.kernel64.value=t,this.uniforms.kernel16.value=n}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},yu=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform mat4 projectionMatrix;uniform mat4 projectionMatrixInverse;uniform float cameraNear;uniform float cameraFar;uniform float focusDistance;uniform float focusRange;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}
#ifdef PERSPECTIVE_CAMERA
#define getViewZ(depth) perspectiveDepthToViewZ(depth, cameraNear, cameraFar)
#else
#define getViewZ(depth) orthographicDepthToViewZ(depth, cameraNear, cameraFar)
#endif
vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(projectionMatrixInverse*clipPosition).xyz;}vec3 getViewPosition(const in vec2 screenPosition,const in float depth){return getViewPosition(screenPosition,depth,getViewZ(depth));}
#define getDistance(viewPosition) length(viewPosition)
void main(){float depth=readDepth(vUv);vec3 viewPosition=getViewPosition(vUv,depth);float distance=getDistance(viewPosition);float signedDistance=distance-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,xu=class extends Ee{constructor(e=null){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new $(null),projectionMatrix:new $(null),projectionMatrixInverse:new $(null),cameraNear:new $(.3),cameraFar:new $(1e3),focusDistance:new $(0),focusRange:new $(0)},blending:$e,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:yu,vertexShader:Ht}),this.uniforms.focalLength=this.uniforms.focusRange,e!==null&&this.copyCameraSettings(e)}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=et){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return this.focusDistance}set worldFocusDistance(e){this.focusDistance=e}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return this.focusRange}set worldFocusRange(e){this.focusRange=e}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){this.uniforms.projectionMatrix.value=e.projectionMatrix,this.uniforms.projectionMatrixInverse.value=e.projectionMatrixInverse,this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far;const t=this.defines.PERSPECTIVE_CAMERA!==void 0;e instanceof ws?t||(this.defines.PERSPECTIVE_CAMERA=!0,this.needsUpdate=!0):t&&(delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Su=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=(mask>0.0)?0.0:1.0;
#else
mask=(mask>0.0)?1.0:0.0;
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 3
vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=vec4(mask*texel.rgb,texel.a);
#elif MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,wu=class extends Ee{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new $(e),inputBuffer:new $(null),strength:new $(1)},blending:$e,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Su,vertexShader:Ht}),this.colorChannel=Ts.RED,this.maskFunction=ii.DISCARD}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==_e&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},ut=class extends ce{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.input=t}setInput(e){this.input=e}render(e,t,n,r,i){const o=this.fullscreenMaterial.uniforms;t!==null&&o!==void 0&&o[this.input]!==void 0&&(o[this.input].value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}initialize(e,t,n){n!==void 0&&n!==_e&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Eu=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
#if MASK_FUNCTION != 1 && MASK_FUNCTION != 2
uniform lowp sampler2D farCoCBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);
#if MASK_FUNCTION == 1 || MASK_FUNCTION == 2
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,colorFar.a);cocNearFar.x=min(cocNearFar.x*scale,1.0);
#else
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,texture2D(farCoCBuffer,uv).g);cocNearFar=min(cocNearFar*scale,1.0);colorFar.a*=cocNearFar.y;
#endif
vec4 result=inputColor*(1.0-cocNearFar.y)+colorFar;result=mix(result,colorNear,cocNearFar.x);outputColor=result;}`,Ru=new ze,Cu=class extends vt{constructor(e,{blendFunction:t,worldFocusDistance:n,worldFocusRange:r,focalLength:i,focusDistance:o=n||3,focusRange:s=r||i||2,bokehScale:a=1,resolutionScale:l=.5,width:c,height:f,resolutionX:d=c||te.AUTO_SIZE,resolutionY:h=f||te.AUTO_SIZE}={}){super("DepthOfFieldEffect",Eu,{blendFunction:t,attributes:Ue.DEPTH,uniforms:new Map([["nearColorBuffer",new $(null)],["farColorBuffer",new $(null)],["nearCoCBuffer",new $(null)],["farCoCBuffer",new $(null)],["scale",new $(1)]])}),this.camera=e,this.renderTarget=new we(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.uniforms.get("farCoCBuffer").value=this.renderTargetCoC.texture,this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new ut(new xu(e));const p=this.cocMaterial;p.focusDistance=o,p.focusRange=s,this.blurPass=new Cs({resolutionScale:l,resolutionX:d,resolutionY:h,kernelSize:Bn.MEDIUM}),this.maskPass=new ut(new wu(this.renderTargetCoC.texture));const g=this.maskPass.fullscreenMaterial;g.colorChannel=Ts.GREEN,this.maskFunction=ii.MULTIPLY_RGB,this.bokehNearBasePass=new ut(new cn(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new ut(new cn(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new ut(new cn(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new ut(new cn(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const m=this.resolution=new te(this,d,h,l);m.addEventListener("change",v=>this.setSize(m.baseWidth,m.baseHeight)),this.bokehScale=a}set mainCamera(e){this.camera=e,this.cocMaterial.copyCameraSettings(e)}get cocTexture(){return this.renderTargetCoC.texture}get maskFunction(){return this.maskPass.fullscreenMaterial.maskFunction}set maskFunction(e){this.maskFunction!==e&&(this.defines.set("MASK_FUNCTION",e.toFixed(0)),this.maskPass.fullscreenMaterial.maskFunction=e,this.setChanged())}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.cocMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){this.bokehNearBasePass.fullscreenMaterial.scale=e,this.bokehNearFillPass.fullscreenMaterial.scale=e,this.bokehFarBasePass.fullscreenMaterial.scale=e,this.bokehFarFillPass.fullscreenMaterial.scale=e,this.maskPass.fullscreenMaterial.strength=e,this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){return this.camera.getWorldPosition(Ru).distanceTo(e)}setDepthTexture(e,t=et){this.cocMaterial.depthBuffer=e,this.cocMaterial.depthPacking=t}update(e,t,n){const r=this.renderTarget,i=this.renderTargetCoC,o=this.renderTargetCoCBlurred,s=this.renderTargetMasked;if(this.target!==null){const a=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=a}this.cocPass.render(e,null,i),this.blurPass.render(e,i,o),this.maskPass.render(e,t,s),this.bokehFarBasePass.render(e,s,r),this.bokehFarFillPass.render(e,r,this.renderTargetFar),this.bokehNearBasePass.render(e,t,r),this.bokehNearFillPass.render(e,r,this.renderTargetNear)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t);const r=n.width,i=n.height;this.cocPass.setSize(e,t),this.blurPass.setSize(e,t),this.maskPass.setSize(e,t),this.renderTargetFar.setSize(e,t),this.renderTargetCoC.setSize(e,t),this.renderTargetMasked.setSize(e,t),this.renderTarget.setSize(r,i),this.renderTargetNear.setSize(r,i),this.renderTargetCoCBlurred.setSize(r,i),this.bokehNearBasePass.fullscreenMaterial.setSize(e,t),this.bokehNearFillPass.fullscreenMaterial.setSize(e,t),this.bokehFarBasePass.fullscreenMaterial.setSize(e,t),this.bokehFarFillPass.fullscreenMaterial.setSize(e,t)}initialize(e,t,n){this.cocPass.initialize(e,t,n),this.maskPass.initialize(e,t,n),this.bokehNearBasePass.initialize(e,t,n),this.bokehNearFillPass.initialize(e,t,n),this.bokehFarBasePass.initialize(e,t,n),this.bokehFarFillPass.initialize(e,t,n),this.blurPass.initialize(e,t,_e),e.capabilities.logarithmicDepthBuffer&&(this.cocPass.fullscreenMaterial.defines.LOG_DEPTH="1"),n!==void 0&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,e!==null&&e.outputColorSpace===Q&&(this.renderTarget.texture.colorSpace=Q,this.renderTargetNear.texture.colorSpace=Q,this.renderTargetFar.texture.colorSpace=Q,this.renderTargetMasked.texture.colorSpace=Q))}},Ms=class extends ce{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new Rs,this.overrideMaterialManager=n===null?null:new Fi(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new Fi(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,r,i){const o=this.scene,s=this.camera,a=this.selection,l=s.layers.mask,c=o.background,f=e.shadowMap.autoUpdate,d=this.renderToScreen?null:t;a!==null&&s.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,o,s):e.render(o,s),s.layers.mask=l,o.background=c,e.shadowMap.autoUpdate=f}},Pt={DEFAULT:0,ESKIL:1},Tu=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Mu="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Pu=class extends Ee{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new $(null),normalBuffer:new $(null),texelSize:new $(new ee)},blending:$e,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Tu,vertexShader:Mu})}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=et){this.depthBuffer=e,this.depthPacking=t}set normalBuffer(e){this.uniforms.normalBuffer.value=e,e!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(e){this.normalBuffer=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Ou=class extends ce{constructor({normalBuffer:e=null,resolutionScale:t=.5,width:n=te.AUTO_SIZE,height:r=te.AUTO_SIZE,resolutionX:i=n,resolutionY:o=r}={}){super("DepthDownsamplingPass");const s=new Pu;s.normalBuffer=e,this.fullscreenMaterial=s,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new we(1,1,{minFilter:xn,magFilter:xn,depthBuffer:!1,type:ec}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new te(this,i,o,t);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(e,t=et){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t}render(e,t,n,r,i){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(e,t)}initialize(e,t,n){const r=e.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},_u=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Du=class extends vt{constructor({blendFunction:e,eskil:t=!1,technique:n=t?Pt.ESKIL:Pt.DEFAULT,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",_u,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",n.toFixed(0)]]),uniforms:new Map([["offset",new $(r)],["darkness",new $(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Pt.ESKIL}set eskil(e){this.technique=e?Pt.ESKIL:Pt.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},Au=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,$u="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",ku=class extends Ee{constructor(e,t,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Ss.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new $(null),depthBuffer:new $(null),resolution:new $(new ee),texelSize:new $(new ee),cameraNear:new $(.3),cameraFar:new $(1e3),aspect:new $(1),time:new $(0)},blending:$e,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),e&&this.setShaderParts(e),t&&this.setDefines(t),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=et){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader=Au.replace(V.FRAGMENT_HEAD,e.get(V.FRAGMENT_HEAD)||"").replace(V.FRAGMENT_MAIN_UV,e.get(V.FRAGMENT_MAIN_UV)||"").replace(V.FRAGMENT_MAIN_IMAGE,e.get(V.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=$u.replace(V.VERTEX_HEAD,e.get(V.VERTEX_HEAD)||"").replace(V.VERTEX_MAIN_SUPPORT,e.get(V.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ws?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}static get Section(){return V}};function zi(e,t,n){for(const r of t){const i="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),o=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const s of n.entries())s[1]!==null&&n.set(s[0],s[1].replace(o,i))}}function Iu(e,t,n){let r=t.getFragmentShader(),i=t.getVertexShader();const o=r!==void 0&&/mainImage/.test(r),s=r!==void 0&&/mainUv/.test(r);if(n.attributes|=t.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(s&&(n.attributes&Ue.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!o&&!s)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=n.shaderParts;let c=l.get(V.FRAGMENT_HEAD)||"",f=l.get(V.FRAGMENT_MAIN_UV)||"",d=l.get(V.FRAGMENT_MAIN_IMAGE)||"",h=l.get(V.VERTEX_HEAD)||"",p=l.get(V.VERTEX_MAIN_SUPPORT)||"";const g=new Set,m=new Set;if(s&&(f+=`	${e}MainUv(UV);
`,n.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const y=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);p+=`	${e}MainSupport(`,p+=y?`vUv);
`:`);
`;for(const w of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const E of w[1].split(/\s*,\s*/))n.varyings.add(E),g.add(E),m.add(E);for(const w of i.matchAll(a))m.add(w[1])}for(const y of r.matchAll(a))m.add(y[1]);for(const y of t.defines.keys())m.add(y.replace(/\([\w\s,]*\)/g,""));for(const y of t.uniforms.keys())m.add(y);m.delete("while"),m.delete("for"),m.delete("if"),t.uniforms.forEach((y,w)=>n.uniforms.set(e+w.charAt(0).toUpperCase()+w.slice(1),y)),t.defines.forEach((y,w)=>n.defines.set(e+w.charAt(0).toUpperCase()+w.slice(1),y));const v=new Map([["fragment",r],["vertex",i]]);zi(e,m,n.defines),zi(e,m,v),r=v.get("fragment"),i=v.get("vertex");const x=t.blendMode;if(n.blendModes.set(x.blendFunction,x),o){t.inputColorSpace!==null&&t.inputColorSpace!==n.colorSpace&&(d+=t.inputColorSpace===Q?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==bs?n.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(n.colorSpace=t.inputColorSpace);const y=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${e}MainImage(color0, UV, `,(n.attributes&Ue.DEPTH)!==0&&y.test(r)&&(d+="depth, ",n.readDepth=!0),d+=`color1);
	`;const w=e+"BlendOpacity";n.uniforms.set(w,x.opacity),d+=`color0 = blend${x.blendFunction}(color0, color1, ${w});

	`,c+=`uniform float ${w};

`}if(c+=r+`
`,i!==null&&(h+=i+`
`),l.set(V.FRAGMENT_HEAD,c),l.set(V.FRAGMENT_MAIN_UV,f),l.set(V.FRAGMENT_MAIN_IMAGE,d),l.set(V.VERTEX_HEAD,h),l.set(V.VERTEX_MAIN_SUPPORT,p),t.extensions!==null)for(const y of t.extensions)n.extensions.add(y)}}var Nu=class extends ce{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new ku(null,null,null,e),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=e.sort((t,n)=>n.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const e=new yc;let t=0;for(const s of this.effects)if(s.blendMode.blendFunction===H.DST)e.attributes|=s.getAttributes()&Ue.DEPTH;else{if((e.attributes&s.getAttributes()&Ue.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${s.name})`);Iu("e"+t++,s,e)}let n=e.shaderParts.get(V.FRAGMENT_HEAD),r=e.shaderParts.get(V.FRAGMENT_MAIN_IMAGE),i=e.shaderParts.get(V.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const s of e.blendModes.values())n+=s.getShaderCode().replace(o,`blend${s.blendFunction}`)+`
`;(e.attributes&Ue.DEPTH)!==0?(e.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,e.colorSpace===Q&&(r+=`color0 = sRGBToLinear(color0);
	`),e.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(V.FRAGMENT_HEAD,n),e.shaderParts.set(V.FRAGMENT_MAIN_IMAGE,r),e.shaderParts.set(V.FRAGMENT_MAIN_UV,i);for(const[s,a]of e.shaderParts)a!==null&&e.shaderParts.set(s,a.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=et){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,r,i){for(const o of this.effects)o.update(e,t,r);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=t.texture,o.time+=r*this.timeScale,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.renderer=e;for(const r of this.effects)r.initialize(e,t,n);this.updateMaterial(),n!==void 0&&n!==_e&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},Bu=class extends ce{constructor(e,t,{renderTarget:n,resolutionScale:r=1,width:i=te.AUTO_SIZE,height:o=te.AUTO_SIZE,resolutionX:s=i,resolutionY:a=o}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new Ms(e,t,new Jl);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const c=l.getClearPass();c.overrideClearColor=new Ye(7829503),c.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new we(1,1,{minFilter:xn,magFilter:xn}),this.renderTarget.texture.name="NormalPass.Target");const f=this.resolution=new te(this,s,a,r);f.addEventListener("change",d=>this.setSize(f.baseWidth,f.baseHeight))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,o,o)}setSize(e,t){const n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}};function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}new ee;new ee;function Ps(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ge=function e(t,n,r){var i=this;Ps(this,e),kt(this,"dot2",function(o,s){return i.x*o+i.y*s}),kt(this,"dot3",function(o,s,a){return i.x*o+i.y*s+i.z*a}),this.x=t,this.y=n,this.z=r},Fu=[new ge(1,1,0),new ge(-1,1,0),new ge(1,-1,0),new ge(-1,-1,0),new ge(1,0,1),new ge(-1,0,1),new ge(1,0,-1),new ge(-1,0,-1),new ge(0,1,1),new ge(0,-1,1),new ge(0,1,-1),new ge(0,-1,-1)],Ui=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Li=new Array(512),ji=new Array(512),zu=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var n=0;n<256;n++){var r;n&1?r=Ui[n]^t&255:r=Ui[n]^t>>8&255,Li[n]=Li[n+256]=r,ji[n]=ji[n+256]=Fu[r%12]}};zu(0);function Uu(e){if(typeof e=="number")e=Math.abs(e);else if(typeof e=="string"){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%2147483647}return e===0&&(e=311),e}function Hi(e){var t=Uu(e);return function(){var n=t*48271%2147483647;return t=n,n/2147483647}}var Lu=function e(t){var n=this;Ps(this,e),kt(this,"seed",0),kt(this,"init",function(r){n.seed=r,n.value=Hi(r)}),kt(this,"value",Hi(this.seed)),this.init(t)};new Lu(Math.random());const Os=u.createContext(null),Wi=e=>(e.getAttributes()&2)===2,ju=u.memo(u.forwardRef(({children:e,camera:t,scene:n,resolutionScale:r,enabled:i=!0,renderPriority:o=1,autoClear:s=!0,depthBuffer:a,enableNormalPass:l,stencilBuffer:c,multisampling:f=8,frameBufferType:d=sc},h)=>{const{gl:p,scene:g,camera:m,size:v}=ei(),x=n||g,y=t||m,[w,E,T]=u.useMemo(()=>{const O=new bc(p,{depthBuffer:a,stencilBuffer:c,multisampling:f,frameBufferType:d});O.addPass(new Ms(x,y));let k=null,M=null;return l&&(M=new Bu(x,y),M.enabled=!1,O.addPass(M),r!==void 0&&(k=new Ou({normalBuffer:M.texture,resolutionScale:r}),k.enabled=!1,O.addPass(k))),[O,M,k]},[y,p,a,c,f,d,x,l,r]);u.useEffect(()=>w?.setSize(v.width,v.height),[w,v]),Ve((O,k)=>{if(i){const M=p.autoClear;p.autoClear=s,c&&!s&&p.clearStencil(),w.render(k),p.autoClear=M}},i?o:0);const C=u.useRef(null);u.useLayoutEffect(()=>{const O=[],k=C.current.__r3f;if(k&&w){const M=k.children;for(let P=0;P<M.length;P++){const _=M[P].object;if(_ instanceof vt){const I=[_];if(!Wi(_)){let U=null;for(;(U=M[P+1]?.object)instanceof vt&&!Wi(U);)I.push(U),P++}const N=new Nu(y,...I);O.push(N)}else _ instanceof ce&&O.push(_)}for(const P of O)w?.addPass(P);E&&(E.enabled=!0),T&&(T.enabled=!0)}return()=>{for(const M of O)w?.removePass(M);E&&(E.enabled=!1),T&&(T.enabled=!1)}},[w,e,y,E,T]),u.useEffect(()=>{const O=p.toneMapping;return p.toneMapping=ac,()=>{p.toneMapping=O}},[p]);const R=u.useMemo(()=>({composer:w,normalPass:E,downSamplingPass:T,resolutionScale:r,camera:y,scene:x}),[w,E,T,r,y,x]);return u.useImperativeHandle(h,()=>w,[w]),S.jsx(Os.Provider,{value:R,children:S.jsx("group",{ref:C,children:e})})}));let Hu=0;const Vi=new WeakMap,oi=(e,t)=>function({blendFunction:n=t?.blendFunction,opacity:r=t?.opacity,...i}){let o=Vi.get(e);if(!o){const l=`@react-three/postprocessing/${e.name}-${Hu++}`;$l({[l]:e}),Vi.set(e,o=l)}const s=ei(l=>l.camera),a=b.useMemo(()=>[...t?.args??[],...i.args??[{...t,...i}]],[JSON.stringify(i)]);return S.jsx(o,{camera:s,"blendMode-blendFunction":n,"blendMode-opacity-value":r,...i,args:a})},Wu=u.forwardRef(function({blendFunction:e,worldFocusDistance:t,worldFocusRange:n,focusDistance:r,focusRange:i,focalLength:o,bokehScale:s,resolutionScale:a,resolutionX:l,resolutionY:c,width:f,height:d,target:h,depthTexture:p,...g},m){const{camera:v}=u.useContext(Os),x=h!=null,y=u.useMemo(()=>{const w=new Cu(v,{blendFunction:e,worldFocusDistance:t,worldFocusRange:n,focusDistance:r,focusRange:i,focalLength:o,bokehScale:s,resolutionScale:a,resolutionX:l,resolutionY:c,width:f,height:d});x&&(w.target=new ze),p&&w.setDepthTexture(p.texture,p.packing);const E=w.maskPass;return E.maskFunction=ii.MULTIPLY_RGB_SET_ALPHA,w},[v,e,t,n,r,i,o,s,a,l,c,f,d,x,p]);return u.useEffect(()=>()=>{y.dispose()},[y]),S.jsx("primitive",{...g,ref:m,object:y,target:h})}),Vu=oi(pu,{blendFunction:0}),Gu=oi(vu),Ku=oi(Du);var si=Il();const qu=Nn(si);function Gi(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function st(...e){return t=>{let n=!1;const r=e.map(i=>{const o=Gi(i,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():Gi(e[i],null)}}}}function at(...e){return u.useCallback(st(...e),e)}var Yu=Symbol.for("react.lazy"),Sn=ti[" use ".trim().toString()];function Xu(e){return typeof e=="object"&&e!==null&&"then"in e}function _s(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Yu&&"_payload"in e&&Xu(e._payload)}function Zu(e){const t=Qu(e),n=u.forwardRef((r,i)=>{let{children:o,...s}=r;_s(o)&&typeof Sn=="function"&&(o=Sn(o._payload));const a=u.Children.toArray(o),l=a.find(ef);if(l){const c=l.props.children,f=a.map(d=>d===l?u.Children.count(c)>1?u.Children.only(null):u.isValidElement(c)?c.props.children:null:d);return S.jsx(t,{...s,ref:i,children:u.isValidElement(c)?u.cloneElement(c,void 0,f):null})}return S.jsx(t,{...s,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function Qu(e){const t=u.forwardRef((n,r)=>{let{children:i,...o}=n;if(_s(i)&&typeof Sn=="function"&&(i=Sn(i._payload)),u.isValidElement(i)){const s=nf(i),a=tf(o,i.props);return i.type!==u.Fragment&&(a.ref=r?st(r,s):s),u.cloneElement(i,a)}return u.Children.count(i)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ju=Symbol("radix.slottable");function ef(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ju}function tf(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{const l=o(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function nf(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var rf=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],of=rf.reduce((e,t)=>{const n=Zu(`Primitive.${t}`),r=u.forwardRef((i,o)=>{const{asChild:s,...a}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Xe=globalThis?.document?u.useLayoutEffect:()=>{},sf="Portal",Ds=u.forwardRef((e,t)=>{const{container:n,...r}=e,[i,o]=u.useState(!1);Xe(()=>o(!0),[]);const s=n||i&&globalThis?.document?.body;return s?qu.createPortal(S.jsx(of.div,{...r,ref:t}),s):null});Ds.displayName=sf;var af=Ds,Ki=Object.prototype.hasOwnProperty;function Ft(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Ft(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Ki.call(e,n)&&++r&&!Ki.call(t,n)||!(n in t)||!Ft(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Fn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var zn=function(t,n,r,i){this.name=t,this.fn=n,this.args=r,this.modifiers=i};zn.prototype._test=function(t){var n=this.fn;try{gt(this.modifiers.slice(),n,this)(t)}catch{n=function(){return!1}}try{return gt(this.modifiers.slice(),n,this)(t)}catch{return!1}};zn.prototype._check=function(t){try{gt(this.modifiers.slice(),this.fn,this)(t)}catch{if(gt(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!gt(this.modifiers.slice(),this.fn,this)(t))throw null};zn.prototype._testAsync=function(t){var n=this;return new Promise(function(r,i){$s(n.modifiers.slice(),n.fn,n)(t).then(function(o){o?r(t):i(null)}).catch(function(o){return i(o)})})};function As(e,t){return t===void 0&&(t="simple"),typeof e=="object"?e[t]:e}function gt(e,t,n){if(e.length){var r=e.shift(),i=gt(e,t,n);return r.perform(i,n)}else return As(t)}function $s(e,t,n){if(e.length){var r=e.shift(),i=$s(e,t,n);return r.performAsync(i,n)}else return function(o){return Promise.resolve(As(t,"async")(o))}}var lf=function(t,n,r){this.name=t,this.perform=n,this.performAsync=r},ai=(function(e){function t(n,r,i,o){for(var s=[],a=arguments.length-4;a-- >0;)s[a]=arguments[a+4];e.call(this,s),e.captureStackTrace&&e.captureStackTrace(this,t),this.rule=n,this.value=r,this.cause=i,this.target=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t})(Error),De=function(t,n){t===void 0&&(t=[]),n===void 0&&(n=[]),this.chain=t,this.nextRuleModifiers=n};De.prototype._applyRule=function(t,n){var r=this;return function(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];return r.chain.push(new zn(n,t.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};De.prototype._applyModifier=function(t,n){return this.nextRuleModifiers.push(new lf(n,t.simple,t.async)),this};De.prototype._clone=function(){return new De(this.chain.slice(),this.nextRuleModifiers.slice())};De.prototype.test=function(t){return this.chain.every(function(n){return n._test(t)})};De.prototype.testAll=function(t){var n=[];return this.chain.forEach(function(r){try{r._check(t)}catch(i){n.push(new ai(r,t,i))}}),n};De.prototype.check=function(t){this.chain.forEach(function(n){try{n._check(t)}catch(r){throw new ai(n,t,r)}})};De.prototype.testAsync=function(t){var n=this;return new Promise(function(r,i){ks(t,n.chain.slice(),r,i)})};function ks(e,t,n,r){if(t.length){var i=t.shift();i._testAsync(e).then(function(){ks(e,t,n,r)},function(o){r(new ai(i,e,o))})}else n(e)}var qi=function(e,t){return t&&typeof e=="string"&&e.trim().length===0?!0:e==null};function cf(e,t){return t===void 0&&(t=!1),{simple:function(n){return qi(n,t)||e.check(n)===void 0},async:function(n){return qi(n,t)||e.testAsync(n)}}}function fe(){return typeof Proxy<"u"?Is(new De):Ar(new De)}var zt={};fe.extend=function(e){Object.assign(zt,e)};fe.clearCustomRules=function(){zt={}};function Is(e){return new Proxy(e,{get:function(n,r){if(r in n)return n[r];var i=Is(e._clone());if(r in wn)return i._applyModifier(wn[r],r);if(r in zt)return i._applyRule(zt[r],r);if(r in $r)return i._applyRule($r[r],r)}})}function Ar(e){var t=function(i,o){return Object.keys(i).forEach(function(s){o[s]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=Ar(o._clone()),f=c._applyRule(i[s],s).apply(void 0,a);return f}}),o},n=t($r,e),r=t(zt,n);return Object.keys(wn).forEach(function(i){Object.defineProperty(r,i,{get:function(){var o=Ar(r._clone());return o._applyModifier(wn[i],i)}})}),r}var wn={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then(function(n){return!n}).catch(function(){return!0})}}},some:{simple:function(e){return function(t){return un(t).some(function(n){try{return e(n)}catch{return!1}})}},async:function(e){return function(t){return Promise.all(un(t).map(function(n){try{return e(n).catch(function(){return!1})}catch{return!1}})).then(function(n){return n.some(Boolean)})}}},every:{simple:function(e){return function(t){return t!==!1&&un(t).every(e)}},async:function(e){return function(t){return Promise.all(un(t).map(e)).then(function(n){return n.every(Boolean)})}}},strict:{simple:function(e,t){return function(n){return Yi(t)&&n&&typeof n=="object"?Object.keys(t.args[0]).length===Object.keys(n).length&&e(n):e(n)}},async:function(e,t){return function(n){return Promise.resolve(e(n)).then(function(r){return Yi(t)&&n&&typeof n=="object"?Object.keys(t.args[0]).length===Object.keys(n).length&&r:r}).catch(function(){return!1})}}}};function Yi(e){return e&&e.name==="schema"&&e.args.length>0&&typeof e.args[0]=="object"}function un(e){return typeof e=="string"?e.split(""):e}var $r={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(e){return e===void 0&&(e=!0),function(t){return typeof t=="number"&&(e||isFinite(t))}},integer:function(){return function(e){var t=Number.isInteger||uf;return t(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return ft("string")},boolean:function(){return ft("boolean")},undefined:function(){return ft("undefined")},null:function(){return ft("null")},array:function(){return ft("array")},object:function(){return ft("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return typeof e=="boolean"||e===e.toLowerCase()&&e.trim()!==""}},uppercase:function(){return function(e){return e===e.toUpperCase()&&e.trim()!==""}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return e.length===0}},length:function(e,t){return function(n){return n.length>=e&&n.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(n){return n>=e&&n<=t}},range:function(e,t){return function(n){return n>=e&&n<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2===0}},odd:function(){return function(e){return e%2!==0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return ff(e)},passesAnyOf:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(n){return e.some(function(r){return r.test(n)})}},optional:cf};function ft(e){return function(t){return Array.isArray(t)&&e==="array"||t===null&&e==="null"||typeof t===e}}function uf(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function ff(e){return{simple:function(t){var n=[];if(Object.keys(e).forEach(function(r){var i=e[r];try{i.check((t||{})[r])}catch(o){o.target=r,n.push(o)}}),n.length>0)throw n;return!0},async:function(t){var n=[],r=Object.keys(e).map(function(i){var o=e[i];return o.testAsync((t||{})[i]).catch(function(s){s.target=i,n.push(s)})});return Promise.all(r).then(function(){if(n.length>0)throw n;return!0})}}}var K="colors",se="sizes",A="space",df={gap:A,gridGap:A,columnGap:A,gridColumnGap:A,rowGap:A,gridRowGap:A,inset:A,insetBlock:A,insetBlockEnd:A,insetBlockStart:A,insetInline:A,insetInlineEnd:A,insetInlineStart:A,margin:A,marginTop:A,marginRight:A,marginBottom:A,marginLeft:A,marginBlock:A,marginBlockEnd:A,marginBlockStart:A,marginInline:A,marginInlineEnd:A,marginInlineStart:A,padding:A,paddingTop:A,paddingRight:A,paddingBottom:A,paddingLeft:A,paddingBlock:A,paddingBlockEnd:A,paddingBlockStart:A,paddingInline:A,paddingInlineEnd:A,paddingInlineStart:A,top:A,right:A,bottom:A,left:A,scrollMargin:A,scrollMarginTop:A,scrollMarginRight:A,scrollMarginBottom:A,scrollMarginLeft:A,scrollMarginX:A,scrollMarginY:A,scrollMarginBlock:A,scrollMarginBlockEnd:A,scrollMarginBlockStart:A,scrollMarginInline:A,scrollMarginInlineEnd:A,scrollMarginInlineStart:A,scrollPadding:A,scrollPaddingTop:A,scrollPaddingRight:A,scrollPaddingBottom:A,scrollPaddingLeft:A,scrollPaddingX:A,scrollPaddingY:A,scrollPaddingBlock:A,scrollPaddingBlockEnd:A,scrollPaddingBlockStart:A,scrollPaddingInline:A,scrollPaddingInlineEnd:A,scrollPaddingInlineStart:A,fontSize:"fontSizes",background:K,backgroundColor:K,backgroundImage:K,borderImage:K,border:K,borderBlock:K,borderBlockEnd:K,borderBlockStart:K,borderBottom:K,borderBottomColor:K,borderColor:K,borderInline:K,borderInlineEnd:K,borderInlineStart:K,borderLeft:K,borderLeftColor:K,borderRight:K,borderRightColor:K,borderTop:K,borderTopColor:K,caretColor:K,color:K,columnRuleColor:K,fill:K,outline:K,outlineColor:K,stroke:K,textDecorationColor:K,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:se,minBlockSize:se,maxBlockSize:se,inlineSize:se,minInlineSize:se,maxInlineSize:se,width:se,minWidth:se,maxWidth:se,height:se,minHeight:se,maxHeight:se,flexBasis:se,gridTemplateColumns:se,gridTemplateRows:se,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},hf=(e,t)=>typeof t=="function"?{"()":Function.prototype.toString.call(t)}:t,St=()=>{const e=Object.create(null);return(t,n,...r)=>{const i=(o=>JSON.stringify(o,hf))(t);return i in e?e[i]:e[i]=n(t,...r)}},nt=Symbol.for("sxs.internal"),li=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),Xi=e=>{for(const t in e)return!0;return!1},{hasOwnProperty:pf}=Object.prototype,kr=e=>e.includes("-")?e:e.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase())),gf=/\s+(?![^()]*\))/,dt=e=>t=>e(...typeof t=="string"?String(t).split(gf):[t]),Zi={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:dt(((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e}))),marginInline:dt(((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e}))),maxSize:dt(((e,t)=>({maxBlockSize:e,maxInlineSize:t||e}))),minSize:dt(((e,t)=>({minBlockSize:e,minInlineSize:t||e}))),paddingBlock:dt(((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e}))),paddingInline:dt(((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e})))},ir=/([\d.]+)([^]*)/,mf=(e,t)=>e.length?e.reduce(((n,r)=>(n.push(...t.map((i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i))),n)),[]):t,vf=(e,t)=>e in bf&&typeof t=="string"?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((n,r,i,o)=>r+(i==="stretch"?`-moz-available${o};${kr(e)}:${r}-webkit-fill-available`:`-moz-fit-content${o};${kr(e)}:${r}fit-content`)+o)):String(t),bf={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},je=e=>e?e+"-":"",Ns=(e,t,n)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((r,i,o,s,a)=>s=="$"==!!o?r:(i||s=="--"?"calc(":"")+"var(--"+(s==="$"?je(t)+(a.includes("$")?"":je(n))+a.replace(/\$/g,"-"):a)+")"+(i||s=="--"?"*"+(i||"")+(o||"1")+")":""))),yf=/\s*,\s*(?![^()]*\))/,xf=Object.prototype.toString,pt=(e,t,n,r,i)=>{let o,s,a;const l=(c,f,d)=>{let h,p;const g=m=>{for(h in m){const y=h.charCodeAt(0)===64,w=y&&Array.isArray(m[h])?m[h]:[m[h]];for(p of w){const E=/[A-Z]/.test(x=h)?x:x.replace(/-[^]/g,(C=>C[1].toUpperCase())),T=typeof p=="object"&&p&&p.toString===xf&&(!r.utils[E]||!f.length);if(E in r.utils&&!T){const C=r.utils[E];if(C!==s){s=C,g(C(p)),s=null;continue}}else if(E in Zi){const C=Zi[E];if(C!==a){a=C,g(C(p)),a=null;continue}}if(y&&(v=h.slice(1)in r.media?"@media "+r.media[h.slice(1)]:h,h=v.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((C,R,O,k,M,P)=>{const _=ir.test(R),I=.0625*(_?-1:1),[N,U]=_?[k,R]:[R,k];return"("+(O[0]==="="?"":O[0]===">"===_?"max-":"min-")+N+":"+(O[0]!=="="&&O.length===1?U.replace(ir,((j,W,z)=>Number(W)+I*(O===">"?1:-1)+z)):U)+(M?") and ("+(M[0]===">"?"min-":"max-")+N+":"+(M.length===1?P.replace(ir,((j,W,z)=>Number(W)+I*(M===">"?-1:1)+z)):P):"")+")"}))),T){const C=y?d.concat(h):[...d],R=y?[...f]:mf(f,h.split(yf));o!==void 0&&i(Qi(...o)),o=void 0,l(p,R,C)}else o===void 0&&(o=[[],f,d]),h=y||h.charCodeAt(0)!==36?h:`--${je(r.prefix)}${h.slice(1).replace(/\$/g,"-")}`,p=T?p:typeof p=="number"?p&&E in Sf?String(p)+"px":String(p):Ns(vf(E,p??""),r.prefix,r.themeMap[E]),o[0].push(`${y?`${h} `:`${kr(h)}:`}${p}`)}}var v,x};g(c),o!==void 0&&i(Qi(...o)),o=void 0};l(e,t,n)},Qi=(e,t,n)=>`${n.map((r=>`${r}{`)).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,Sf={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Ji=e=>String.fromCharCode(e+(e>25?39:97)),rt=e=>(t=>{let n,r="";for(n=Math.abs(t);n>52;n=n/52|0)r=Ji(n%52)+r;return Ji(n%52)+r})(((t,n)=>{let r=n.length;for(;r;)t=33*t^n.charCodeAt(--r);return t})(5381,JSON.stringify(e))>>>0),$t=["themed","global","styled","onevar","resonevar","allvar","inline"],wf=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch{return!1}},Ef=e=>{let t;const n=()=>{const{cssRules:i}=t.sheet;return[].map.call(i,((o,s)=>{const{cssText:a}=o;let l="";if(a.startsWith("--sxs"))return"";if(i[s-1]&&(l=i[s-1].cssText).startsWith("--sxs")){if(!o.cssRules.length)return"";for(const c in t.rules)if(t.rules[c].group===o)return`--sxs{--sxs:${[...t.rules[c].cache].join(" ")}}${a}`;return o.cssRules.length?`${l}${a}`:""}return a})).join("")},r=()=>{if(t){const{rules:a,sheet:l}=t;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const i=Object(e).styleSheets||[];for(const a of i)if(wf(a)){for(let l=0,c=a.cssRules;c[l];++l){const f=Object(c[l]);if(f.type!==1)continue;const d=Object(c[l+1]);if(d.type!==4)continue;++l;const{cssText:h}=f;if(!h.startsWith("--sxs"))continue;const p=h.slice(14,-3).trim().split(/\s+/),g=$t[p[0]];g&&(t||(t={sheet:a,reset:r,rules:{},toString:n}),t.rules[g]={group:d,index:l,cache:new Set(p)})}if(t)break}if(!t){const a=(l,c)=>({type:c,cssRules:[],insertRule(f,d){this.cssRules.splice(d,0,a(f,{import:3,undefined:1}[(f.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,(f=>f.cssText)).join("")}}`:l}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:n}}const{sheet:o,rules:s}=t;for(let a=$t.length-1;a>=0;--a){const l=$t[a];if(!s[l]){const c=$t[a+1],f=s[c]?s[c].index:o.cssRules.length;o.insertRule("@media{}",f),o.insertRule(`--sxs{--sxs:${a}}`,f),s[l]={group:o.cssRules[f+1],index:f,cache:new Set([a])}}Rf(s[l])}};return r(),t},Rf=e=>{const t=e.group;let n=t.cssRules.length;e.apply=r=>{try{t.insertRule(r,n),++n}catch{}}},Ot=Symbol(),Cf=St(),eo=(e,t)=>Cf(e,(()=>(...n)=>{let r={type:null,composers:new Set};for(const i of n)if(i!=null)if(i[nt]){r.type==null&&(r.type=i[nt].type);for(const o of i[nt].composers)r.composers.add(o)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(Tf(i,e));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),Mf(e,r,t)})),Tf=({variants:e,compoundVariants:t,defaultVariants:n,...r},i)=>{const o=`${je(i.prefix)}c-${rt(r)}`,s=[],a=[],l=Object.create(null),c=[];for(const h in n)l[h]=String(n[h]);if(typeof e=="object"&&e)for(const h in e){f=l,d=h,pf.call(f,d)||(l[h]="undefined");const p=e[h];for(const g in p){const m={[h]:String(g)};String(g)==="undefined"&&c.push(h);const v=p[g],x=[m,v,!Xi(v)];s.push(x)}}var f,d;if(typeof t=="object"&&t)for(const h of t){let{css:p,...g}=h;p=typeof p=="object"&&p||{};for(const v in g)g[v]=String(g[v]);const m=[g,p,!Xi(p)];a.push(m)}return[o,r,s,a,l,c]},Mf=(e,t,n)=>{const[r,i,o,s]=Pf(t.composers),a=typeof t.type=="function"||t.type.$$typeof?(d=>{function h(){for(let p=0;p<h[Ot].length;p++){const[g,m]=h[Ot][p];d.rules[g].apply(m)}return h[Ot]=[],null}return h[Ot]=[],h.rules={},$t.forEach((p=>h.rules[p]={apply:g=>h[Ot].push([p,g])})),h})(n):null,l=(a||n).rules,c=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,f=d=>{d=typeof d=="object"&&d||Of;const{css:h,...p}=d,g={};for(const x in o)if(delete p[x],x in d){let y=d[x];typeof y=="object"&&y?g[x]={"@initial":o[x],...y}:(y=String(y),g[x]=y!=="undefined"||s.has(x)?y:o[x])}else g[x]=o[x];const m=new Set([...i]);for(const[x,y,w,E]of t.composers){n.rules.styled.cache.has(x)||(n.rules.styled.cache.add(x),pt(y,[`.${x}`],[],e,(R=>{l.styled.apply(R)})));const T=to(w,g,e.media),C=to(E,g,e.media,!0);for(const R of T)if(R!==void 0)for(const[O,k,M]of R){const P=`${x}-${rt(k)}-${O}`;m.add(P);const _=(M?n.rules.resonevar:n.rules.onevar).cache,I=M?l.resonevar:l.onevar;_.has(P)||(_.add(P),pt(k,[`.${P}`],[],e,(N=>{I.apply(N)})))}for(const R of C)if(R!==void 0)for(const[O,k]of R){const M=`${x}-${rt(k)}-${O}`;m.add(M),n.rules.allvar.cache.has(M)||(n.rules.allvar.cache.add(M),pt(k,[`.${M}`],[],e,(P=>{l.allvar.apply(P)})))}}if(typeof h=="object"&&h){const x=`${r}-i${rt(h)}-css`;m.add(x),n.rules.inline.cache.has(x)||(n.rules.inline.cache.add(x),pt(h,[`.${x}`],[],e,(y=>{l.inline.apply(y)})))}for(const x of String(d.className||"").trim().split(/\s+/))x&&m.add(x);const v=p.className=[...m].join(" ");return{type:t.type,className:v,selector:c,props:p,toString:()=>v,deferredInjector:a}};return li(f,{className:r,selector:c,[nt]:t,toString:()=>(n.rules.styled.cache.has(r)||f(),r)})},Pf=e=>{let t="";const n=[],r={},i=[];for(const[o,,,,s,a]of e){t===""&&(t=o),n.push(o),i.push(...a);for(const l in s){const c=s[l];(r[l]===void 0||c!=="undefined"||a.includes(c))&&(r[l]=c)}}return[t,n,r,new Set(i)]},to=(e,t,n,r)=>{const i=[];e:for(let[o,s,a]of e){if(a)continue;let l,c=0,f=!1;for(l in o){const d=o[l];let h=t[l];if(h!==d){if(typeof h!="object"||!h)continue e;{let p,g,m=0;for(const v in h){if(d===String(h[v])){if(v!=="@initial"){const x=v.slice(1);(g=g||[]).push(x in n?n[x]:v.replace(/^@media ?/,"")),f=!0}c+=m,p=!0}++m}if(g&&g.length&&(s={["@media "+g.join(", ")]:s}),!p)continue e}}}(i[c]=i[c]||[]).push([r?"cv":`${l}-${o[l]}`,s,f])}return i},Of={},_f=St(),Df=(e,t)=>_f(e,(()=>(...n)=>{const r=()=>{for(let i of n){i=typeof i=="object"&&i||{};let o=rt(i);if(!t.rules.global.cache.has(o)){if(t.rules.global.cache.add(o),"@import"in i){let s=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,t.sheet.insertRule(`@import ${a};`,s++);delete i["@import"]}pt(i,[],[],e,(s=>{t.rules.global.apply(s)}))}}return""};return li(r,{toString:r})})),Af=St(),$f=(e,t)=>Af(e,(()=>n=>{const r=`${je(e.prefix)}k-${rt(n)}`,i=()=>{if(!t.rules.global.cache.has(r)){t.rules.global.cache.add(r);const o=[];pt(n,[],[],e,(a=>o.push(a)));const s=`@keyframes ${r}{${o.join("")}}`;t.rules.global.apply(s)}return r};return li(i,{get name(){return i()},toString:i})})),kf=class{constructor(e,t,n,r){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=n==null?"":String(n),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+je(this.prefix)+je(this.scale)+this.token}toString(){return this.computedValue}},If=St(),Nf=(e,t)=>If(e,(()=>(n,r)=>{r=typeof n=="object"&&n||Object(r);const i=`.${n=(n=typeof n=="string"?n:"")||`${je(e.prefix)}t-${rt(r)}`}`,o={},s=[];for(const l in r){o[l]={};for(const c in r[l]){const f=`--${je(e.prefix)}${l}-${c}`,d=Ns(String(r[l][c]),e.prefix,l);o[l][c]=new kf(c,d,l,e.prefix),s.push(`${f}:${d}`)}}const a=()=>{if(s.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);const l=`${r===e.theme?":root,":""}.${n}{${s.join(";")}}`;t.rules.themed.apply(l)}return n};return{...o,get className(){return a()},selector:i,toString:a}})),Bf=St(),Ff=St(),zf=e=>{const t=(n=>{let r=!1;const i=Bf(n,(o=>{r=!0;const s="prefix"in(o=typeof o=="object"&&o||{})?String(o.prefix):"",a=typeof o.media=="object"&&o.media||{},l=typeof o.root=="object"?o.root||null:globalThis.document||null,c=typeof o.theme=="object"&&o.theme||{},f={prefix:s,media:a,theme:c,themeMap:typeof o.themeMap=="object"&&o.themeMap||{...df},utils:typeof o.utils=="object"&&o.utils||{}},d=Ef(l),h={css:eo(f,d),globalCss:Df(f,d),keyframes:$f(f,d),createTheme:Nf(f,d),reset(){d.reset(),h.theme.toString()},theme:{},sheet:d,config:f,prefix:s,getCssText:d.toString,toString:d.toString};return String(h.theme=h.createTheme(c)),h}));return r||i.reset(),i})(e);return t.styled=(({config:n,sheet:r})=>Ff(n,(()=>{const i=eo(n,r);return(...o)=>{const s=i(...o),a=s[nt].type,l=b.forwardRef(((c,f)=>{const d=c&&c.as||a,{props:h,deferredInjector:p}=s(c);return delete h.as,h.ref=f,p?b.createElement(b.Fragment,null,b.createElement(d,h),b.createElement(p,null)):b.createElement(d,h)}));return l.className=s.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=s.selector,l.toString=()=>s.selector,l[nt]=s[nt],l}})))(t),t};function Be(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e?.(i),n===!1||!i.defaultPrevented)return t?.(i)}}function Bs(e,t=[]){let n=[];function r(o,s){const a=u.createContext(s),l=n.length;n=[...n,s];const c=d=>{const{scope:h,children:p,...g}=d,m=h?.[e]?.[l]||a,v=u.useMemo(()=>g,Object.values(g));return S.jsx(m.Provider,{value:v,children:p})};c.displayName=o+"Provider";function f(d,h){const p=h?.[e]?.[l]||a,g=u.useContext(p);if(g)return g;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[c,f]}const i=()=>{const o=n.map(s=>u.createContext(s));return function(a){const l=a?.[e]||o;return u.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,Uf(i,...t)]}function Uf(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function Lf(e){const t=jf(e),n=u.forwardRef((r,i)=>{const{children:o,...s}=r,a=u.Children.toArray(o),l=a.find(Wf);if(l){const c=l.props.children,f=a.map(d=>d===l?u.Children.count(c)>1?u.Children.only(null):u.isValidElement(c)?c.props.children:null:d);return S.jsx(t,{...s,ref:i,children:u.isValidElement(c)?u.cloneElement(c,void 0,f):null})}return S.jsx(t,{...s,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function jf(e){const t=u.forwardRef((n,r)=>{const{children:i,...o}=n;if(u.isValidElement(i)){const s=Gf(i),a=Vf(o,i.props);return i.type!==u.Fragment&&(a.ref=r?st(r,s):s),u.cloneElement(i,a)}return u.Children.count(i)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Hf=Symbol("radix.slottable");function Wf(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Hf}function Vf(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{const l=o(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function Gf(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Kf=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Fs=Kf.reduce((e,t)=>{const n=Lf(`Primitive.${t}`),r=u.forwardRef((i,o)=>{const{asChild:s,...a}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function qf(e,t){e&&si.flushSync(()=>e.dispatchEvent(t))}function Un(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e}),u.useMemo(()=>(...n)=>t.current?.(...n),[])}function Yf(e,t=globalThis?.document){const n=Un(e);u.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Xf="DismissableLayer",Ir="dismissableLayer.update",Zf="dismissableLayer.pointerDownOutside",Qf="dismissableLayer.focusOutside",no,zs=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Us=u.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=e,c=u.useContext(zs),[f,d]=u.useState(null),h=f?.ownerDocument??globalThis?.document,[,p]=u.useState({}),g=at(t,R=>d(R)),m=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=m.indexOf(v),y=f?m.indexOf(f):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,E=y>=x,T=td(R=>{const O=R.target,k=[...c.branches].some(M=>M.contains(O));!E||k||(i?.(R),s?.(R),R.defaultPrevented||a?.())},h),C=nd(R=>{const O=R.target;[...c.branches].some(M=>M.contains(O))||(o?.(R),s?.(R),R.defaultPrevented||a?.())},h);return Yf(R=>{y===c.layers.size-1&&(r?.(R),!R.defaultPrevented&&a&&(R.preventDefault(),a()))},h),u.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(no=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),ro(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=no)}},[f,h,n,c]),u.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),ro())},[f,c]),u.useEffect(()=>{const R=()=>p({});return document.addEventListener(Ir,R),()=>document.removeEventListener(Ir,R)},[]),S.jsx(Fs.div,{...l,ref:g,style:{pointerEvents:w?E?"auto":"none":void 0,...e.style},onFocusCapture:Be(e.onFocusCapture,C.onFocusCapture),onBlurCapture:Be(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Be(e.onPointerDownCapture,T.onPointerDownCapture)})});Us.displayName=Xf;var Jf="DismissableLayerBranch",ed=u.forwardRef((e,t)=>{const n=u.useContext(zs),r=u.useRef(null),i=at(t,r);return u.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),S.jsx(Fs.div,{...e,ref:i})});ed.displayName=Jf;function td(e,t=globalThis?.document){const n=Un(e),r=u.useRef(!1),i=u.useRef(()=>{});return u.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){Ls(Zf,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function nd(e,t=globalThis?.document){const n=Un(e),r=u.useRef(!1);return u.useEffect(()=>{const i=o=>{o.target&&!r.current&&Ls(Qf,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ro(){const e=new CustomEvent(Ir);document.dispatchEvent(e)}function Ls(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?qf(i,o):i.dispatchEvent(o)}var rd=ti[" useId ".trim().toString()]||(()=>{}),id=0;function od(e){const[t,n]=u.useState(rd());return Xe(()=>{n(r=>r??String(id++))},[e]),t?`radix-${t}`:""}const sd=["top","right","bottom","left"],Ze=Math.min,de=Math.max,En=Math.round,fn=Math.floor,Pe=e=>({x:e,y:e}),ad={left:"right",right:"left",bottom:"top",top:"bottom"},ld={start:"end",end:"start"};function Nr(e,t,n){return de(e,Ze(t,n))}function He(e,t){return typeof e=="function"?e(t):e}function We(e){return e.split("-")[0]}function wt(e){return e.split("-")[1]}function ci(e){return e==="x"?"y":"x"}function ui(e){return e==="y"?"height":"width"}const cd=new Set(["top","bottom"]);function Me(e){return cd.has(We(e))?"y":"x"}function fi(e){return ci(Me(e))}function ud(e,t,n){n===void 0&&(n=!1);const r=wt(e),i=fi(e),o=ui(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Rn(s)),[s,Rn(s)]}function fd(e){const t=Rn(e);return[Br(e),t,Br(t)]}function Br(e){return e.replace(/start|end/g,t=>ld[t])}const io=["left","right"],oo=["right","left"],dd=["top","bottom"],hd=["bottom","top"];function pd(e,t,n){switch(e){case"top":case"bottom":return n?t?oo:io:t?io:oo;case"left":case"right":return t?dd:hd;default:return[]}}function gd(e,t,n,r){const i=wt(e);let o=pd(We(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(Br)))),o}function Rn(e){return e.replace(/left|right|bottom|top/g,t=>ad[t])}function md(e){return{top:0,right:0,bottom:0,left:0,...e}}function js(e){return typeof e!="number"?md(e):{top:e,right:e,bottom:e,left:e}}function Cn(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function so(e,t,n){let{reference:r,floating:i}=e;const o=Me(t),s=fi(t),a=ui(s),l=We(t),c=o==="y",f=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:f,y:r.y-i.height};break;case"bottom":p={x:f,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(wt(t)){case"start":p[s]-=h*(n&&c?-1:1);break;case"end":p[s]+=h*(n&&c?-1:1);break}return p}const vd=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:d}=so(c,r,l),h=r,p={},g=0;for(let m=0;m<a.length;m++){const{name:v,fn:x}=a[m],{x:y,y:w,data:E,reset:T}=await x({x:f,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});f=y??f,d=w??d,p={...p,[v]:{...p[v],...E}},T&&g<=50&&(g++,typeof T=="object"&&(T.placement&&(h=T.placement),T.rects&&(c=T.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):T.rects),{x:f,y:d}=so(c,h,l)),m=-1)}return{x:f,y:d,placement:h,strategy:i,middlewareData:p}};async function Ut(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=He(t,e),g=js(p),v=a[h?d==="floating"?"reference":"floating":d],x=Cn(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:f,strategy:l})),y=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),E=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},T=Cn(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:l}):y);return{top:(x.top-T.top+g.top)/E.y,bottom:(T.bottom-x.bottom+g.bottom)/E.y,left:(x.left-T.left+g.left)/E.x,right:(T.right-x.right+g.right)/E.x}}const bd=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=t,{element:c,padding:f=0}=He(e,t)||{};if(c==null)return{};const d=js(f),h={x:n,y:r},p=fi(i),g=ui(p),m=await s.getDimensions(c),v=p==="y",x=v?"top":"left",y=v?"bottom":"right",w=v?"clientHeight":"clientWidth",E=o.reference[g]+o.reference[p]-h[p]-o.floating[g],T=h[p]-o.reference[p],C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let R=C?C[w]:0;(!R||!await(s.isElement==null?void 0:s.isElement(C)))&&(R=a.floating[w]||o.floating[g]);const O=E/2-T/2,k=R/2-m[g]/2-1,M=Ze(d[x],k),P=Ze(d[y],k),_=M,I=R-m[g]-P,N=R/2-m[g]/2+O,U=Nr(_,N,I),j=!l.arrow&&wt(i)!=null&&N!==U&&o.reference[g]/2-(N<_?M:P)-m[g]/2<0,W=j?N<_?N-_:N-I:0;return{[p]:h[p]+W,data:{[p]:U,centerOffset:N-U-W,...j&&{alignmentOffset:W}},reset:j}}}),yd=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=He(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=We(i),y=Me(a),w=We(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),T=h||(w||!m?[Rn(a)]:fd(a)),C=g!=="none";!h&&C&&T.push(...gd(a,m,g,E));const R=[a,...T],O=await Ut(t,v),k=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&k.push(O[x]),d){const N=ud(i,s,E);k.push(O[N[0]],O[N[1]])}if(M=[...M,{placement:i,overflows:k}],!k.every(N=>N<=0)){var P,_;const N=(((P=o.flip)==null?void 0:P.index)||0)+1,U=R[N];if(U&&(!(d==="alignment"?y!==Me(U):!1)||M.every(z=>Me(z.placement)===y?z.overflows[0]>0:!0)))return{data:{index:N,overflows:M},reset:{placement:U}};let j=(_=M.filter(W=>W.overflows[0]<=0).sort((W,z)=>W.overflows[1]-z.overflows[1])[0])==null?void 0:_.placement;if(!j)switch(p){case"bestFit":{var I;const W=(I=M.filter(z=>{if(C){const G=Me(z.placement);return G===y||G==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(G=>G>0).reduce((G,ne)=>G+ne,0)]).sort((z,G)=>z[1]-G[1])[0])==null?void 0:I[0];W&&(j=W);break}case"initialPlacement":j=a;break}if(i!==j)return{reset:{placement:j}}}return{}}}};function ao(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function lo(e){return sd.some(t=>e[t]>=0)}const xd=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=He(e,t);switch(r){case"referenceHidden":{const o=await Ut(t,{...i,elementContext:"reference"}),s=ao(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:lo(s)}}}case"escaped":{const o=await Ut(t,{...i,altBoundary:!0}),s=ao(o,n.floating);return{data:{escapedOffsets:s,escaped:lo(s)}}}default:return{}}}}},Hs=new Set(["left","top"]);async function Sd(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=We(n),a=wt(n),l=Me(n)==="y",c=Hs.has(s)?-1:1,f=o&&l?-1:1,d=He(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*f,y:h*c}:{x:h*c,y:p*f}}const wd=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,l=await Sd(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},Ed=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:v=>{let{x,y}=v;return{x,y}}},...l}=He(e,t),c={x:n,y:r},f=await Ut(t,l),d=Me(We(i)),h=ci(d);let p=c[h],g=c[d];if(o){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=p+f[v],w=p-f[x];p=Nr(y,p,w)}if(s){const v=d==="y"?"top":"left",x=d==="y"?"bottom":"right",y=g+f[v],w=g-f[x];g=Nr(y,g,w)}const m=a.fn({...t,[h]:p,[d]:g});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:o,[d]:s}}}}}},Rd=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=He(e,t),f={x:n,y:r},d=Me(i),h=ci(d);let p=f[h],g=f[d];const m=He(a,t),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=h==="y"?"height":"width",E=o.reference[h]-o.floating[w]+v.mainAxis,T=o.reference[h]+o.reference[w]-v.mainAxis;p<E?p=E:p>T&&(p=T)}if(c){var x,y;const w=h==="y"?"width":"height",E=Hs.has(We(i)),T=o.reference[d]-o.floating[w]+(E&&((x=s.offset)==null?void 0:x[d])||0)+(E?0:v.crossAxis),C=o.reference[d]+o.reference[w]+(E?0:((y=s.offset)==null?void 0:y[d])||0)-(E?v.crossAxis:0);g<T?g=T:g>C&&(g=C)}return{[h]:p,[d]:g}}}},Cd=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:s,elements:a}=t,{apply:l=()=>{},...c}=He(e,t),f=await Ut(t,c),d=We(i),h=wt(i),p=Me(i)==="y",{width:g,height:m}=o.floating;let v,x;d==="top"||d==="bottom"?(v=d,x=h===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(x=d,v=h==="end"?"top":"bottom");const y=m-f.top-f.bottom,w=g-f.left-f.right,E=Ze(m-f[v],y),T=Ze(g-f[x],w),C=!t.middlewareData.shift;let R=E,O=T;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(O=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=y),C&&!h){const M=de(f.left,0),P=de(f.right,0),_=de(f.top,0),I=de(f.bottom,0);p?O=g-2*(M!==0||P!==0?M+P:de(f.left,f.right)):R=m-2*(_!==0||I!==0?_+I:de(f.top,f.bottom))}await l({...t,availableWidth:O,availableHeight:R});const k=await s.getDimensions(a.floating);return g!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}};function Ln(){return typeof window<"u"}function Et(e){return Ws(e)?(e.nodeName||"").toLowerCase():"#document"}function he(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ke(e){var t;return(t=(Ws(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ws(e){return Ln()?e instanceof Node||e instanceof he(e).Node:!1}function xe(e){return Ln()?e instanceof Element||e instanceof he(e).Element:!1}function Ae(e){return Ln()?e instanceof HTMLElement||e instanceof he(e).HTMLElement:!1}function co(e){return!Ln()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof he(e).ShadowRoot}const Td=new Set(["inline","contents"]);function Wt(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Se(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Td.has(i)}const Md=new Set(["table","td","th"]);function Pd(e){return Md.has(Et(e))}const Od=[":popover-open",":modal"];function jn(e){return Od.some(t=>{try{return e.matches(t)}catch{return!1}})}const _d=["transform","translate","scale","rotate","perspective"],Dd=["transform","translate","scale","rotate","perspective","filter"],Ad=["paint","layout","strict","content"];function di(e){const t=hi(),n=xe(e)?Se(e):e;return _d.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Dd.some(r=>(n.willChange||"").includes(r))||Ad.some(r=>(n.contain||"").includes(r))}function $d(e){let t=Qe(e);for(;Ae(t)&&!bt(t);){if(di(t))return t;if(jn(t))return null;t=Qe(t)}return null}function hi(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const kd=new Set(["html","body","#document"]);function bt(e){return kd.has(Et(e))}function Se(e){return he(e).getComputedStyle(e)}function Hn(e){return xe(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qe(e){if(Et(e)==="html")return e;const t=e.assignedSlot||e.parentNode||co(e)&&e.host||ke(e);return co(t)?t.host:t}function Vs(e){const t=Qe(e);return bt(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ae(t)&&Wt(t)?t:Vs(t)}function Lt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Vs(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=he(i);if(o){const a=Fr(s);return t.concat(s,s.visualViewport||[],Wt(i)?i:[],a&&n?Lt(a):[])}return t.concat(i,Lt(i,[],n))}function Fr(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Gs(e){const t=Se(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ae(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=En(n)!==o||En(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function pi(e){return xe(e)?e:e.contextElement}function mt(e){const t=pi(e);if(!Ae(t))return Pe(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=Gs(t);let s=(o?En(n.width):n.width)/r,a=(o?En(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Id=Pe(0);function Ks(e){const t=he(e);return!hi()||!t.visualViewport?Id:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Nd(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==he(e)?!1:t}function it(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=pi(e);let s=Pe(1);t&&(r?xe(r)&&(s=mt(r)):s=mt(e));const a=Nd(o,n,r)?Ks(o):Pe(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,f=i.width/s.x,d=i.height/s.y;if(o){const h=he(o),p=r&&xe(r)?he(r):r;let g=h,m=Fr(g);for(;m&&r&&p!==g;){const v=mt(m),x=m.getBoundingClientRect(),y=Se(m),w=x.left+(m.clientLeft+parseFloat(y.paddingLeft))*v.x,E=x.top+(m.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,f*=v.x,d*=v.y,l+=w,c+=E,g=he(m),m=Fr(g)}}return Cn({width:f,height:d,x:l,y:c})}function Wn(e,t){const n=Hn(e).scrollLeft;return t?t.left+n:it(ke(e)).left+n}function qs(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Wn(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function Bd(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=ke(r),a=t?jn(t.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=Pe(1);const f=Pe(0),d=Ae(r);if((d||!d&&!o)&&((Et(r)!=="body"||Wt(s))&&(l=Hn(r)),Ae(r))){const p=it(r);c=mt(r),f.x=p.x+r.clientLeft,f.y=p.y+r.clientTop}const h=s&&!d&&!o?qs(s,l):Pe(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+f.x+h.x,y:n.y*c.y-l.scrollTop*c.y+f.y+h.y}}function Fd(e){return Array.from(e.getClientRects())}function zd(e){const t=ke(e),n=Hn(e),r=e.ownerDocument.body,i=de(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=de(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Wn(e);const a=-n.scrollTop;return Se(r).direction==="rtl"&&(s+=de(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}const uo=25;function Ud(e,t){const n=he(e),r=ke(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const f=hi();(!f||f&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=Wn(r);if(c<=0){const f=r.ownerDocument,d=f.body,h=getComputedStyle(d),p=f.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,g=Math.abs(r.clientWidth-d.clientWidth-p);g<=uo&&(o-=g)}else c<=uo&&(o+=c);return{width:o,height:s,x:a,y:l}}const Ld=new Set(["absolute","fixed"]);function jd(e,t){const n=it(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Ae(e)?mt(e):Pe(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,l=i*o.x,c=r*o.y;return{width:s,height:a,x:l,y:c}}function fo(e,t,n){let r;if(t==="viewport")r=Ud(e,n);else if(t==="document")r=zd(ke(e));else if(xe(t))r=jd(t,n);else{const i=Ks(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Cn(r)}function Ys(e,t){const n=Qe(e);return n===t||!xe(n)||bt(n)?!1:Se(n).position==="fixed"||Ys(n,t)}function Hd(e,t){const n=t.get(e);if(n)return n;let r=Lt(e,[],!1).filter(a=>xe(a)&&Et(a)!=="body"),i=null;const o=Se(e).position==="fixed";let s=o?Qe(e):e;for(;xe(s)&&!bt(s);){const a=Se(s),l=di(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&Ld.has(i.position)||Wt(s)&&!l&&Ys(e,s))?r=r.filter(f=>f!==s):i=a,s=Qe(s)}return t.set(e,r),r}function Wd(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?jn(t)?[]:Hd(t,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,f)=>{const d=fo(t,f,i);return c.top=de(d.top,c.top),c.right=Ze(d.right,c.right),c.bottom=Ze(d.bottom,c.bottom),c.left=de(d.left,c.left),c},fo(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Vd(e){const{width:t,height:n}=Gs(e);return{width:t,height:n}}function Gd(e,t,n){const r=Ae(t),i=ke(t),o=n==="fixed",s=it(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Pe(0);function c(){l.x=Wn(i)}if(r||!r&&!o)if((Et(t)!=="body"||Wt(i))&&(a=Hn(t)),r){const p=it(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else i&&c();o&&!r&&i&&c();const f=i&&!r&&!o?qs(i,a):Pe(0),d=s.left+a.scrollLeft-l.x-f.x,h=s.top+a.scrollTop-l.y-f.y;return{x:d,y:h,width:s.width,height:s.height}}function or(e){return Se(e).position==="static"}function ho(e,t){if(!Ae(e)||Se(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ke(e)===n&&(n=n.ownerDocument.body),n}function Xs(e,t){const n=he(e);if(jn(e))return n;if(!Ae(e)){let i=Qe(e);for(;i&&!bt(i);){if(xe(i)&&!or(i))return i;i=Qe(i)}return n}let r=ho(e,t);for(;r&&Pd(r)&&or(r);)r=ho(r,t);return r&&bt(r)&&or(r)&&!di(r)?n:r||$d(e)||n}const Kd=async function(e){const t=this.getOffsetParent||Xs,n=this.getDimensions,r=await n(e.floating);return{reference:Gd(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qd(e){return Se(e).direction==="rtl"}const Yd={convertOffsetParentRelativeRectToViewportRelativeRect:Bd,getDocumentElement:ke,getClippingRect:Wd,getOffsetParent:Xs,getElementRects:Kd,getClientRects:Fd,getDimensions:Vd,getScale:mt,isElement:xe,isRTL:qd};function Zs(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Xd(e,t){let n=null,r;const i=ke(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const c=e.getBoundingClientRect(),{left:f,top:d,width:h,height:p}=c;if(a||t(),!h||!p)return;const g=fn(d),m=fn(i.clientWidth-(f+h)),v=fn(i.clientHeight-(d+p)),x=fn(f),w={rootMargin:-g+"px "+-m+"px "+-v+"px "+-x+"px",threshold:de(0,Ze(1,l))||1};let E=!0;function T(C){const R=C[0].intersectionRatio;if(R!==l){if(!E)return s();R?s(!1,R):r=setTimeout(()=>{s(!1,1e-7)},1e3)}R===1&&!Zs(c,e.getBoundingClientRect())&&s(),E=!1}try{n=new IntersectionObserver(T,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(T,w)}n.observe(e)}return s(!0),o}function Zd(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=pi(e),f=i||o?[...c?Lt(c):[],...Lt(t)]:[];f.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const d=c&&a?Xd(c,n):null;let h=-1,p=null;s&&(p=new ResizeObserver(x=>{let[y]=x;y&&y.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),n()}),c&&!l&&p.observe(c),p.observe(t));let g,m=l?it(e):null;l&&v();function v(){const x=it(e);m&&!Zs(m,x)&&n(),m=x,g=requestAnimationFrame(v)}return n(),()=>{var x;f.forEach(y=>{i&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),d?.(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const Qd=wd,Jd=Ed,eh=yd,th=Cd,nh=xd,po=bd,rh=Rd,ih=(e,t,n)=>{const r=new Map,i={platform:Yd,...n},o={...i.platform,_c:r};return vd(e,t,{...i,platform:o})};var oh=typeof document<"u",sh=function(){},vn=oh?u.useLayoutEffect:sh;function Tn(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Tn(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!Tn(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Qs(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function go(e,t){const n=Qs(e);return Math.round(t*n)/n}function sr(e){const t=u.useRef(e);return vn(()=>{t.current=e}),t}function ah(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[f,d]=u.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=u.useState(r);Tn(h,r)||p(r);const[g,m]=u.useState(null),[v,x]=u.useState(null),y=u.useCallback(z=>{z!==C.current&&(C.current=z,m(z))},[]),w=u.useCallback(z=>{z!==R.current&&(R.current=z,x(z))},[]),E=o||g,T=s||v,C=u.useRef(null),R=u.useRef(null),O=u.useRef(f),k=l!=null,M=sr(l),P=sr(i),_=sr(c),I=u.useCallback(()=>{if(!C.current||!R.current)return;const z={placement:t,strategy:n,middleware:h};P.current&&(z.platform=P.current),ih(C.current,R.current,z).then(G=>{const ne={...G,isPositioned:_.current!==!1};N.current&&!Tn(O.current,ne)&&(O.current=ne,si.flushSync(()=>{d(ne)}))})},[h,t,n,P,_]);vn(()=>{c===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[c]);const N=u.useRef(!1);vn(()=>(N.current=!0,()=>{N.current=!1}),[]),vn(()=>{if(E&&(C.current=E),T&&(R.current=T),E&&T){if(M.current)return M.current(E,T,I);I()}},[E,T,I,M,k]);const U=u.useMemo(()=>({reference:C,floating:R,setReference:y,setFloating:w}),[y,w]),j=u.useMemo(()=>({reference:E,floating:T}),[E,T]),W=u.useMemo(()=>{const z={position:n,left:0,top:0};if(!j.floating)return z;const G=go(j.floating,f.x),ne=go(j.floating,f.y);return a?{...z,transform:"translate("+G+"px, "+ne+"px)",...Qs(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:ne}},[n,a,j.floating,f.x,f.y]);return u.useMemo(()=>({...f,update:I,refs:U,elements:j,floatingStyles:W}),[f,I,U,j,W])}const lh=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?po({element:r.current,padding:i}).fn(n):{}:r?po({element:r,padding:i}).fn(n):{}}}},ch=(e,t)=>({...Qd(e),options:[e,t]}),uh=(e,t)=>({...Jd(e),options:[e,t]}),fh=(e,t)=>({...rh(e),options:[e,t]}),dh=(e,t)=>({...eh(e),options:[e,t]}),hh=(e,t)=>({...th(e),options:[e,t]}),ph=(e,t)=>({...nh(e),options:[e,t]}),gh=(e,t)=>({...lh(e),options:[e,t]});function mh(e){const t=vh(e),n=u.forwardRef((r,i)=>{const{children:o,...s}=r,a=u.Children.toArray(o),l=a.find(yh);if(l){const c=l.props.children,f=a.map(d=>d===l?u.Children.count(c)>1?u.Children.only(null):u.isValidElement(c)?c.props.children:null:d);return S.jsx(t,{...s,ref:i,children:u.isValidElement(c)?u.cloneElement(c,void 0,f):null})}return S.jsx(t,{...s,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function vh(e){const t=u.forwardRef((n,r)=>{const{children:i,...o}=n;if(u.isValidElement(i)){const s=Sh(i),a=xh(o,i.props);return i.type!==u.Fragment&&(a.ref=r?st(r,s):s),u.cloneElement(i,a)}return u.Children.count(i)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bh=Symbol("radix.slottable");function yh(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===bh}function xh(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{const l=o(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function Sh(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var wh=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Eh=wh.reduce((e,t)=>{const n=mh(`Primitive.${t}`),r=u.forwardRef((i,o)=>{const{asChild:s,...a}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Rh="Arrow",Js=u.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...o}=e;return S.jsx(Eh.svg,{...o,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:S.jsx("polygon",{points:"0,0 30,0 15,10"})})});Js.displayName=Rh;var Ch=Js;function Th(e){const t=Mh(e),n=u.forwardRef((r,i)=>{const{children:o,...s}=r,a=u.Children.toArray(o),l=a.find(Oh);if(l){const c=l.props.children,f=a.map(d=>d===l?u.Children.count(c)>1?u.Children.only(null):u.isValidElement(c)?c.props.children:null:d);return S.jsx(t,{...s,ref:i,children:u.isValidElement(c)?u.cloneElement(c,void 0,f):null})}return S.jsx(t,{...s,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function Mh(e){const t=u.forwardRef((n,r)=>{const{children:i,...o}=n;if(u.isValidElement(i)){const s=Dh(i),a=_h(o,i.props);return i.type!==u.Fragment&&(a.ref=r?st(r,s):s),u.cloneElement(i,a)}return u.Children.count(i)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ph=Symbol("radix.slottable");function Oh(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ph}function _h(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{const l=o(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function Dh(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Ah=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ea=Ah.reduce((e,t)=>{const n=Th(`Primitive.${t}`),r=u.forwardRef((i,o)=>{const{asChild:s,...a}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function $h(e){const[t,n]=u.useState(void 0);return Xe(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=e.offsetWidth,a=e.offsetHeight;n({width:s,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var gi="Popper",[ta,na]=Bs(gi),[kh,ra]=ta(gi),ia=e=>{const{__scopePopper:t,children:n}=e,[r,i]=u.useState(null);return S.jsx(kh,{scope:t,anchor:r,onAnchorChange:i,children:n})};ia.displayName=gi;var oa="PopperAnchor",sa=u.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,o=ra(oa,n),s=u.useRef(null),a=at(t,s),l=u.useRef(null);return u.useEffect(()=>{const c=l.current;l.current=r?.current||s.current,c!==l.current&&o.onAnchorChange(l.current)}),r?null:S.jsx(ea.div,{...i,ref:a})});sa.displayName=oa;var mi="PopperContent",[Ih,Nh]=ta(mi),aa=u.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=e,v=ra(mi,n),[x,y]=u.useState(null),w=at(t,Ce=>y(Ce)),[E,T]=u.useState(null),C=$h(E),R=C?.width??0,O=C?.height??0,k=r+(o!=="center"?"-"+o:""),M=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},P=Array.isArray(c)?c:[c],_=P.length>0,I={padding:M,boundary:P.filter(Fh),altBoundary:_},{refs:N,floatingStyles:U,placement:j,isPositioned:W,middlewareData:z}=ah({strategy:"fixed",placement:k,whileElementsMounted:(...Ce)=>Zd(...Ce,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[ch({mainAxis:i+O,alignmentAxis:s}),l&&uh({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?fh():void 0,...I}),l&&dh({...I}),hh({...I,apply:({elements:Ce,rects:Ie,availableWidth:en,availableHeight:tn})=>{const{width:nn,height:rn}=Ie.reference,be=Ce.floating.style;be.setProperty("--radix-popper-available-width",`${en}px`),be.setProperty("--radix-popper-available-height",`${tn}px`),be.setProperty("--radix-popper-anchor-width",`${nn}px`),be.setProperty("--radix-popper-anchor-height",`${rn}px`)}}),E&&gh({element:E,padding:a}),zh({arrowWidth:R,arrowHeight:O}),h&&ph({strategy:"referenceHidden",...I})]}),[G,ne]=ua(j),pe=Un(g);Xe(()=>{W&&pe?.()},[W,pe]);const Xt=z.arrow?.x,Zt=z.arrow?.y,Qt=z.arrow?.centerOffset!==0,[Jt,lt]=u.useState();return Xe(()=>{x&&lt(window.getComputedStyle(x).zIndex)},[x]),S.jsx("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:W?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Jt,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:S.jsx(Ih,{scope:n,placedSide:G,onArrowChange:T,arrowX:Xt,arrowY:Zt,shouldHideArrow:Qt,children:S.jsx(ea.div,{"data-side":G,"data-align":ne,...m,ref:w,style:{...m.style,animation:W?void 0:"none"}})})})});aa.displayName=mi;var la="PopperArrow",Bh={top:"bottom",right:"left",bottom:"top",left:"right"},ca=u.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,o=Nh(la,r),s=Bh[o.placedSide];return S.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:S.jsx(Ch,{...i,ref:n,style:{...i.style,display:"block"}})})});ca.displayName=la;function Fh(e){return e!==null}var zh=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:i}=t,s=i.arrow?.centerOffset!==0,a=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[c,f]=ua(n),d={start:"0%",center:"50%",end:"100%"}[f],h=(i.arrow?.x??0)+a/2,p=(i.arrow?.y??0)+l/2;let g="",m="";return c==="bottom"?(g=s?d:`${h}px`,m=`${-l}px`):c==="top"?(g=s?d:`${h}px`,m=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=s?d:`${p}px`):c==="left"&&(g=`${r.floating.width+l}px`,m=s?d:`${p}px`),{data:{x:g,y:m}}}});function ua(e){const[t,n="center"]=e.split("-");return[t,n]}var Uh=ia,Lh=sa,jh=aa,Hh=ca;function Wh(e){const t=Vh(e),n=u.forwardRef((r,i)=>{const{children:o,...s}=r,a=u.Children.toArray(o),l=a.find(Kh);if(l){const c=l.props.children,f=a.map(d=>d===l?u.Children.count(c)>1?u.Children.only(null):u.isValidElement(c)?c.props.children:null:d);return S.jsx(t,{...s,ref:i,children:u.isValidElement(c)?u.cloneElement(c,void 0,f):null})}return S.jsx(t,{...s,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function Vh(e){const t=u.forwardRef((n,r)=>{const{children:i,...o}=n;if(u.isValidElement(i)){const s=Yh(i),a=qh(o,i.props);return i.type!==u.Fragment&&(a.ref=r?st(r,s):s),u.cloneElement(i,a)}return u.Children.count(i)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var fa=Symbol("radix.slottable");function Gh(e){const t=({children:n})=>S.jsx(S.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=fa,t}function Kh(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===fa}function qh(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{const l=o(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function Yh(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Xh=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Zh=Xh.reduce((e,t)=>{const n=Wh(`Primitive.${t}`),r=u.forwardRef((i,o)=>{const{asChild:s,...a}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Qh(e,t){return u.useReducer((n,r)=>t[n][r]??n,e)}var da=e=>{const{present:t,children:n}=e,r=Jh(t),i=typeof n=="function"?n({present:r.isPresent}):u.Children.only(n),o=at(r.ref,ep(i));return typeof n=="function"||r.isPresent?u.cloneElement(i,{ref:o}):null};da.displayName="Presence";function Jh(e){const[t,n]=u.useState(),r=u.useRef(null),i=u.useRef(e),o=u.useRef("none"),s=e?"mounted":"unmounted",[a,l]=Qh(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const c=dn(r.current);o.current=a==="mounted"?c:"none"},[a]),Xe(()=>{const c=r.current,f=i.current;if(f!==e){const h=o.current,p=dn(c);e?l("MOUNT"):p==="none"||c?.display==="none"?l("UNMOUNT"):l(f&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),Xe(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,d=p=>{const m=dn(r.current).includes(CSS.escape(p.animationName));if(p.target===t&&m&&(l("ANIMATION_END"),!i.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=p=>{p.target===t&&(o.current=dn(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:u.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function dn(e){return e?.animationName||"none"}function ep(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var tp=ti[" useInsertionEffect ".trim().toString()]||Xe;function np({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,o,s]=rp({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:i;{const f=u.useRef(e!==void 0);u.useEffect(()=>{const d=f.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=a},[a,r])}const c=u.useCallback(f=>{if(a){const d=ip(f)?f(e):f;d!==e&&s.current?.(d)}else o(f)},[a,e,o,s]);return[l,c]}function rp({defaultProp:e,onChange:t}){const[n,r]=u.useState(e),i=u.useRef(n),o=u.useRef(t);return tp(()=>{o.current=t},[t]),u.useEffect(()=>{i.current!==n&&(o.current?.(n),i.current=n)},[n,i]),[n,r,o]}function ip(e){return typeof e=="function"}function op(e){const t=sp(e),n=u.forwardRef((r,i)=>{const{children:o,...s}=r,a=u.Children.toArray(o),l=a.find(lp);if(l){const c=l.props.children,f=a.map(d=>d===l?u.Children.count(c)>1?u.Children.only(null):u.isValidElement(c)?c.props.children:null:d);return S.jsx(t,{...s,ref:i,children:u.isValidElement(c)?u.cloneElement(c,void 0,f):null})}return S.jsx(t,{...s,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function sp(e){const t=u.forwardRef((n,r)=>{const{children:i,...o}=n;if(u.isValidElement(i)){const s=up(i),a=cp(o,i.props);return i.type!==u.Fragment&&(a.ref=r?st(r,s):s),u.cloneElement(i,a)}return u.Children.count(i)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ap=Symbol("radix.slottable");function lp(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ap}function cp(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{const l=o(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function up(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var fp=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],dp=fp.reduce((e,t)=>{const n=op(`Primitive.${t}`),r=u.forwardRef((i,o)=>{const{asChild:s,...a}=i,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),hp=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),pp="VisuallyHidden",ha=u.forwardRef((e,t)=>S.jsx(dp.span,{...e,ref:t,style:{...hp,...e.style}}));ha.displayName=pp;var gp=ha,[Vn]=Bs("Tooltip",[na]),Gn=na(),pa="TooltipProvider",mp=700,zr="tooltip.open",[vp,vi]=Vn(pa),ga=e=>{const{__scopeTooltip:t,delayDuration:n=mp,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=e,s=u.useRef(!0),a=u.useRef(!1),l=u.useRef(0);return u.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),S.jsx(vp,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:u.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:u.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:o})};ga.displayName=pa;var jt="Tooltip",[bp,Kn]=Vn(jt),ma=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i,onOpenChange:o,disableHoverableContent:s,delayDuration:a}=e,l=vi(jt,e.__scopeTooltip),c=Gn(t),[f,d]=u.useState(null),h=od(),p=u.useRef(0),g=s??l.disableHoverableContent,m=a??l.delayDuration,v=u.useRef(!1),[x,y]=np({prop:r,defaultProp:i??!1,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent(zr))):l.onClose(),o?.(R)},caller:jt}),w=u.useMemo(()=>x?v.current?"delayed-open":"instant-open":"closed",[x]),E=u.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,y(!0)},[y]),T=u.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y(!1)},[y]),C=u.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,y(!0),p.current=0},m)},[m,y]);return u.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),S.jsx(Uh,{...c,children:S.jsx(bp,{scope:t,contentId:h,open:x,stateAttribute:w,trigger:f,onTriggerChange:d,onTriggerEnter:u.useCallback(()=>{l.isOpenDelayedRef.current?C():E()},[l.isOpenDelayedRef,C,E]),onTriggerLeave:u.useCallback(()=>{g?T():(window.clearTimeout(p.current),p.current=0)},[T,g]),onOpen:E,onClose:T,disableHoverableContent:g,children:n})})};ma.displayName=jt;var Ur="TooltipTrigger",va=u.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Kn(Ur,n),o=vi(Ur,n),s=Gn(n),a=u.useRef(null),l=at(t,a,i.onTriggerChange),c=u.useRef(!1),f=u.useRef(!1),d=u.useCallback(()=>c.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),S.jsx(Lh,{asChild:!0,...s,children:S.jsx(Zh.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Be(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),f.current=!0)}),onPointerLeave:Be(e.onPointerLeave,()=>{i.onTriggerLeave(),f.current=!1}),onPointerDown:Be(e.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Be(e.onFocus,()=>{c.current||i.onOpen()}),onBlur:Be(e.onBlur,i.onClose),onClick:Be(e.onClick,i.onClose)})})});va.displayName=Ur;var yp="TooltipPortal",[ey,xp]=Vn(yp,{forceMount:void 0}),yt="TooltipContent",ba=u.forwardRef((e,t)=>{const n=xp(yt,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=e,s=Kn(yt,e.__scopeTooltip);return S.jsx(da,{present:r||s.open,children:s.disableHoverableContent?S.jsx(ya,{side:i,...o,ref:t}):S.jsx(Sp,{side:i,...o,ref:t})})}),Sp=u.forwardRef((e,t)=>{const n=Kn(yt,e.__scopeTooltip),r=vi(yt,e.__scopeTooltip),i=u.useRef(null),o=at(t,i),[s,a]=u.useState(null),{trigger:l,onClose:c}=n,f=i.current,{onPointerInTransitChange:d}=r,h=u.useCallback(()=>{a(null),d(!1)},[d]),p=u.useCallback((g,m)=>{const v=g.currentTarget,x={x:g.clientX,y:g.clientY},y=Cp(x,v.getBoundingClientRect()),w=Tp(x,y),E=Mp(m.getBoundingClientRect()),T=Op([...w,...E]);a(T),d(!0)},[d]);return u.useEffect(()=>()=>h(),[h]),u.useEffect(()=>{if(l&&f){const g=v=>p(v,f),m=v=>p(v,l);return l.addEventListener("pointerleave",g),f.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",m)}}},[l,f,p,h]),u.useEffect(()=>{if(s){const g=m=>{const v=m.target,x={x:m.clientX,y:m.clientY},y=l?.contains(v)||f?.contains(v),w=!Pp(x,s);y?h():w&&(h(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,f,s,c,h]),S.jsx(ya,{...e,ref:o})}),[wp,Ep]=Vn(jt,{isInside:!1}),Rp=Gh("TooltipContent"),ya=u.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:s,...a}=e,l=Kn(yt,n),c=Gn(n),{onClose:f}=l;return u.useEffect(()=>(document.addEventListener(zr,f),()=>document.removeEventListener(zr,f)),[f]),u.useEffect(()=>{if(l.trigger){const d=h=>{h.target?.contains(l.trigger)&&f()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,f]),S.jsx(Us,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:d=>d.preventDefault(),onDismiss:f,children:S.jsxs(jh,{"data-state":l.stateAttribute,...c,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[S.jsx(Rp,{children:r}),S.jsx(wp,{scope:n,isInside:!0,children:S.jsx(gp,{id:l.contentId,role:"tooltip",children:i||r})})]})})});ba.displayName=yt;var xa="TooltipArrow",Sa=u.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Gn(n);return Ep(xa,n).isInside?null:S.jsx(Hh,{...i,...r,ref:t})});Sa.displayName=xa;function Cp(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Tp(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Mp(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function Pp(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const a=t[o],l=t[s],c=a.x,f=a.y,d=l.x,h=l.y;f>r!=h>r&&n<(d-c)*(r-f)/(h-f)+c&&(i=!i)}return i}function Op(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),_p(t)}function _p(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const o=t[t.length-1],s=t[t.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const o=n[n.length-1],s=n[n.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Dp=ga,Ap=ma,$p=va,kp=ba,Ip=Sa;function Np(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function q(e,t){if(e==null)return{};var n,r,i=Np(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}let J=(function(e){return e[e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",e[e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",e[e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",e[e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",e[e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",e[e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",e[e.THEME_ERROR=6]="THEME_ERROR",e[e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",e[e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",e[e.EMPTY_KEY=9]="EMPTY_KEY",e})({});const Bp={[J.UNSUPPORTED_INPUT]:(e,t)=>[`An input with type \`${e}\` input was found at path \`${t}\` but it's not supported yet.`],[J.NO_COMPONENT_FOR_TYPE]:(e,t)=>[`Type \`${e}\` found at path \`${t}\` can't be displayed in panel because no component supports it yet.`],[J.UNKNOWN_INPUT]:(e,t)=>[`input at path \`${e}\` is not recognized.`,t],[J.DUPLICATE_KEYS]:(e,t,n)=>[`Key \`${e}\` of path \`${t}\` already exists at path \`${n}\`. Even nested keys need to be unique. Rename one of the keys.`],[J.ALREADY_REGISTERED_TYPE]:e=>[`Type ${e} has already been registered. You can't register a component with the same type.`],[J.CLIPBOARD_ERROR]:e=>["Error copying the value",e],[J.THEME_ERROR]:(e,t)=>[`Error accessing the theme \`${e}.${t}\` value.`],[J.PATH_DOESNT_EXIST]:e=>[`Error getting the value at path \`${e}\`. There is probably an error in your \`render\` function.`],[J.INPUT_TYPE_OVERRIDE]:(e,t,n)=>[`Input at path \`${e}\` already exists with type: \`${t}\`. Its type cannot be overridden with type \`${n}\`.`],[J.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function wa(e,t,...n){const r=Bp[t],[i,...o]=r(...n);console[e]("LEVA: "+i,...o)}const Fe=wa.bind(null,"warn"),Fp=wa.bind(null,"log"),zp=["value"],Up=["schema"],Lp=["value"],Ea=[],ot={};function mo(e){let{value:t}=e,n=q(e,zp);for(let r of Ea){const i=r(t,n);if(i)return i}}function Ge(e,t){let{schema:n}=t,r=q(t,Up);if(e in ot){Fe(J.ALREADY_REGISTERED_TYPE,e);return}Ea.push((i,o)=>n(i,o)&&e),ot[e]=r}function ar(e,t,n,r){const{normalize:i}=ot[e];if(i)return i(t,n,r);if(typeof t!="object"||!("value"in t))return{value:t};const{value:o}=t,s=q(t,Lp);return{value:o,settings:s}}function jp(e,t,n,r,i,o){const{sanitize:s}=ot[e];return s?s(t,n,r,i,o):t}function vo(e,t,n){const{format:r}=ot[e];return r?r(t,n):t}function Hp(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wp(e){var t=Hp(e,"string");return typeof t=="symbol"?t:t+""}function Vp(e,t,n){return(t=Wp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bo(Object(n),!0).forEach(function(r){Vp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Je=(e,t,n)=>e>n?n:e<t?t:e,Gp=e=>{if(e===""||typeof e=="number")return e;try{const t=ht(e);if(!isNaN(t))return t}catch{}return parseFloat(e)},Kp=Math.log(10);function yo(e){let t=Math.abs(+String(e).replace(".",""));if(t===0)return .01;for(;t!==0&&t%10===0;)t/=10;const n=Math.floor(Math.log(t)/Kp)+1,r=Math.floor(Math.log10(Math.abs(e))),i=Math.pow(10,r-n);return Math.max(i,.001)}const Mn=(e,t,n)=>n===t?0:(Je(e,t,n)-t)/(n-t),Pn=(e,t,n)=>e*(n-t)+t,qp=()=>"_"+Math.random().toString(36).substr(2,9),xo=/\(([^\(\)]+)\)/,So=/(-?\d+(?:\.\d+)?)\s*\^\s*(-?\d+(?:\.\d+)?)/,wo=/(-?\d+(?:\.\d+)?)\s*([*/])\s*(-?\d+(?:\.\d+)?)/,Eo=/(-?\d+(?:\.\d+)?)\s*([+-])\s*(-?\d+(?:\.\d+)?)/;function ht(e){return e=e.replace(/\s+/g,""),xo.test(e)?ht(e.replace(xo,(t,n)=>ht(n).toString())):So.test(e)?ht(e.replace(So,(t,n,r)=>Math.pow(Number(n),Number(r)).toString())):wo.test(e)?ht(e.replace(wo,(t,n,r,i)=>r==="*"?(Number(n)*Number(i)).toString():Number(i)===0?(()=>{throw new Error("Division by zero")})():(Number(n)/Number(i)).toString())):Eo.test(e)?ht(e.replace(Eo,(t,n,r,i)=>r==="+"?(Number(n)+Number(i)).toString():(Number(n)-Number(i)).toString())):Number(e)}function Yp(e,t){return t.reduce((n,r)=>(e&&e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}function Xp(e,t){const n=F({},e);return t.forEach(r=>r in e&&delete n[r]),n}function Zp(e,t){return e.reduce((n,r,i)=>Object.assign(n,{[t[i]]:r}),{})}function Ra(e){return Object.prototype.toString.call(e)==="[object Object]"}const Qp=e=>Ra(e)&&Object.keys(e).length===0;let Oe=(function(e){return e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.MONITOR="MONITOR",e.FOLDER="FOLDER",e})({}),Ke=(function(e){return e.SELECT="SELECT",e.IMAGE="IMAGE",e.NUMBER="NUMBER",e.COLOR="COLOR",e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.INTERVAL="INTERVAL",e.VECTOR3D="VECTOR3D",e.VECTOR2D="VECTOR2D",e})({});const Jp=["type","__customInput"],eg=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],tg=["type"];function Ca(e,t,n={},r){var i,o;if(typeof e!="object"||Array.isArray(e))return{type:r,input:e,options:F({key:t,label:t,optional:!1,disabled:!1,order:0},n)};if("__customInput"in e){const{type:T,__customInput:C}=e,R=q(e,Jp);return Ca(C,t,R,T)}const{render:s,label:a,optional:l,order:c=0,disabled:f,hint:d,onChange:h,onEditStart:p,onEditEnd:g,transient:m}=e,v=q(e,eg),x=F({render:s,key:t,label:a??t,hint:d,transient:m??!!h,onEditStart:p,onEditEnd:g,disabled:f,optional:l,order:c},n);let{type:y}=v,w=q(v,tg);if(y=r??y,y in Oe)return{type:y,input:w,options:x};let E;return r&&Ra(w)&&"value"in w?E=w.value:E=Qp(w)?void 0:w,{type:y,input:E,options:F(F({},x),{},{onChange:h,optional:(i=x.optional)!==null&&i!==void 0?i:!1,disabled:(o=x.disabled)!==null&&o!==void 0?o:!1})}}function ng(e,t,n,r){const i=Ca(e,t),{type:o,input:s,options:a}=i;if(o)return o in Oe?i:{type:o,input:ar(o,s,n,r),options:a};let l=mo(s);return l?{type:l,input:ar(l,s,n,r),options:a}:(l=mo({value:s}),l?{type:l,input:ar(l,{value:s},n,r),options:a}:!1)}function Ro(e,t,n,r,i){const{value:o,type:s,settings:a}=e;e.value=Ta({type:s,value:o,settings:a},t,n,r),e.fromPanel=i}const rg=function(t,n,r){this.type="LEVA_ERROR",this.message="LEVA: "+t,this.previousValue=n,this.error=r};function Ta({type:e,value:t,settings:n},r,i,o){const s=e!=="SELECT"&&typeof r=="function"?r(t):r;let a;try{a=jp(e,s,n,t,i,o)}catch(l){throw new rg(`The value \`${r}\` did not result in a correct value.`,t,l)}return Ft(a,t)?t:a}const Ma=(e,t,n=!1)=>{let r=0;return function(){const i=arguments,o=n&&!r,s=()=>e.apply(this,i);window.clearTimeout(r),r=window.setTimeout(s,t),o&&s()}},Pa=e=>e.shiftKey?5:e.altKey?1/5:1,ig=["value"],og=["min","max"],sg=e=>{if(typeof e=="number")return!0;if(typeof e=="string"){const t=parseFloat(e);return isNaN(t)?!1:e.substring((""+t).length).trim().length<4}return!1},Oa=(e,{min:t=-1/0,max:n=1/0,suffix:r})=>{const i=parseFloat(e);if(e===""||isNaN(i))throw Error("Invalid number");const o=Je(i,t,n);return r?o+r:o},ag=(e,{pad:t=0,suffix:n})=>{const r=parseFloat(e).toFixed(t);return n?r+n:r},_a=e=>{let{value:t}=e,n=q(e,ig);const{min:r=-1/0,max:i=1/0}=n,o=q(n,og);let s=parseFloat(t);const a=typeof t=="string"?t.substring((""+s).length):void 0;s=Je(s,r,i);let l=n.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(s-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-s)/100).toPrecision(1)));const c=l?yo(l)*10:yo(s);l=l||c/10;const f=Math.round(Je(Math.log10(1/c),0,2));return{value:a?s+a:s,settings:F({initialValue:s,step:l,pad:f,min:r,max:i,suffix:a},o)}},Da=(e,{step:t,initialValue:n})=>{const r=Math.round((e-n)/t);return n+r*t};var Aa=Object.freeze({__proto__:null,schema:sg,sanitize:Oa,format:ag,normalize:_a,sanitizeStep:Da});function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(null,arguments)}const $a=u.createContext({});function oe(){return u.useContext($a)}const bi=u.createContext(null),ka=u.createContext(null),Ia=u.createContext(null);function Vt(){return u.useContext(ka)}function lg(){return u.useContext(Ia)}const Na=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function hn(e,t){const[n,r]=e.split(" "),i={};return n!=="none"&&(i.boxShadow=`${t.inset?"inset ":""}0 0 0 $borderWidths${[t.key]} $colors${n!=="default"&&n||t.borderColor}`),r&&(i.backgroundColor=r),i}const _t={$inputStyle:()=>e=>hn(e,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>e=>hn(e,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>e=>hn(e,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>e=>hn(e,{key:"$active",borderColor:"$accent1",inset:!0})},Gt=zf({prefix:"leva",theme:Na(),utils:F(F({},_t),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:e=>({"&:focus":_t.$focusStyle()(e)}),$focusWithin:e=>({"&:focus-within":_t.$focusStyle()(e)}),$hover:e=>({"&:hover":_t.$hoverStyle()(e)}),$active:e=>({"&:active":_t.$activeStyle()(e)})})}),B=Gt.styled;Gt.css;const cg=Gt.createTheme,ug=Gt.globalCss;Gt.keyframes;const fg=ug({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function dg(e){const t=Na();if(!e)return{theme:t,className:""};Object.keys(e).forEach(r=>{Object.assign(t[r],e[r])});const n=cg(t);return{theme:t,className:n.className}}function Le(e,t){const{theme:n}=u.useContext(bi);if(!(e in n)||!(t in n[e]))return Fe(J.THEME_ERROR,e,t),"";let r=t;for(;;){let i=n[e][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const Ba=B("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),Fa=B("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${Ba}`]:{paddingLeft:0}}),hg=B(Fa,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),pg=B("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),gg=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],mg=["onUpdate"];function yi(e){let{innerLabel:t,value:n,onUpdate:r,onChange:i,onKeyDown:o,type:s,id:a,inputType:l="text",rows:c=0}=e,f=q(e,gg);const{id:d,emitOnEditStart:h,emitOnEditEnd:p,disabled:g}=oe(),m=a||d,v=u.useRef(null),x=c>0,y=x?"textarea":"input",w=u.useCallback(C=>R=>{const O=R.currentTarget.value;C(O)},[]);b.useEffect(()=>{const C=v.current,R=w(O=>{r(O),p()});return C?.addEventListener("blur",R),()=>C?.removeEventListener("blur",R)},[w,r,p]);const E=u.useCallback(C=>{C.key==="Enter"&&w(r)(C)},[w,r]),T=Object.assign({as:y},x?{rows:c}:{},f);return b.createElement(pg,{textArea:x},t&&typeof t=="string"?b.createElement(Fa,null,t):t,b.createElement(Ba,Z({levaType:s,ref:v,id:m,type:l,autoComplete:"off",spellCheck:"false",value:n,onChange:w(i),onFocus:()=>h(),onKeyPress:E,onKeyDown:o,disabled:g},T)))}function vg(e){let{onUpdate:t}=e,n=q(e,mg);const r=u.useCallback(o=>t(Gp(o)),[t]),i=u.useCallback(o=>{const s=o.key==="ArrowUp"?1:o.key==="ArrowDown"?-1:0;if(s){o.preventDefault();const a=o.altKey?.1:o.shiftKey?10:1;t(l=>parseFloat(l)+s*a)}},[t]);return b.createElement(yi,Z({},n,{onUpdate:r,onKeyDown:i,type:"number"}))}const On=B("div",{}),Lr=B("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),bg=B("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${Lr}::after`]:{opacity:.6},[`${On}:hover > & + ${Lr}::after`]:{opacity:.6},[`${On}:hover > & > svg`]:{opacity:1}}),za=B("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${On}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),Ua=B("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${za} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),La=B(Ua,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),yg=B("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),xg=B("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),jr=B("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),Sg=B("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${jr}`]:{pointerEvents:"auto"}}}}}),ja=B("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),wg=B("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),Eg=B(Ip,{fill:"$toolTipBackground"});function xi({children:e,container:t=(n=>globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body)()}){const{className:n}=u.useContext(bi);return b.createElement(af,{className:n,container:t},e)}const Rg=["align"];function Cg(){const{id:e,disable:t,disabled:n}=oe();return b.createElement(b.Fragment,null,b.createElement(xg,{id:e+"__disable",type:"checkbox",checked:!n,onChange:()=>t(!n)}),b.createElement("label",{htmlFor:e+"__disable"}))}function Tg(e){const{id:t,optional:n,hint:r}=oe(),i=e.htmlFor||t||void 0,o=!r&&typeof e.children=="string"?e.children:void 0;return b.createElement(b.Fragment,null,n&&b.createElement(Cg,null),r!==void 0?b.createElement(Ap,null,b.createElement($p,{asChild:!0},b.createElement(jr,Z({htmlFor:i},e))),b.createElement(kp,{side:"top",sideOffset:2},b.createElement(wg,null,r,b.createElement(Eg,null)))):b.createElement(jr,Z({htmlFor:i,title:o},e)))}function Re(e){let{align:t}=e,n=q(e,Rg);const{value:r,label:i,key:o,disabled:s}=oe(),{hideCopyButton:a}=lg(),l=!a&&o!==void 0,[c,f]=u.useState(!1),d=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[o]:r??""})),f(!0)}catch{Fe(J.CLIPBOARD_ERROR,{[o]:r})}};return b.createElement(yg,{align:t,onPointerLeave:()=>f(!1)},b.createElement(Tg,n),l&&!s&&b.createElement("div",{title:`Click to copy ${typeof i=="string"?i:o} value`},c?b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},b.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),b.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):b.createElement("svg",{onClick:d,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},b.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),b.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const Mg=["toggled"],Pg=B("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Si(e){let{toggled:t}=e,n=q(e,Mg);return b.createElement(Pg,Z({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${t?0:-90}deg)`}},n),b.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const Og=["input"];function ve(e){let{input:t}=e,n=q(e,Og);return t?b.createElement(La,n):b.createElement(Ua,n)}function Ha({value:e,type:t,settings:n,setValue:r}){const[i,o]=u.useState(vo(t,e,n)),s=u.useRef(e),a=u.useRef(n);a.current=n;const l=u.useCallback(f=>o(vo(t,f,a.current)),[t]),c=u.useCallback(f=>{try{r(f)}catch(d){const{type:h,previousValue:p}=d;if(h!=="LEVA_ERROR")throw d;l(p)}},[l,r]);return u.useEffect(()=>{Ft(e,s.current)||l(e),s.current=e},[e,l]),{displayValue:i,onChange:o,onUpdate:c}}function Kt(e,t){const{emitOnEditStart:n,emitOnEditEnd:r}=oe();return Nl(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),n?.());const o=e(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r?.()),o},t)}function _g(e){const t=u.useRef(null),n=u.useRef(null),r=u.useRef(!1);return u.useEffect(()=>{const i=Ma(()=>{t.current.width=t.current.offsetWidth*window.devicePixelRatio,t.current.height=t.current.offsetHeight*window.devicePixelRatio,e(t.current,n.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[e]),u.useEffect(()=>{n.current=t.current.getContext("2d")},[]),[t,n]}function Wa(){const e=u.useRef(null),t=u.useRef({x:0,y:0}),n=u.useCallback(r=>{Object.assign(t.current,r),e.current&&(e.current.style.transform=`translate3d(${t.current.x}px, ${t.current.y}px, 0)`)},[]);return[e,n]}const Dg=["__refCount"],lr=(e,t)=>{if(!e[t])return null;const n=e[t];return q(n,Dg)};function Ag(e){const t=Vt(),[n,r]=u.useState(lr(t.getData(),e)),i=u.useCallback(c=>t.setValueAtPath(e,c,!0),[e,t]),o=u.useCallback(c=>t.setSettingsAtPath(e,c),[e,t]),s=u.useCallback(c=>t.disableInputAtPath(e,c),[e,t]),a=u.useCallback(()=>t.emitOnEditStart(e),[e,t]),l=u.useCallback(()=>t.emitOnEditEnd(e),[e,t]);return u.useEffect(()=>{r(lr(t.getData(),e));const c=t.useStore.subscribe(f=>lr(f.data,e),r,{equalityFn:Fn});return()=>c()},[t,e]),[n,{set:i,setSettings:o,disable:s,storeId:t.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const $g=B("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),Va=B("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),Hr=B("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),Ga=B("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),Ka=B("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function kg({value:e,min:t,max:n,onDrag:r,step:i,initialValue:o}){const s=u.useRef(null),a=u.useRef(null),l=u.useRef(0),c=Le("sizes","scrubberWidth"),f=Kt(({event:h,first:p,xy:[g],movement:[m],memo:v})=>{if(p){const{width:y,left:w}=s.current.getBoundingClientRect();l.current=y-parseFloat(c),v=h?.target===a.current?e:Pn((g-w)/y,t,n)}const x=v+Pn(m/l.current,0,n-t);return r(Da(x,{step:i,initialValue:o})),v}),d=Mn(e,t,n);return b.createElement(Ga,Z({ref:s},f()),b.createElement(Va,null,b.createElement(Ka,{style:{left:0,right:`${(1-d)*100}%`}})),b.createElement(Hr,{ref:a,style:{left:`calc(${d} * (100% - ${c}))`}}))}const Ig=b.memo(({label:e,onUpdate:t,step:n,innerLabelTrim:r})=>{const[i,o]=u.useState(!1),s=Kt(({active:a,delta:[l],event:c,memo:f=0,first:d,last:h,target:p})=>(d&&p.requestPointerLock(),h&&document.exitPointerLock(),o(a),f+=l/2,Math.abs(f)>=1&&(t(g=>parseFloat(g)+Math.floor(f)*n*Pa(c)),f=0),f));return b.createElement(hg,Z({dragging:i,title:e.length>1?e:""},s()),e.slice(0,r))});function qa({label:e,id:t,displayValue:n,onUpdate:r,onChange:i,settings:o,innerLabelTrim:s=1}){const a=s>0&&b.createElement(Ig,{label:e,step:o.step,onUpdate:r,innerLabelTrim:s});return b.createElement(vg,{id:t,value:String(n),onUpdate:r,onChange:i,innerLabel:a})}function Ng(){const e=oe(),{label:t,value:n,onUpdate:r,settings:i,id:o}=e,{min:s,max:a}=i,l=a!==1/0&&s!==-1/0;return b.createElement(ve,{input:!0},b.createElement(Re,null,t),b.createElement($g,{hasRange:l},l&&b.createElement(kg,Z({value:parseFloat(n),onDrag:r},i)),b.createElement(qa,Z({},e,{id:o,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:Bg}=Aa,Fg=q(Aa,["sanitizeStep"]);var zg=F({component:Ng},Fg);const Ug=(e,t)=>fe().schema({options:fe().passesAnyOf(fe().object(),fe().array())}).test(t),Lg=(e,{values:t})=>{if(t.indexOf(e)<0)throw Error("Selected value doesn't match Select options");return e},jg=(e,{values:t})=>t.indexOf(e),Hg=e=>{let{value:t,options:n}=e,r,i;return Array.isArray(n)?(i=n,r=n.map(o=>String(o))):(i=Object.values(n),r=Object.keys(n)),"value"in e?i.includes(t)||(r.unshift(String(t)),i.unshift(t)):t=i[0],Object.values(n).includes(t)||(n[String(t)]=t),{value:t,settings:{keys:r,values:i}}};var Wg=Object.freeze({__proto__:null,schema:Ug,sanitize:Lg,format:jg,normalize:Hg});const Vg=B("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),Wr=B("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),Gg=B("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${Wr}:focus + &`]:{$focusStyle:""},[`${Wr}:hover + &`]:{$hoverStyle:""}});function Kg({displayValue:e,value:t,onUpdate:n,id:r,settings:i,disabled:o}){const{keys:s,values:a}=i,l=u.useRef();return t===a[e]&&(l.current=s[e]),b.createElement(Vg,null,b.createElement(Wr,{id:r,value:e,onChange:c=>n(a[Number(c.currentTarget.value)]),disabled:o},s.map((c,f)=>b.createElement("option",{key:c,value:f},c))),b.createElement(Gg,null,l.current),b.createElement(Si,{toggled:!0}))}function qg(){const{label:e,value:t,displayValue:n,onUpdate:r,id:i,disabled:o,settings:s}=oe();return b.createElement(ve,{input:!0},b.createElement(Re,null,e),b.createElement(Kg,{id:i,value:t,displayValue:n,onUpdate:r,settings:s,disabled:o}))}var Yg=F({component:qg},Wg);const Xg=e=>fe().string().test(e),Zg=e=>{if(typeof e!="string")throw Error("Invalid string");return e},Qg=({value:e,editable:t=!0,rows:n=!1})=>({value:e,settings:{editable:t,rows:typeof n=="number"?n:n?5:0}});var Jg=Object.freeze({__proto__:null,schema:Xg,sanitize:Zg,normalize:Qg});const em=["displayValue","onUpdate","onChange","editable"],tm=B("div",{whiteSpace:"pre-wrap"});function nm(e){let{displayValue:t,onUpdate:n,onChange:r,editable:i=!0}=e,o=q(e,em);return i?b.createElement(yi,Z({value:t,onUpdate:n,onChange:r},o)):b.createElement(tm,null,t)}function rm(){const{label:e,settings:t,displayValue:n,onUpdate:r,onChange:i}=oe();return b.createElement(ve,{input:!0},b.createElement(Re,null,e),b.createElement(nm,Z({displayValue:n,onUpdate:r,onChange:i},t)))}var im=F({component:rm},Jg);const om=e=>fe().boolean().test(e),sm=e=>{if(typeof e!="boolean")throw Error("Invalid boolean");return e};var am=Object.freeze({__proto__:null,schema:om,sanitize:sm});const lm=B("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function cm({value:e,onUpdate:t,id:n,disabled:r}){return b.createElement(lm,null,b.createElement("input",{id:n,type:"checkbox",checked:e,onChange:i=>t(i.currentTarget.checked),disabled:r}),b.createElement("label",{htmlFor:n},b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function um(){const{label:e,value:t,onUpdate:n,disabled:r,id:i}=oe();return b.createElement(ve,{input:!0},b.createElement(Re,null,e),b.createElement(cm,{value:t,onUpdate:n,id:i,disabled:r}))}var fm=F({component:um},am);const dm=["locked"];function hm({value:e,id:t,valueKey:n,settings:r,onUpdate:i,innerLabelTrim:o}){const s=u.useRef(e[n]);s.current=e[n];const a=u.useCallback(c=>i({[n]:Ta({type:"NUMBER",value:s.current,settings:r},c)}),[i,r,n]),l=Ha({type:"NUMBER",value:e[n],settings:r,setValue:a});return b.createElement(qa,{id:t,label:n,value:e[n],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:o})}const pm=B("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function gm(e){let{locked:t}=e,n=q(e,dm);return b.createElement("svg",Z({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),t?b.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):b.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function wi({value:e,onUpdate:t,settings:n,innerLabelTrim:r}){const{id:i,setSettings:o}=oe(),{lock:s,locked:a}=n;return b.createElement(pm,{withLock:s},s&&b.createElement(gm,{locked:a,onClick:()=>o({locked:!a})}),Object.keys(e).map((l,c)=>b.createElement(hm,{id:c===0?i:`${i}.${l}`,key:l,valueKey:l,value:e,settings:n[l],onUpdate:t,innerLabelTrim:r})))}const Ya=(e,t)=>{const n={};let r=0,i=1/0;Object.entries(e).forEach(([o,s])=>{n[o]=_a(F({value:s},t[o])).settings,r=Math.max(r,n[o].step),i=Math.min(i,n[o].pad)});for(let o in n){const{step:s,min:a,max:l}=t[o]||{};!isFinite(s)&&(!isFinite(a)||!isFinite(l))&&(n[o].step=r,n[o].pad=i)}return n},mm=["lock"],vm=["value"];function bm(e){const t=fe().array().length(e).every.number(),n=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===e&&i.every(o=>isFinite(o))};return r=>t.test(r)||n(r)}function ym(e){return Array.isArray(e)?"array":"object"}function It(e,t,n){return ym(e)===t?e:t==="array"?Object.values(e):Zp(e,n)}const xm=(e,t,n)=>{const r=It(e,"object",t.keys);for(let s in r)r[s]=Oa(r[s],t[s]);const i=Object.keys(r);let o={};if(i.length===t.keys.length)o=r;else{const s=It(n,"object",t.keys);if(i.length===1&&t.locked){const a=i[0],l=r[a],c=s[a],f=c!==0?l/c:1;for(let d in s)d===a?o[a]=l:o[d]=s[d]*f}else o=F(F({},s),r)}return It(o,t.format,t.keys)},Sm=(e,t)=>It(e,"object",t.keys),wm=e=>!!e&&("step"in e||"min"in e||"max"in e);function Em(e,t,n=[]){const{lock:r=!1}=t,i=q(t,mm),o=Array.isArray(e)?"array":"object",s=o==="object"?Object.keys(e):n,a=It(e,"object",s),l=wm(i)?s.reduce((f,d)=>Object.assign(f,{[d]:i}),{}):i,c=Ya(a,l);return{value:o==="array"?e:a,settings:F(F({},c),{},{format:o,keys:s,lock:r,locked:!1})}}function Xa(e){return{schema:bm(e.length),normalize:t=>{let{value:n}=t,r=q(t,vm);return Em(n,r,e)},format:(t,n)=>Sm(t,n),sanitize:(t,n,r)=>xm(t,n,r)}}var Rm={grad:.9,turn:360,rad:360/(2*Math.PI)},Ne=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},re=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},me=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e>t?e:t},Za=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Co=function(e){return{r:me(e.r,0,255),g:me(e.g,0,255),b:me(e.b,0,255),a:me(e.a)}},cr=function(e){return{r:re(e.r),g:re(e.g),b:re(e.b),a:re(e.a,3)}},Cm=/^#([0-9a-f]{3,8})$/i,pn=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Qa=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),s=o-Math.min(t,n,r),a=s?o===t?(n-r)/s:o===n?2+(r-t)/s:4+(t-n)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*100:0,v:o/255*100,a:i}},Ja=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),s=r*(1-n),a=r*(1-(t-o)*n),l=r*(1-(1-t+o)*n),c=o%6;return{r:255*[r,a,s,s,l,r][c],g:255*[l,r,r,a,s,s][c],b:255*[s,s,l,r,r,a][c],a:i}},To=function(e){return{h:Za(e.h),s:me(e.s,0,100),l:me(e.l,0,100),a:me(e.a)}},Mo=function(e){return{h:re(e.h),s:re(e.s),l:re(e.l),a:re(e.a,3)}},Po=function(e){return Ja((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},Nt=function(e){return{h:(t=Qa(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},Tm=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Mm=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Pm=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Om=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Vr={string:[[function(e){var t=Cm.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?re(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?re(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Pm.exec(e)||Om.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Co({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Tm.exec(e)||Mm.exec(e);if(!t)return null;var n,r,i=To({h:(n=t[1],r=t[2],r===void 0&&(r="deg"),Number(n)*(Rm[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Po(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=i===void 0?1:i;return Ne(t)&&Ne(n)&&Ne(r)?Co({r:Number(t),g:Number(n),b:Number(r),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,o=i===void 0?1:i;if(!Ne(t)||!Ne(n)||!Ne(r))return null;var s=To({h:Number(t),s:Number(n),l:Number(r),a:Number(o)});return Po(s)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,o=i===void 0?1:i;if(!Ne(t)||!Ne(n)||!Ne(r))return null;var s=(function(a){return{h:Za(a.h),s:me(a.s,0,100),v:me(a.v,0,100),a:me(a.a)}})({h:Number(t),s:Number(n),v:Number(r),a:Number(o)});return Ja(s)},"hsv"]]},Oo=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},el=function(e){return typeof e=="string"?Oo(e.trim(),Vr.string):typeof e=="object"&&e!==null?Oo(e,Vr.object):[null,void 0]},_m=function(e){return el(e)[1]},ur=function(e,t){var n=Nt(e);return{h:n.h,s:me(n.s+100*t,0,100),l:n.l,a:n.a}},fr=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},_o=function(e,t){var n=Nt(e);return{h:n.h,s:n.s,l:me(n.l+100*t,0,100),a:n.a}},Gr=(function(){function e(t){this.parsed=el(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return re(fr(this.rgba),2)},e.prototype.isDark=function(){return fr(this.rgba)<.5},e.prototype.isLight=function(){return fr(this.rgba)>=.5},e.prototype.toHex=function(){return t=cr(this.rgba),n=t.r,r=t.g,i=t.b,s=(o=t.a)<1?pn(re(255*o)):"","#"+pn(n)+pn(r)+pn(i)+s;var t,n,r,i,o,s},e.prototype.toRgb=function(){return cr(this.rgba)},e.prototype.toRgbString=function(){return t=cr(this.rgba),n=t.r,r=t.g,i=t.b,(o=t.a)<1?"rgba("+n+", "+r+", "+i+", "+o+")":"rgb("+n+", "+r+", "+i+")";var t,n,r,i,o},e.prototype.toHsl=function(){return Mo(Nt(this.rgba))},e.prototype.toHslString=function(){return t=Mo(Nt(this.rgba)),n=t.h,r=t.s,i=t.l,(o=t.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+o+")":"hsl("+n+", "+r+"%, "+i+"%)";var t,n,r,i,o},e.prototype.toHsv=function(){return t=Qa(this.rgba),{h:re(t.h),s:re(t.s),v:re(t.v),a:re(t.a,3)};var t},e.prototype.invert=function(){return ae({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),ae(ur(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),ae(ur(this.rgba,-t))},e.prototype.grayscale=function(){return ae(ur(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),ae(_o(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),ae(_o(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?ae({r:(n=this.rgba).r,g:n.g,b:n.b,a:t}):re(this.rgba.a,3);var n},e.prototype.hue=function(t){var n=Nt(this.rgba);return typeof t=="number"?ae({h:t,s:n.s,l:n.l,a:n.a}):re(n.h)},e.prototype.isEqual=function(t){return this.toHex()===ae(t).toHex()},e})(),ae=function(e){return e instanceof Gr?e:new Gr(e)},Do=[],Dm=function(e){e.forEach(function(t){Do.indexOf(t)<0&&(t(Gr,Vr),Do.push(t))})};function Am(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var o={};e.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(s?.closest){var f=this.toRgb(),d=1/0,h="black";if(!o.length)for(var p in n)o[p]=new e(n[p]).toRgb();for(var g in n){var m=(a=f,l=o[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<d&&(d=m,h=g)}return h}},t.string.push([function(s){var a=s.toLowerCase(),l=a==="transparent"?"#0000":n[a];return l?new e(l).toRgb():null},"name"])}function Rt(){return(Rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ei(e,t){if(e==null)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function Kr(e){var t=u.useRef(e),n=u.useRef(function(r){t.current&&t.current(r)});return t.current=e,n.current}var xt=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e<t?t:e},Bt=function(e){return"touches"in e},qr=function(e){return e&&e.ownerDocument.defaultView||self},Ao=function(e,t,n){var r=e.getBoundingClientRect(),i=Bt(t)?(function(o,s){for(var a=0;a<o.length;a++)if(o[a].identifier===s)return o[a];return o[0]})(t.touches,n):t;return{left:xt((i.pageX-(r.left+qr(e).pageXOffset))/r.width),top:xt((i.pageY-(r.top+qr(e).pageYOffset))/r.height)}},$o=function(e){!Bt(e)&&e.preventDefault()},Ri=b.memo(function(e){var t=e.onMove,n=e.onKey,r=Ei(e,["onMove","onKey"]),i=u.useRef(null),o=Kr(t),s=Kr(n),a=u.useRef(null),l=u.useRef(!1),c=u.useMemo(function(){var p=function(v){$o(v),(Bt(v)?v.touches.length>0:v.buttons>0)&&i.current?o(Ao(i.current,v,a.current)):m(!1)},g=function(){return m(!1)};function m(v){var x=l.current,y=qr(i.current),w=v?y.addEventListener:y.removeEventListener;w(x?"touchmove":"mousemove",p),w(x?"touchend":"mouseup",g)}return[function(v){var x=v.nativeEvent,y=i.current;if(y&&($o(x),!(function(E,T){return T&&!Bt(E)})(x,l.current)&&y)){if(Bt(x)){l.current=!0;var w=x.changedTouches||[];w.length&&(a.current=w[0].identifier)}y.focus(),o(Ao(y,x,a.current)),m(!0)}},function(v){var x=v.which||v.keyCode;x<37||x>40||(v.preventDefault(),s({left:x===39?.05:x===37?-.05:0,top:x===40?.05:x===38?-.05:0}))},m]},[s,o]),f=c[0],d=c[1],h=c[2];return u.useEffect(function(){return h},[h]),b.createElement("div",Rt({},r,{onTouchStart:f,onMouseDown:f,className:"react-colorful__interactive",ref:i,onKeyDown:d,tabIndex:0,role:"slider"}))}),qt=function(e){return e.filter(Boolean).join(" ")},Ci=function(e){var t=e.color,n=e.left,r=e.top,i=r===void 0?.5:r,o=qt(["react-colorful__pointer",e.className]);return b.createElement("div",{className:o,style:{top:100*i+"%",left:100*n+"%"}},b.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},le=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n},tl=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:le(e.h),s:le(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:le(i/2),a:le(r,2)}},Yr=function(e){var t=tl(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},dr=function(e){var t=tl(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},nl=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),s=r*(1-n),a=r*(1-(t-o)*n),l=r*(1-(1-t+o)*n),c=o%6;return{r:le(255*[r,a,s,s,l,r][c]),g:le(255*[l,r,r,a,s,s][c]),b:le(255*[s,s,l,r,r,a][c]),a:le(i,2)}},rl=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),s=o-Math.min(t,n,r),a=s?o===t?(n-r)/s:o===n?2+(r-t)/s:4+(t-n)/s:0;return{h:le(60*(a<0?a+6:a)),s:le(o?s/o*100:0),v:le(o/255*100),a:i}},il=b.memo(function(e){var t=e.hue,n=e.onChange,r=qt(["react-colorful__hue",e.className]);return b.createElement("div",{className:r},b.createElement(Ri,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:xt(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":le(t),"aria-valuemax":"360","aria-valuemin":"0"},b.createElement(Ci,{className:"react-colorful__hue-pointer",left:t/360,color:Yr({h:t,s:100,v:100,a:1})})))}),ol=b.memo(function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:Yr({h:t.h,s:100,v:100,a:1})};return b.createElement("div",{className:"react-colorful__saturation",style:r},b.createElement(Ri,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:xt(t.s+100*i.left,0,100),v:xt(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+le(t.s)+"%, Brightness "+le(t.v)+"%"},b.createElement(Ci,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Yr(t)})))}),Ti=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function sl(e,t,n){var r=Kr(n),i=u.useState(function(){return e.toHsva(t)}),o=i[0],s=i[1],a=u.useRef({color:t,hsva:o});u.useEffect(function(){if(!e.equal(t,a.current.color)){var c=e.toHsva(t);a.current={hsva:c,color:t},s(c)}},[t,e]),u.useEffect(function(){var c;Ti(o,a.current.hsva)||e.equal(c=e.fromHsva(o),a.current.color)||(a.current={hsva:o,color:c},r(c))},[o,e,r]);var l=u.useCallback(function(c){s(function(f){return Object.assign({},f,c)})},[]);return[o,l]}var $m=typeof window<"u"?u.useLayoutEffect:u.useEffect,km=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},ko=new Map,al=function(e){$m(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!ko.has(t)){var n=t.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,ko.set(t,n);var r=km();r&&n.setAttribute("nonce",r),t.head.appendChild(n)}},[])},Im=function(e){var t=e.className,n=e.colorModel,r=e.color,i=r===void 0?n.defaultColor:r,o=e.onChange,s=Ei(e,["className","colorModel","color","onChange"]),a=u.useRef(null);al(a);var l=sl(n,i,o),c=l[0],f=l[1],d=qt(["react-colorful",t]);return b.createElement("div",Rt({},s,{ref:a,className:d}),b.createElement(ol,{hsva:c,onChange:f}),b.createElement(il,{hue:c.h,onChange:f,className:"react-colorful__last-control"}))},Nm=function(e){var t=e.className,n=e.hsva,r=e.onChange,i={backgroundImage:"linear-gradient(90deg, "+dr(Object.assign({},n,{a:0}))+", "+dr(Object.assign({},n,{a:1}))+")"},o=qt(["react-colorful__alpha",t]),s=le(100*n.a);return b.createElement("div",{className:o},b.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),b.createElement(Ri,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:xt(n.a+a.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},b.createElement(Ci,{className:"react-colorful__alpha-pointer",left:n.a,color:dr(n)})))},Bm=function(e){var t=e.className,n=e.colorModel,r=e.color,i=r===void 0?n.defaultColor:r,o=e.onChange,s=Ei(e,["className","colorModel","color","onChange"]),a=u.useRef(null);al(a);var l=sl(n,i,o),c=l[0],f=l[1],d=qt(["react-colorful",t]);return b.createElement("div",Rt({},s,{ref:a,className:d}),b.createElement(ol,{hsva:c,onChange:f}),b.createElement(il,{hue:c.h,onChange:f}),b.createElement(Nm,{hsva:c,onChange:f,className:"react-colorful__last-control"}))},Fm={defaultColor:{r:0,g:0,b:0,a:1},toHsva:rl,fromHsva:nl,equal:Ti},zm=function(e){return b.createElement(Bm,Rt({},e,{colorModel:Fm}))},Um={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return rl({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(t=nl(e)).r,g:t.g,b:t.b};var t},equal:Ti},Lm=function(e){return b.createElement(Im,Rt({},e,{colorModel:Um}))},hr={exports:{}},pr,Io;function jm(){if(Io)return pr;Io=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return pr=e,pr}var gr,No;function Hm(){if(No)return gr;No=1;var e=jm();function t(){}function n(){}return n.resetWarningCache=t,gr=function(){function r(s,a,l,c,f,d){if(d!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},gr}var Bo;function Wm(){return Bo||(Bo=1,hr.exports=Hm()()),hr.exports}var Vm=Wm();const Y=Nn(Vm);function Ct(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(d){s(d)}}function l(f){try{c(r.throw(f))}catch(d){s(d)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function Tt(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(f){return l([c,f])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(f){c=[6,f],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Gm(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Km(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Gm(arguments[t]));return e}var qm=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Yt(e,t){var n=Ym(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function Ym(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),i=qm.get(r);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var Xm=[".DS_Store","Thumbs.db"];function Zm(e){return Ct(this,void 0,void 0,function(){return Tt(this,function(t){return _n(e)&&Qm(e)?[2,nv(e.dataTransfer,e.type)]:Jm(e)?[2,ev(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,tv(e)]:[2,[]]})})}function Qm(e){return _n(e.dataTransfer)}function Jm(e){return _n(e)&&_n(e.target)}function _n(e){return typeof e=="object"&&e!==null}function ev(e){return Xr(e.target.files).map(function(t){return Yt(t)})}function tv(e){return Ct(this,void 0,void 0,function(){var t;return Tt(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(r){return r.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(r){return Yt(r)})]}})})}function nv(e,t){return Ct(this,void 0,void 0,function(){var n,r;return Tt(this,function(i){switch(i.label){case 0:return e===null?[2,[]]:e.items?(n=Xr(e.items).filter(function(o){return o.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(rv))]):[3,2];case 1:return r=i.sent(),[2,Fo(ll(r))];case 2:return[2,Fo(Xr(e.files).map(function(o){return Yt(o)}))]}})})}function Fo(e){return e.filter(function(t){return Xm.indexOf(t.name)===-1})}function Xr(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function rv(e){if(typeof e.webkitGetAsEntry!="function")return zo(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?cl(t):zo(e)}function ll(e){return e.reduce(function(t,n){return Km(t,Array.isArray(n)?ll(n):[n])},[])}function zo(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=Yt(t);return Promise.resolve(n)}function iv(e){return Ct(this,void 0,void 0,function(){return Tt(this,function(t){return[2,e.isDirectory?cl(e):ov(e)]})})}function cl(e){var t=e.createReader();return new Promise(function(n,r){var i=[];function o(){var s=this;t.readEntries(function(a){return Ct(s,void 0,void 0,function(){var l,c,f;return Tt(this,function(d){switch(d.label){case 0:if(a.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=d.sent(),n(l),[3,4];case 3:return c=d.sent(),r(c),[3,4];case 4:return[3,6];case 5:f=Promise.all(a.map(iv)),i.push(f),o(),d.label=6;case 6:return[2]}})})},function(a){r(a)})}o()})}function ov(e){return Ct(this,void 0,void 0,function(){return Tt(this,function(t){return[2,new Promise(function(n,r){e.file(function(i){var o=Yt(i,e.fullPath);n(o)},function(i){r(i)})})]})})}var gn={},Uo;function sv(){return Uo||(Uo=1,gn.__esModule=!0,gn.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var r=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some(function(s){var a=s.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?o===a.replace(/\/.*$/,""):i===a})}return!0}),gn}var av=sv();const lv=Nn(av);function Lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lo(Object(n),!0).forEach(function(r){ul(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ul(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ho(e,t){return dv(e)||fv(e,t)||uv(e,t)||cv()}function cv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uv(e,t){if(e){if(typeof e=="string")return Wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wo(e,t)}}function Wo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fv(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,s,a;try{for(n=n.call(e);!(i=(s=n.next()).done)&&(r.push(s.value),!(t&&r.length===t));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw a}}return r}}function dv(e){if(Array.isArray(e))return e}var hv="file-invalid-type",pv="file-too-large",gv="file-too-small",mv="too-many-files",vv=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:hv,message:"File type must be ".concat(n)}},Vo=function(t){return{code:pv,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},Go=function(t){return{code:gv,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},bv={code:mv,message:"Too many files"};function fl(e,t){var n=e.type==="application/x-moz-file"||lv(e,t);return[n,n?null:vv(t)]}function dl(e,t,n){if(Dt(e.size))if(Dt(t)&&Dt(n)){if(e.size>n)return[!1,Vo(n)];if(e.size<t)return[!1,Go(t)]}else{if(Dt(t)&&e.size<t)return[!1,Go(t)];if(Dt(n)&&e.size>n)return[!1,Vo(n)]}return[!0,null]}function Dt(e){return e!=null}function yv(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,o=e.multiple,s=e.maxFiles;return!o&&t.length>1||o&&s>=1&&t.length>s?!1:t.every(function(a){var l=fl(a,n),c=Ho(l,1),f=c[0],d=dl(a,r,i),h=Ho(d,1),p=h[0];return f&&p})}function Dn(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function mn(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Ko(e){e.preventDefault()}function xv(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Sv(e){return e.indexOf("Edge/")!==-1}function wv(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return xv(e)||Sv(e)}function Te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return t.some(function(a){return!Dn(r)&&a&&a.apply(void 0,[r].concat(o)),Dn(r)})}}function Ev(){return"showOpenFilePicker"in window}function Rv(e){return e=typeof e=="string"?e.split(","):e,[{description:"everything",accept:Array.isArray(e)?e.filter(function(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||/\w+\/[-+.\w]+/g.test(t)}).reduce(function(t,n){return jo(jo({},t),{},ul({},n,[]))},{}):{}}]}function Cv(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Tv(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}var Mv=["children"],Pv=["open"],Ov=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_v=["refKey","onChange","onClick"];function Dv(e){return kv(e)||$v(e)||hl(e)||Av()}function Av(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $v(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kv(e){if(Array.isArray(e))return Zr(e)}function mr(e,t){return Bv(e)||Nv(e,t)||hl(e,t)||Iv()}function Iv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hl(e,t){if(e){if(typeof e=="string")return Zr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zr(e,t)}}function Zr(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nv(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,s,a;try{for(n=n.call(e);!(i=(s=n.next()).done)&&(r.push(s.value),!(t&&r.length===t));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw a}}return r}}function Bv(e){if(Array.isArray(e))return e}function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qo(Object(n),!0).forEach(function(r){Qr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function An(e,t){if(e==null)return{};var n=Fv(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fv(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var Mi=u.forwardRef(function(e,t){var n=e.children,r=An(e,Mv),i=gl(r),o=i.open,s=An(i,Pv);return u.useImperativeHandle(t,function(){return{open:o}},[o]),b.createElement(u.Fragment,null,n(X(X({},s),{},{open:o})))});Mi.displayName="Dropzone";var pl={disabled:!1,getFilesFromEvent:Zm,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Mi.defaultProps=pl;Mi.propTypes={children:Y.func,accept:Y.oneOfType([Y.string,Y.arrayOf(Y.string)]),multiple:Y.bool,preventDropOnDocument:Y.bool,noClick:Y.bool,noKeyboard:Y.bool,noDrag:Y.bool,noDragEventsBubbling:Y.bool,minSize:Y.number,maxSize:Y.number,maxFiles:Y.number,disabled:Y.bool,getFilesFromEvent:Y.func,onFileDialogCancel:Y.func,onFileDialogOpen:Y.func,useFsAccessApi:Y.bool,onDragEnter:Y.func,onDragLeave:Y.func,onDragOver:Y.func,onDrop:Y.func,onDropAccepted:Y.func,onDropRejected:Y.func,validator:Y.func};var Jr={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function gl(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=X(X({},pl),e),n=t.accept,r=t.disabled,i=t.getFilesFromEvent,o=t.maxSize,s=t.minSize,a=t.multiple,l=t.maxFiles,c=t.onDragEnter,f=t.onDragLeave,d=t.onDragOver,h=t.onDrop,p=t.onDropAccepted,g=t.onDropRejected,m=t.onFileDialogCancel,v=t.onFileDialogOpen,x=t.useFsAccessApi,y=t.preventDropOnDocument,w=t.noClick,E=t.noKeyboard,T=t.noDrag,C=t.noDragEventsBubbling,R=t.validator,O=u.useMemo(function(){return typeof v=="function"?v:Yo},[v]),k=u.useMemo(function(){return typeof m=="function"?m:Yo},[m]),M=u.useRef(null),P=u.useRef(null),_=u.useReducer(zv,Jr),I=mr(_,2),N=I[0],U=I[1],j=N.isFocused,W=N.isFileDialogActive,z=N.draggedFiles,G=u.useRef(typeof window<"u"&&window.isSecureContext&&x&&Ev()),ne=function(){!G.current&&W&&setTimeout(function(){if(P.current){var L=P.current.files;L.length||(U({type:"closeDialog"}),k())}},300)};u.useEffect(function(){return window.addEventListener("focus",ne,!1),function(){window.removeEventListener("focus",ne,!1)}},[P,W,k,G]);var pe=u.useRef([]),Xt=function(L){M.current&&M.current.contains(L.target)||(L.preventDefault(),pe.current=[])};u.useEffect(function(){return y&&(document.addEventListener("dragover",Ko,!1),document.addEventListener("drop",Xt,!1)),function(){y&&(document.removeEventListener("dragover",Ko),document.removeEventListener("drop",Xt))}},[M,y]);var Zt=u.useCallback(function(D){D.preventDefault(),D.persist(),sn(D),pe.current=[].concat(Dv(pe.current),[D.target]),mn(D)&&Promise.resolve(i(D)).then(function(L){Dn(D)&&!C||(U({draggedFiles:L,isDragActive:!0,type:"setDraggedFiles"}),c&&c(D))})},[i,c,C]),Qt=u.useCallback(function(D){D.preventDefault(),D.persist(),sn(D);var L=mn(D);if(L&&D.dataTransfer)try{D.dataTransfer.dropEffect="copy"}catch{}return L&&d&&d(D),!1},[d,C]),Jt=u.useCallback(function(D){D.preventDefault(),D.persist(),sn(D);var L=pe.current.filter(function(ue){return M.current&&M.current.contains(ue)}),ie=L.indexOf(D.target);ie!==-1&&L.splice(ie,1),pe.current=L,!(L.length>0)&&(U({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),mn(D)&&f&&f(D))},[M,f,C]),lt=u.useCallback(function(D,L){var ie=[],ue=[];D.forEach(function(ye){var Mt=fl(ye,n),ct=mr(Mt,2),Yn=ct[0],Xn=ct[1],Zn=dl(ye,s,o),an=mr(Zn,2),Qn=an[0],Jn=an[1],er=R?R(ye):null;if(Yn&&Qn&&!er)ie.push(ye);else{var tr=[Xn,Jn];er&&(tr=tr.concat(er)),ue.push({file:ye,errors:tr.filter(function(Al){return Al})})}}),(!a&&ie.length>1||a&&l>=1&&ie.length>l)&&(ie.forEach(function(ye){ue.push({file:ye,errors:[bv]})}),ie.splice(0)),U({acceptedFiles:ie,fileRejections:ue,type:"setFiles"}),h&&h(ie,ue,L),ue.length>0&&g&&g(ue,L),ie.length>0&&p&&p(ie,L)},[U,a,n,s,o,l,h,p,g,R]),Ce=u.useCallback(function(D){D.preventDefault(),D.persist(),sn(D),pe.current=[],mn(D)&&Promise.resolve(i(D)).then(function(L){Dn(D)&&!C||lt(L,D)}),U({type:"reset"})},[i,lt,C]),Ie=u.useCallback(function(){if(G.current){U({type:"openDialog"}),O();var D={multiple:a,types:Rv(n)};window.showOpenFilePicker(D).then(function(L){return i(L)}).then(function(L){lt(L,null),U({type:"closeDialog"})}).catch(function(L){Cv(L)?(k(L),U({type:"closeDialog"})):Tv(L)&&(G.current=!1,P.current&&(P.current.value=null,P.current.click()))});return}P.current&&(U({type:"openDialog"}),O(),P.current.value=null,P.current.click())},[U,O,k,x,lt,n,a]),en=u.useCallback(function(D){!M.current||!M.current.isEqualNode(D.target)||(D.key===" "||D.key==="Enter"||D.keyCode===32||D.keyCode===13)&&(D.preventDefault(),Ie())},[M,Ie]),tn=u.useCallback(function(){U({type:"focus"})},[]),nn=u.useCallback(function(){U({type:"blur"})},[]),rn=u.useCallback(function(){w||(wv()?setTimeout(Ie,0):Ie())},[w,Ie]),be=function(L){return r?null:L},qn=function(L){return E?null:be(L)},on=function(L){return T?null:be(L)},sn=function(L){C&&L.stopPropagation()},Pl=u.useMemo(function(){return function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=D.refKey,ie=L===void 0?"ref":L,ue=D.role,ye=D.onKeyDown,Mt=D.onFocus,ct=D.onBlur,Yn=D.onClick,Xn=D.onDragEnter,Zn=D.onDragOver,an=D.onDragLeave,Qn=D.onDrop,Jn=An(D,Ov);return X(X(Qr({onKeyDown:qn(Te(ye,en)),onFocus:qn(Te(Mt,tn)),onBlur:qn(Te(ct,nn)),onClick:be(Te(Yn,rn)),onDragEnter:on(Te(Xn,Zt)),onDragOver:on(Te(Zn,Qt)),onDragLeave:on(Te(an,Jt)),onDrop:on(Te(Qn,Ce)),role:typeof ue=="string"&&ue!==""?ue:"button"},ie,M),!r&&!E?{tabIndex:0}:{}),Jn)}},[M,en,tn,nn,rn,Zt,Qt,Jt,Ce,E,T,r]),Ol=u.useCallback(function(D){D.stopPropagation()},[]),_l=u.useMemo(function(){return function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=D.refKey,ie=L===void 0?"ref":L,ue=D.onChange,ye=D.onClick,Mt=An(D,_v),ct=Qr({accept:n,multiple:a,type:"file",style:{display:"none"},onChange:be(Te(ue,Ce)),onClick:be(Te(ye,Ol)),tabIndex:-1},ie,P);return X(X({},ct),Mt)}},[P,n,a,Ce,r]),_i=z.length,Di=_i>0&&yv({files:z,accept:n,minSize:s,maxSize:o,multiple:a,maxFiles:l}),Dl=_i>0&&!Di;return X(X({},N),{},{isDragAccept:Di,isDragReject:Dl,isFocused:j&&!r,getRootProps:Pl,getInputProps:_l,rootRef:M,inputRef:P,open:be(Ie)})}function zv(e,t){switch(t.type){case"focus":return X(X({},e),{},{isFocused:!0});case"blur":return X(X({},e),{},{isFocused:!1});case"openDialog":return X(X({},Jr),{},{isFileDialogActive:!0});case"closeDialog":return X(X({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,r=t.draggedFiles;return X(X({},e),{},{draggedFiles:r,isDragActive:n});case"setFiles":return X(X({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return X({},Jr);default:return e}}function Yo(){}function Uv(e){let t;const n=new Set,r=(c,f)=>{const d=typeof c=="function"?c(t):c;if(d!==t){const h=t;t=f?d:Object.assign({},t,d),n.forEach(p=>p(t,h))}},i=()=>t,o=(c,f=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=f(t);function p(){const g=f(t);if(!d(h,g)){const m=h;c(h=g,m)}}return n.add(p),()=>n.delete(p)},l={setState:r,getState:i,subscribe:(c,f,d)=>f||d?o(c,f,d):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return t=e(r,i,l),l}const Lv=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Xo=Lv?u.useEffect:u.useLayoutEffect;function jv(e){const t=typeof e=="function"?Uv(e):e,n=(r=t.getState,i=Object.is)=>{const[,o]=u.useReducer(v=>v+1,0),s=t.getState(),a=u.useRef(s),l=u.useRef(r),c=u.useRef(i),f=u.useRef(!1),d=u.useRef();d.current===void 0&&(d.current=r(s));let h,p=!1;(a.current!==s||l.current!==r||c.current!==i||f.current)&&(h=r(s),p=!i(d.current,h)),Xo(()=>{p&&(d.current=h),a.current=s,l.current=r,c.current=i,f.current=!1});const g=u.useRef(s);Xo(()=>{const v=()=>{try{const y=t.getState(),w=l.current(y);c.current(d.current,w)||(a.current=y,d.current=w,o())}catch{f.current=!0,o()}},x=t.subscribe(v);return t.getState()!==g.current&&v(),x},[]);const m=p?h:d.current;return u.useDebugValue(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}const Hv=e=>(t,n,r)=>{const i=r.subscribe;return r.subscribe=(s,a,l)=>{let c=s;if(a){const f=l?.equalityFn||Object.is;let d=s(r.getState());c=h=>{const p=s(h);if(!f(d,p)){const g=d;a(d=p,g)}},l?.fireImmediately&&a(d,d)}return i(c)},e(t,n,r)};var vr,Zo;function Wv(){return Zo||(Zo=1,vr=function(t){return t!=null&&typeof t=="object"&&Array.isArray(t)===!1}),vr}var br,Qo;function ml(){if(Qo)return br;Qo=1;var e=Wv();function t(n){return e(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}return br=function(r){var i,o;return!(t(r)===!1||(i=r.constructor,typeof i!="function")||(o=i.prototype,t(o)===!1)||o.hasOwnProperty("isPrototypeOf")===!1)},br}var yr,Jo;function Pi(){if(Jo)return yr;Jo=1;var e=ml();return yr=function(n){return e(n)||typeof n=="function"||Array.isArray(n)},yr}var xr,es;function Vv(){return es||(es=1,xr=function(t,n,r){for(var i in t)if(n.call(r,t[i],i,t)===!1)break}),xr}var Sr,ts;function Gv(){if(ts)return Sr;ts=1;var e=Pi(),t=Vv();function n(s,a){for(var l=arguments.length,c=0;++c<l;){var f=arguments[c];i(f)&&t(f,r,s)}return s}function r(s,a){if(o(a)){var l=this[a];i(s)&&i(l)?n(l,s):this[a]=s}}function i(s){return e(s)&&!Array.isArray(s)}function o(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return Sr=n,Sr}var wr,ns;function Kv(){if(ns)return wr;ns=1,wr=function(n,r,i,o,s){if(!e(n)||!r)return n;if(r=t(r),i&&(r+="."+t(i)),o&&(r+="."+t(o)),s&&(r+="."+t(s)),r in n)return n[r];for(var a=r.split("."),l=a.length,c=-1;n&&++c<l;){for(var f=a[c];f[f.length-1]==="\\";)f=f.slice(0,-1)+"."+a[++c];n=n[f]}return n};function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function t(n){return n?Array.isArray(n)?n.join("."):n:""}return wr}var Er,rs;function qv(){return rs||(rs=1,Er=function(e,t){if(e===null||typeof e>"u")throw new TypeError("expected first argument to be an object.");if(typeof t>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return e;for(var n=Object.prototype.propertyIsEnumerable,r=Object(e),i=arguments.length,o=0;++o<i;)for(var s=Object(arguments[o]),a=Object.getOwnPropertySymbols(s),l=0;l<a.length;l++){var c=a[l];n.call(s,c)&&(r[c]=s[c])}return r}),Er}var Rr,is;function Yv(){if(is)return Rr;is=1;var e=Pi(),t=qv();Rr=Object.assign||function(a){if(a===null||typeof a>"u")throw new TypeError("Cannot convert undefined or null to object");o(a)||(a={});for(var l=1;l<arguments.length;l++){var c=arguments[l];r(c)&&(c=i(c)),o(c)&&(n(a,c),t(a,c))}return a};function n(a,l){for(var c in l)s(l,c)&&(a[c]=l[c])}function r(a){return a&&typeof a=="string"}function i(a){var l={};for(var c in a)l[c]=a[c];return l}function o(a){return a&&typeof a=="object"||e(a)}function s(a,l){return Object.prototype.hasOwnProperty.call(a,l)}return Rr}var Cr,os;function Xv(){if(os)return Cr;os=1;var e=Yv();Cr=function(i,o,s){if(typeof i!="string")throw new TypeError("expected a string");typeof o=="function"&&(s=o,o=null),typeof o=="string"&&(o={sep:o});var a=e({sep:"."},o),l=a.quotes||['"',"'","`"],c;a.brackets===!0?c={"<":">","(":")","[":"]","{":"}"}:a.brackets&&(c=a.brackets);var f=[],d=[],h=[""],p=a.sep,g=i.length,m=-1,v;function x(){if(c&&d.length)return c[d[d.length-1]]}for(;++m<g;){var y=i[m],w=i[m+1],E={val:y,idx:m,arr:h,str:i};if(f.push(E),y==="\\"){E.val=r(a,i,m)===!0?y+w:w,E.escaped=!0,typeof s=="function"&&s(E),h[h.length-1]+=E.val,m++;continue}if(c&&c[y]){d.push(y);var T=x(),C=m+1;if(i.indexOf(T,C+1)!==-1)for(;d.length&&C<g;){var R=i[++C];if(R==="\\"){R++;continue}if(l.indexOf(R)!==-1){C=t(i,R,C+1);continue}if(T=x(),d.length&&i.indexOf(T,C+1)===-1)break;if(c[R]){d.push(R);continue}T===R&&d.pop()}if(v=C,v===-1){h[h.length-1]+=y;continue}y=i.slice(m,v+1),E.val=y,E.idx=m=v}if(l.indexOf(y)!==-1){if(v=t(i,y,m+1),v===-1){h[h.length-1]+=y;continue}n(y,a)===!0?y=i.slice(m,v+1):y=i.slice(m+1,v),E.val=y,E.idx=m=v}if(typeof s=="function"&&(s(E,f),y=E.val,m=E.idx),E.val===p&&E.split!==!1){h.push("");continue}h[h.length-1]+=E.val}return h};function t(i,o,s,a){var l=i.indexOf(o,s);return i.charAt(l-1)==="\\"?t(i,o,l+1):l}function n(i,o){return o.keepDoubleQuotes===!0&&i==='"'||o.keepSingleQuotes===!0&&i==="'"?!0:o.keepQuotes}function r(i,o,s){return typeof i.keepEscaping=="function"?i.keepEscaping(o,s):i.keepEscaping===!0||o[s+1]==="\\"}return Cr}var Tr,ss;function Zv(){return ss||(ss=1,Tr=function(t){return typeof t<"u"&&t!==null&&(typeof t=="object"||typeof t=="function")}),Tr}var Mr,as;function Qv(){if(as)return Mr;as=1;var e=Zv();Mr=function(i){e(i)||(i={});for(var o=arguments.length,s=1;s<o;s++){var a=arguments[s];e(a)&&t(i,a)}return i};function t(r,i){for(var o in i)n(i,o)&&(r[o]=i[o])}function n(r,i){return Object.prototype.hasOwnProperty.call(r,i)}return Mr}var Pr,ls;function Jv(){return ls||(ls=1,Pr=function(t){return typeof t<"u"&&t!==null&&(typeof t=="object"||typeof t=="function")}),Pr}var Or,cs;function e0(){if(cs)return Or;cs=1;var e=Xv(),t=Qv(),n=ml(),r=Jv();Or=function(o,s,a){if(!r(o)||(Array.isArray(s)&&(s=[].concat.apply([],s).join(".")),typeof s!="string"))return o;for(var l=e(s,{sep:".",brackets:!0}).filter(i),c=l.length,f=-1,d=o;++f<c;){var h=l[f];if(f!==c-1){r(d[h])||(d[h]={}),d=d[h];continue}n(d[h])&&n(a)?d[h]=t({},d[h],a):d[h]=a}return o};function i(o){return o!=="__proto__"&&o!=="constructor"&&o!=="prototype"}return Or}var _r,us;function t0(){if(us)return _r;us=1;var e=Pi(),t=Gv(),n=Kv(),r=e0();return _r=function(o,s,a){if(!e(o))throw new TypeError("expected an object");if(typeof s!="string"||a==null)return t.apply(null,arguments);if(typeof a=="string")return r(o,s,a),o;var l=n(o,s);return e(a)&&e(l)&&(a=t({},l,a)),r(o,s,a),o},_r}var n0=t0();const r0=Nn(n0),Oi=(...e)=>e.filter(Boolean).join(".");function i0(e){const t=e.split(".");return[t.pop(),t.join(".")||void 0]}function o0(e,t){return Object.entries(Yp(e,t)).reduce((n,[,{value:r,disabled:i,key:o}])=>(n[o]=i?void 0:r,n),{})}function s0(e,t){const n=u.useRef();return Ft(e,n.current)||(n.current=e),n.current}function vl(e,t){var n;return u.useMemo(e,(n=s0(t))!==null&&n!==void 0?n:[])}function a0(e){const t=u.useRef(null),n=u.useRef(null),r=u.useRef(!0);return u.useLayoutEffect(()=>{e||(t.current.style.height="0px",t.current.style.overflow="hidden")},[]),u.useEffect(()=>{if(r.current){r.current=!1;return}let i;const o=t.current,s=()=>{e&&(o.style.removeProperty("height"),o.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};o.addEventListener("transitionend",s,{once:!0});const{height:a}=n.current.getBoundingClientRect();return o.style.height=a+"px",e||(o.style.overflow="hidden",i=window.setTimeout(()=>o.style.height="0px",50)),()=>{o.removeEventListener("transitionend",s),clearTimeout(i)}},[e]),{wrapperRef:t,contentRef:n}}const l0=e=>{const[t,n]=u.useState(e.getVisiblePaths());return u.useEffect(()=>{n(e.getVisiblePaths());const r=e.useStore.subscribe(e.getVisiblePaths,n,{equalityFn:Fn});return()=>r()},[e]),t};function c0(e,t,n){return e.useStore(i=>{const o=F(F({},n),i.data);return o0(o,t)},Fn)}function bl(e=3){const t=u.useRef(null),n=u.useRef(null),[r,i]=u.useState(!1),o=u.useCallback(()=>i(!0),[]),s=u.useCallback(()=>i(!1),[]);return u.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:c}=t.current.getBoundingClientRect(),{height:f}=n.current.getBoundingClientRect(),d=a+f>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=c+"px",d==="down"?n.current.style.top=a+e+"px":n.current.style.bottom=window.innerHeight-l+e+"px"}},[e,r]),{popinRef:t,wrapperRef:n,shown:r,show:o,hide:s}}Dm([Am]);const u0={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};fe.extend({color:()=>e=>ae(e).isValid()});const f0=e=>fe().color().test(e);function yl(e,{format:t,hasAlpha:n,isString:r}){const i=u0[t]+(r&&t!=="hex"?"String":""),o=e[i]();return typeof o=="object"&&!n?Xp(o,["a"]):o}const xl=(e,t)=>{const n=ae(e);if(!n.isValid())throw Error("Invalid color");return yl(n,t)},d0=(e,t)=>yl(ae(e),F(F({},t),{},{isString:!0,format:"hex"})),h0=({value:e})=>{const t=_m(e),n=t==="name"?"hex":t,r=typeof e=="object"?"a"in e:t==="hex"&&e.length===8||/^(rgba)|(hsla)|(hsva)/.test(e),i={format:n,hasAlpha:r,isString:typeof e=="string"};return{value:xl(e,i),settings:i}};var p0=Object.freeze({__proto__:null,schema:f0,sanitize:xl,format:d0,normalize:h0});const g0=B("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),m0=B("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),v0=B("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function fs(e,t){return t!=="rgb"?ae(e).toRgb():e}function b0({value:e,displayValue:t,settings:n,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:o}=oe(),{format:s,hasAlpha:a}=n,{popinRef:l,wrapperRef:c,shown:f,show:d,hide:h}=bl(),p=u.useRef(0),[g,m]=u.useState(()=>fs(e,s)),v=a?zm:Lm,x=()=>{m(fs(e,s)),d(),i()},y=()=>{h(),o(),window.clearTimeout(p.current)},w=()=>{p.current=window.setTimeout(y,500)};return u.useEffect(()=>()=>window.clearTimeout(p.current),[]),b.createElement(b.Fragment,null,b.createElement(g0,{ref:l,active:f,onClick:()=>x(),style:{color:t}}),f&&b.createElement(xi,null,b.createElement(ja,{onPointerUp:y}),b.createElement(v0,{ref:c,onMouseEnter:()=>window.clearTimeout(p.current),onMouseLeave:E=>E.buttons===0&&w()},b.createElement(v,{color:g,onChange:r}))))}function y0(){const{value:e,displayValue:t,label:n,onChange:r,onUpdate:i,settings:o}=oe();return b.createElement(ve,{input:!0},b.createElement(Re,null,n),b.createElement(m0,null,b.createElement(b0,{value:e,displayValue:t,onChange:r,onUpdate:i,settings:o}),b.createElement(yi,{value:t,onChange:r,onUpdate:i})))}var x0=F({component:y0},p0);function S0(){const{label:e,displayValue:t,onUpdate:n,settings:r}=oe();return b.createElement(ve,{input:!0},b.createElement(Re,null,e),b.createElement(wi,{value:t,settings:r,onUpdate:n}))}var w0=F({component:S0},Xa(["x","y","z"]));const E0=B("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),R0=B("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function C0({value:e,settings:t,onUpdate:n}){const r=u.useRef(),i=u.useRef(0),o=u.useRef(0),s=u.useRef(1),[a,l]=u.useState(!1),[c,f]=u.useState(!1),[d,h]=Wa(),p=u.useRef(null),g=u.useRef(null);u.useLayoutEffect(()=>{if(a){const{top:_,left:I,width:N,height:U}=p.current.getBoundingClientRect();g.current.style.left=I+N/2+"px",g.current.style.top=_+U/2+"px"}},[a]);const{keys:[m,v],joystick:x}=t,y=x==="invertY"?1:-1,{[m]:{step:w},[v]:{step:E}}=t,T=Le("sizes","joystickWidth"),C=Le("sizes","joystickHeight"),R=parseFloat(T)*.8/2,O=parseFloat(C)*.8/2,k=u.useCallback(()=>{r.current||(f(!0),i.current&&h({x:i.current*R}),o.current&&h({y:o.current*-O}),r.current=window.setInterval(()=>{n(_=>{const I=w*i.current*s.current,N=y*E*o.current*s.current;return Array.isArray(_)?{[m]:_[0]+I,[v]:_[1]+N}:{[m]:_[m]+I,[v]:_[v]+N}})},16))},[R,O,n,h,w,E,m,v,y]),M=u.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,f(!1)},[]);u.useEffect(()=>{function _(I){s.current=Pa(I)}return window.addEventListener("keydown",_),window.addEventListener("keyup",_),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",_),window.removeEventListener("keyup",_)}},[]);const P=Kt(({first:_,active:I,delta:[N,U],movement:[j,W]})=>{_&&l(!0);const z=Je(j,-R,R),G=Je(W,-O,O);i.current=Math.abs(j)>Math.abs(z)?Math.sign(j-z):0,o.current=Math.abs(W)>Math.abs(G)?Math.sign(G-W):0;let ne=e[m],pe=e[v];I?(i.current||(ne+=N*w*s.current,h({x:z})),o.current||(pe-=y*U*E*s.current,h({y:G})),i.current||o.current?k():M(),n({[m]:ne,[v]:pe})):(l(!1),i.current=0,o.current=0,h({x:0,y:0}),M())});return b.createElement(E0,Z({ref:p},P()),a&&b.createElement(xi,null,b.createElement(R0,{ref:g,isOutOfBounds:c},b.createElement("div",null),b.createElement("span",{ref:d}))))}const T0=B("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function M0(){const{label:e,displayValue:t,onUpdate:n,settings:r}=oe();return b.createElement(ve,{input:!0},b.createElement(Re,null,e),b.createElement(T0,{withJoystick:!!r.joystick},r.joystick&&b.createElement(C0,{value:t,settings:r,onUpdate:n}),b.createElement(wi,{value:t,settings:r,onUpdate:n})))}const P0=["joystick"],Sl=Xa(["x","y"]),O0=e=>{let{joystick:t=!0}=e,n=q(e,P0);const{value:r,settings:i}=Sl.normalize(n);return{value:r,settings:F(F({},i),{},{joystick:t})}};var _0=F(F({component:M0},Sl),{},{normalize:O0});const D0=e=>{if(e!==void 0){if(e instanceof File)try{return URL.createObjectURL(e)}catch{return}if(typeof e=="string"&&e.indexOf("blob:")===0)return e;throw Error("Invalid image format [undefined | blob |File].")}},A0=(e,t)=>typeof t=="object"&&"image"in t,$0=({image:e})=>({value:e});var k0=Object.freeze({__proto__:null,sanitize:D0,schema:A0,normalize:$0});const I0=B("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),N0=B("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),B0=B("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),F0=B("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),z0=B("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),U0=B("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function L0(){const{label:e,value:t,onUpdate:n,disabled:r}=oe(),{popinRef:i,wrapperRef:o,shown:s,show:a,hide:l}=bl(),c=u.useCallback(g=>{g.length&&n(g[0])},[n]),f=u.useCallback(g=>{g.stopPropagation(),n(void 0)},[n]),{getRootProps:d,getInputProps:h,isDragAccept:p}=gl({maxFiles:1,accept:"image/*",onDrop:c,disabled:r});return b.createElement(ve,{input:!0},b.createElement(Re,null,e),b.createElement(I0,null,b.createElement(B0,{ref:i,hasImage:!!t,onPointerDown:()=>!!t&&a(),onPointerUp:l,style:{backgroundImage:t?`url(${t})`:"none"}}),s&&!!t&&b.createElement(xi,null,b.createElement(ja,{onPointerUp:l,style:{cursor:"pointer"}}),b.createElement(F0,{ref:o,style:{backgroundImage:`url(${t})`}})),b.createElement(N0,d({isDragAccept:p}),b.createElement("input",h()),b.createElement(z0,null,p?"drop image":"click or drop")),b.createElement(U0,{onClick:f,disabled:!t})))}var j0=F({component:L0},k0);const ds=fe().number(),H0=(e,t)=>fe().array().length(2).every.number().test(e)&&fe().schema({min:ds,max:ds}).test(t),$n=e=>({min:e[0],max:e[1]}),wl=(e,{bounds:[t,n]},r)=>{const i=Array.isArray(e)?$n(e):e,o={min:r[0],max:r[1]},{min:s,max:a}=F(F({},o),i);return[Je(Number(s),t,Math.max(t,a)),Je(Number(a),Math.min(n,s),n)]},W0=({value:e,min:t,max:n})=>{const r={min:t,max:n},i=Ya($n(e),{min:r,max:r}),o=[t,n],s=F(F({},i),{},{bounds:o});return{value:wl($n(e),s,e),settings:s}};var V0=Object.freeze({__proto__:null,schema:H0,format:$n,sanitize:wl,normalize:W0});const G0=["value","bounds","onDrag"],K0=["bounds"],q0=B("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Y0(e){let{value:t,bounds:[n,r],onDrag:i}=e,o=q(e,G0);const s=u.useRef(null),a=u.useRef(null),l=u.useRef(null),c=u.useRef(0),f=Le("sizes","scrubberWidth"),d=Kt(({event:g,first:m,xy:[v],movement:[x],memo:y={}})=>{if(m){const{width:E,left:T}=s.current.getBoundingClientRect();c.current=E-parseFloat(f);const C=g?.target===a.current||g?.target===l.current;y.pos=Pn((v-T)/E,n,r);const R=Math.abs(y.pos-t.min)-Math.abs(y.pos-t.max);y.key=R<0||R===0&&y.pos<=t.min?"min":"max",C&&(y.pos=t[y.key])}const w=y.pos+Pn(x/c.current,0,r-n);return i({[y.key]:Bg(w,o[y.key])}),y}),h=`calc(${Mn(t.min,n,r)} * (100% - ${f} - 8px) + 4px)`,p=`calc(${1-Mn(t.max,n,r)} * (100% - ${f} - 8px) + 4px)`;return b.createElement(Ga,Z({ref:s},d()),b.createElement(Va,null,b.createElement(Ka,{style:{left:h,right:p}})),b.createElement(Hr,{position:"left",ref:a,style:{left:h}}),b.createElement(Hr,{position:"right",ref:l,style:{right:p}}))}function X0(){const{label:e,displayValue:t,onUpdate:n,settings:r}=oe(),i=q(r,K0);return b.createElement(b.Fragment,null,b.createElement(ve,{input:!0},b.createElement(Re,null,e),b.createElement(q0,null,b.createElement(Y0,Z({value:t},r,{onDrag:n})),b.createElement(wi,{value:t,settings:i,onUpdate:n,innerLabelTrim:0}))))}var Z0=F({component:X0},V0);const Q0=()=>{const e=new Map;return{on:(t,n)=>{let r=e.get(t);r===void 0&&(r=new Set,e.set(t,r)),r.add(n)},off:(t,n)=>{const r=e.get(t);r!==void 0&&(r.delete(n),r.size===0&&e.delete(t))},emit:(t,...n)=>{const r=e.get(t);if(r!==void 0)for(const i of r)i(...n)}}},J0=["type","value"],eb=["onChange","transient","onEditStart","onEditEnd"],tb=function(){const t=jv(Hv(()=>({data:{}}))),n=Q0();this.storeId=qp(),this.useStore=t;const r={},i=new Set;this.getVisiblePaths=()=>{const s=this.getData(),a=Object.keys(s),l=[];Object.entries(r).forEach(([f,d])=>{d.render&&a.some(h=>h.indexOf(f)===0)&&!d.render(this.get)&&l.push(f+".")});const c=[];return i.forEach(f=>{f in s&&s[f].__refCount>0&&l.every(d=>f.indexOf(d)===-1)&&(!s[f].render||s[f].render(this.get))&&c.push(f)}),c},this.setOrderedPaths=s=>{s.forEach(a=>i.add(a))},this.orderPaths=s=>(this.setOrderedPaths(s),s),this.disposePaths=s=>{t.setState(a=>{const l=a.data;return s.forEach(c=>{if(c in l){const f=l[c];f.__refCount--,f.__refCount===0&&f.type in Oe&&delete l[c]}}),{data:l}})},this.dispose=()=>{t.setState(()=>({data:{}}))},this.getFolderSettings=s=>r[s]||{},this.getData=()=>t.getState().data,this.addData=(s,a)=>{t.setState(l=>{const c=l.data;return Object.entries(s).forEach(([f,d])=>{let h=c[f];if(h){const{type:p,value:g}=d,m=q(d,J0);p!==h.type?Fe(J.INPUT_TYPE_OVERRIDE,f,h.type,p):((h.__refCount===0||a)&&Object.assign(h,m),h.__refCount++)}else c[f]=F(F({},d),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(s,a,l)=>{t.setState(c=>{const f=c.data;return Ro(f[s],a,s,this,l),{data:f}})},this.setSettingsAtPath=(s,a)=>{t.setState(l=>{const c=l.data;return c[s].settings=F(F({},c[s].settings),a),{data:c}})},this.disableInputAtPath=(s,a)=>{t.setState(l=>{const c=l.data;return c[s].disabled=a,{data:c}})},this.set=(s,a)=>{t.setState(l=>{const c=l.data;return Object.entries(s).forEach(([f,d])=>{try{Ro(c[f],d,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=s=>{try{return this.getData()[s]}catch{Fe(J.PATH_DOESNT_EXIST,s)}},this.get=s=>{var a;return(a=this.getInput(s))===null||a===void 0?void 0:a.value},this.emitOnEditStart=s=>{n.emit(`onEditStart:${s}`,this.get(s),s,F(F({},this.getInput(s)),{},{get:this.get}))},this.emitOnEditEnd=s=>{n.emit(`onEditEnd:${s}`,this.get(s),s,F(F({},this.getInput(s)),{},{get:this.get}))},this.subscribeToEditStart=(s,a)=>{const l=`onEditStart:${s}`;return n.on(l,a),()=>n.off(l,a)},this.subscribeToEditEnd=(s,a)=>{const l=`onEditEnd:${s}`;return n.on(l,a),()=>n.off(l,a)};const o=(s,a,l)=>{const c={};return Object.entries(s).forEach(([f,d])=>{if(f==="")return Fe(J.EMPTY_KEY);let h=Oi(a,f);if(d.type===Oe.FOLDER){const p=o(d.schema,h,l);Object.assign(c,p),h in r||(r[h]=d.settings)}else if(f in l)Fe(J.DUPLICATE_KEYS,f,h,l[f].path);else{const p=ng(d,f,h,c);if(p){const{type:g,options:m,input:v}=p,{onChange:x,transient:y,onEditStart:w,onEditEnd:E}=m,T=q(m,eb);c[h]=F(F(F({type:g},T),v),{},{fromPanel:!0}),l[f]={path:h,onChange:x,transient:y,onEditStart:w,onEditEnd:E}}else Fe(J.UNKNOWN_INPUT,h,d)}}),c};this.getDataFromSchema=s=>{const a={};return[o(s,"",a),a]}},El=new tb,nb={collapsed:!1};function bn(e,t){return{type:Oe.FOLDER,schema:e,settings:F(F({},nb),t)}}const rb={disabled:!1};function ib(e,t){return{type:Oe.BUTTON,onClick:e,settings:F(F({},rb),t)}}const hs=e=>"__levaInput"in e,ob=(e,t)=>{const n={},r=t?t.toLowerCase():null;return e.forEach(i=>{const[o,s]=i0(i);(!r||o.toLowerCase().indexOf(r)>-1)&&r0(n,s,{[o]:{__levaInput:!0,path:i}})}),n},sb=["type","label","path","valueKey","value","settings","setValue","disabled"];function ab(e){let{type:t,label:n,path:r,valueKey:i,value:o,settings:s,setValue:a,disabled:l}=e,c=q(e,sb);const{displayValue:f,onChange:d,onUpdate:h}=Ha({type:t,value:o,settings:s,setValue:a}),p=ot[t].component;return p?b.createElement($a.Provider,{value:F({key:i,path:r,id:""+r,label:n,displayValue:f,value:o,onChange:d,onUpdate:h,settings:s,setValue:a,disabled:l},c)},b.createElement(Sg,{disabled:l},b.createElement(p,null))):(Fe(J.NO_COMPONENT_FOR_TYPE,t,r),null)}const lb=B("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function cb({onClick:e,settings:t,label:n}){const r=Vt();return b.createElement(ve,null,b.createElement(lb,{disabled:t.disabled,onClick:()=>e(r.get)},n))}const ub=B("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),fb=B("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),db=({label:e,opts:t})=>{let n=typeof e=="string"&&e.trim()===""?null:e,r=t;return typeof t.opts=="object"&&(r.label!==void 0&&(n=t.label),r=t.opts),{label:n,opts:r}};function hb(e){const{label:t,opts:n}=db(e),r=Vt();return b.createElement(ve,{input:!!t},t&&b.createElement(Re,null,t),b.createElement(ub,null,Object.entries(n).map(([i,o])=>b.createElement(fb,{key:i,onClick:()=>o(r.get)},i))))}const pb=B("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),Rl=100;function gb(e,t){e.push(t),e.length>Rl&&e.shift()}const mb=u.forwardRef(function({initialValue:e},t){const n=Le("colors","highlight3"),r=Le("colors","elevation2"),i=Le("colors","highlight1"),[o,s]=u.useMemo(()=>[ae(i).alpha(.4).toRgbString(),ae(i).alpha(.1).toRgbString()],[i]),a=u.useRef([e]),l=u.useRef(e),c=u.useRef(e),f=u.useRef(),d=u.useCallback((g,m)=>{if(!g)return;const{width:v,height:x}=g,y=new Path2D,w=v/Rl,E=x*.05;for(let R=0;R<a.current.length;R++){const O=Mn(a.current[R],l.current,c.current),k=w*R,M=x-O*(x-E*2)-E;y.lineTo(k,M)}m.clearRect(0,0,v,x);const T=new Path2D(y);T.lineTo(w*(a.current.length+1),x),T.lineTo(0,x),T.lineTo(0,0);const C=m.createLinearGradient(0,0,0,x);C.addColorStop(0,o),C.addColorStop(1,s),m.fillStyle=C,m.fill(T),m.strokeStyle=r,m.lineJoin="round",m.lineWidth=14,m.stroke(y),m.strokeStyle=n,m.lineWidth=2,m.stroke(y)},[n,r,o,s]),[h,p]=_g(d);return u.useImperativeHandle(t,()=>({frame:g=>{(l.current===void 0||g<l.current)&&(l.current=g),(c.current===void 0||g>c.current)&&(c.current=g),gb(a.current,g),f.current=requestAnimationFrame(()=>d(h.current,p.current))}}),[h,p,d]),u.useEffect(()=>()=>cancelAnimationFrame(f.current),[]),b.createElement(pb,{ref:h})}),ps=e=>Number.isFinite(e)?e.toPrecision(2):e.toString(),vb=u.forwardRef(function({initialValue:e},t){const[n,r]=u.useState(ps(e));return u.useImperativeHandle(t,()=>({frame:i=>r(ps(i))}),[]),b.createElement("div",null,n)});function gs(e){return typeof e=="function"?e():e.current}function bb({label:e,objectOrFn:t,settings:n}){const r=u.useRef(),i=u.useRef(gs(t));return u.useEffect(()=>{const o=window.setInterval(()=>{var s;document.hidden||(s=r.current)===null||s===void 0||s.frame(gs(t))},n.interval);return()=>window.clearInterval(o)},[t,n.interval]),b.createElement(ve,{input:!0},b.createElement(Re,{align:"top"},e),n.graph?b.createElement(mb,{ref:r,initialValue:i.current}):b.createElement(vb,{ref:r,initialValue:i.current}))}const yb=["type","label","key"],xb={[Oe.BUTTON]:cb,[Oe.BUTTON_GROUP]:hb,[Oe.MONITOR]:bb},Sb=b.memo(({path:e})=>{const[t,{set:n,setSettings:r,disable:i,storeId:o,emitOnEditStart:s,emitOnEditEnd:a}]=Ag(e);if(!t)return null;const{type:l,label:c,key:f}=t,d=q(t,yb);if(l in Oe){const h=xb[l];return b.createElement(h,Z({label:c,path:e},d))}return l in ot?b.createElement(ab,Z({key:o+e,type:l,label:c,storeId:o,path:e,valueKey:f,setValue:n,setSettings:r,disable:i,emitOnEditStart:s,emitOnEditEnd:a},d)):(Fp(J.UNSUPPORTED_INPUT,l,e),null)});function wb({toggle:e,toggled:t,name:n}){return b.createElement(bg,{onClick:()=>e()},b.createElement(Si,{toggled:t}),b.createElement("div",null,n))}const Eb=({name:e,path:t,tree:n})=>{const r=Vt(),i=Oi(t,e),{collapsed:o,color:s}=r.getFolderSettings(i),[a,l]=u.useState(!o),c=u.useRef(null),f=Le("colors","folderWidgetColor"),d=Le("colors","folderTextColor");return u.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",s||f),c.current.style.setProperty("--leva-colors-folderTextColor",s||d)},[s,f,d]),b.createElement(On,{ref:c},b.createElement(wb,{name:e,toggled:a,toggle:()=>l(h=>!h)}),b.createElement(Cl,{parent:i,tree:n,toggled:a}))},Cl=b.memo(({isRoot:e=!1,fill:t=!1,flat:n=!1,parent:r,tree:i,toggled:o})=>{const{wrapperRef:s,contentRef:a}=a0(o),l=Vt(),c=([d,h])=>{var p;return(hs(h)?(p=l.getInput(h.path))===null||p===void 0?void 0:p.order:l.getFolderSettings(Oi(r,d)).order)||0},f=Object.entries(i).sort((d,h)=>c(d)-c(h));return b.createElement(Lr,{ref:s,isRoot:e,fill:t,flat:n},b.createElement(za,{ref:a,isRoot:e,toggled:o},f.map(([d,h])=>hs(h)?b.createElement(Sb,{key:h.path,valueKey:h.valueKey,path:h.path}):b.createElement(Eb,{key:d,name:d,path:r,tree:h}))))}),Rb=B("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${La}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),Tl=40,kn=B("i",{$flexCenter:"",width:Tl,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),Cb=B("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),Tb=B("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${kn}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),Mb=B("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Pb=B("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:Tl}}}}),Ob=b.forwardRef(({setFilter:e,toggle:t},n)=>{const[r,i]=u.useState(""),o=u.useMemo(()=>Ma(e,250),[e]),s=()=>{e(""),i("")},a=l=>{const c=l.currentTarget.value;t(!0),i(c)};return u.useEffect(()=>{o(r)},[r,o]),b.createElement(b.Fragment,null,b.createElement(Mb,{ref:n,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),b.createElement(kn,{onClick:()=>s(),style:{visibility:r?"visible":"hidden"}},b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},b.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function _b({setFilter:e,onDrag:t,onDragStart:n,onDragEnd:r,toggle:i,toggled:o,title:s,drag:a,filterEnabled:l,from:c}){const[f,d]=u.useState(!1),h=u.useRef(null);u.useEffect(()=>{var g,m;f?(g=h.current)===null||g===void 0||g.focus():(m=h.current)===null||m===void 0||m.blur()},[f]);const p=Kt(({offset:[g,m],first:v,last:x})=>{t({x:g,y:m}),v&&n({x:g,y:m}),x&&r({x:g,y:m})},{filterTaps:!0,from:({offset:[g,m]})=>[c?.x||g,c?.y||m]});return u.useEffect(()=>{const g=m=>{m.key==="L"&&m.shiftKey&&m.metaKey&&d(v=>!v)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]),b.createElement(b.Fragment,null,b.createElement(Cb,{mode:a?"drag":void 0},b.createElement(kn,{active:!o,onClick:()=>i()},b.createElement(Si,{toggled:o,width:12,height:8})),b.createElement(Pb,Z({},a?p():{},{drag:a,filterEnabled:l}),s===void 0&&a?b.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},b.createElement("circle",{cx:"2",cy:"2",r:"2"}),b.createElement("circle",{cx:"14",cy:"2",r:"2"}),b.createElement("circle",{cx:"26",cy:"2",r:"2"}),b.createElement("circle",{cx:"2",cy:"12",r:"2"}),b.createElement("circle",{cx:"14",cy:"12",r:"2"}),b.createElement("circle",{cx:"26",cy:"12",r:"2"})):s),l&&b.createElement(kn,{active:f,onClick:()=>d(g=>!g)},b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},b.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),b.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),b.createElement(Tb,{toggled:f},b.createElement(Ob,{ref:h,setFilter:e,toggle:i})))}const Db=["store","hidden","theme","collapsed"];function Ab(e){let{store:t,hidden:n=!1,theme:r,collapsed:i=!1}=e,o=q(e,Db);const s=vl(()=>dg(r),[r]),[a,l]=u.useState(!i),c=typeof i=="object"?!i.collapsed:a,f=u.useMemo(()=>typeof i=="object"?d=>{typeof d=="function"?i.onChange(!d(!i.collapsed)):i.onChange(!d)}:l,[i]);return!t||n?null:b.createElement(bi.Provider,{value:s},b.createElement($b,Z({store:t},o,{toggled:c,setToggle:f,rootClass:s.className})))}const $b=b.memo(({store:e,rootClass:t,fill:n=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:o=!1,titleBar:s={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var f,d;const h=l0(e),[p,g]=u.useState(""),m=u.useMemo(()=>ob(h,p),[h,p]),[v,x]=Wa(),y=i||h.length>0,w=typeof s=="object"&&s.title||void 0,E=typeof s=="object"&&(f=s.drag)!==null&&f!==void 0?f:!0,T=typeof s=="object"&&(d=s.filter)!==null&&d!==void 0?d:!0,C=typeof s=="object"&&s.position||void 0,R=typeof s=="object"&&s.onDrag||void 0,O=typeof s=="object"&&s.onDragStart||void 0,k=typeof s=="object"&&s.onDragEnd||void 0;return b.useEffect(()=>{x({x:C?.x,y:C?.y})},[C,x]),fg(),b.createElement(Dp,null,b.createElement(Ia.Provider,{value:{hideCopyButton:a}},b.createElement(Rb,{ref:v,className:t,fill:n,flat:r,oneLineLabels:o,hideTitleBar:!s,style:{display:y?"block":"none"}},s&&b.createElement(_b,{onDrag:M=>{x(M),R?.(M)},onDragStart:M=>O?.(M),onDragEnd:M=>k?.(M),setFilter:g,toggle:M=>c(P=>M??!P),toggled:l,title:w,drag:E,filterEnabled:T,from:C}),y&&b.createElement(ka.Provider,{value:e},b.createElement(Cl,{isRoot:!0,fill:n,flat:r,tree:m,toggled:l})))))}),kb=["isRoot"];let In=!1,tt=null;function Ib(e){let{isRoot:t=!1}=e,n=q(e,kb);return u.useEffect(()=>(In=!0,!t&&tt&&(tt.remove(),tt=null),()=>{t||(In=!1)}),[t]),b.createElement(Ab,Z({store:El},n))}function Nb(e){u.useEffect(()=>{e&&!In&&(tt||(tt=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(tt),ms.createRoot(tt).render(b.createElement(Ib,{isRoot:!0})))),In=!0)},[e])}function Bb(e,t,n,r,i){let o,s,a,l,c;return typeof e=="string"?(s=e,o=t,Array.isArray(n)&&(c=n)):(o=e,Array.isArray(t)?c=t:(l=t,c=n)),{schema:o,folderName:s,folderSettings:a,hookSettings:l,deps:c||[]}}function Ml(e,t,n,r,i){const{folderName:o,schema:s,folderSettings:a,hookSettings:l,deps:c}=Bb(e,t,n),f=typeof s=="function",d=u.useRef(!1),h=u.useRef(!0),p=vl(()=>{d.current=!0;const P=typeof s=="function"?s():s;return o?{[o]:bn(P,a)}:P},c),g=!(l!=null&&l.store);Nb(g);const[m]=u.useState(()=>l?.store||El),[v,x]=u.useMemo(()=>m.getDataFromSchema(p),[m,p]),[y,w,E,T,C]=u.useMemo(()=>{const P=[],_=[],I={},N={},U={};return Object.values(x).forEach(({path:j,onChange:W,onEditStart:z,onEditEnd:G,transient:ne})=>{P.push(j),W?(I[j]=W,ne||_.push(j)):_.push(j),z&&(N[j]=z),G&&(U[j]=G)}),[P,_,I,N,U]},[x]),R=u.useMemo(()=>m.orderPaths(y),[y,m]),O=c0(m,w,v),k=u.useCallback(P=>{const _=Object.entries(P).reduce((I,[N,U])=>Object.assign(I,{[x[N].path]:U}),{});m.set(_,!1)},[m,x]),M=u.useCallback(P=>m.get(x[P].path),[m,x]);return u.useEffect(()=>{const P=!h.current&&d.current;return m.addData(v,P),h.current=!1,d.current=!1,()=>m.disposePaths(R)},[m,R,v]),u.useEffect(()=>{const P=[];return Object.entries(E).forEach(([_,I])=>{I(m.get(_),_,F({initial:!0,get:m.get},m.getInput(_)));const N=m.useStore.subscribe(U=>{const j=U.data[_];return[j.disabled?void 0:j.value,j]},([U,j])=>I(U,_,F({initial:!1,get:m.get},j)),{equalityFn:Fn});P.push(N)}),()=>P.forEach(_=>_())},[m,E]),u.useEffect(()=>{const P=[];return Object.entries(T).forEach(([_,I])=>P.push(m.subscribeToEditStart(_,I))),Object.entries(C).forEach(([_,I])=>P.push(m.subscribeToEditEnd(_,I))),()=>P.forEach(_=>_())},[T,C,m]),f?[O,k,M]:O}Ge(Ke.SELECT,Yg);Ge(Ke.IMAGE,j0);Ge(Ke.NUMBER,zg);Ge(Ke.COLOR,x0);Ge(Ke.STRING,im);Ge(Ke.BOOLEAN,fm);Ge(Ke.INTERVAL,Z0);Ge(Ke.VECTOR3D,w0);Ge(Ke.VECTOR2D,_0);function Fb({enableTrail:e,speed:t,loopClosureEvent:n}){const r=u.useRef(null),i=u.useRef([]),o=u.useRef(0),s=u.useMemo(()=>{const a=[];for(let c=0;c<=200;c++){const f=c/200*Math.PI*4,d=Math.sin(f)*15,h=Math.sin(f*2)*5+10,p=Math.cos(f)*15;a.push(new ze(d,h,p))}return a},[]);return Ve((a,l)=>{if(!r.current)return;o.current+=l*t*.5;const c=o.current%(Math.PI*4),f=Math.sin(c)*15,d=Math.sin(c*2)*5+10,h=Math.cos(c)*15;if(n){const y=Math.sin(a.clock.elapsedTime*20)*.5;r.current.position.set(f+y,d,h+y)}else r.current.position.set(f,d,h);const p=Math.cos(c)*15,g=Math.cos(c*2)*10,m=-Math.sin(c)*15,v=new ze(p,g,m).normalize(),x=new cc().setFromUnitVectors(new ze(0,0,1),v);r.current.quaternion.slerp(x,.1),i.current.length<1e3&&i.current.push(r.current.position.clone())}),S.jsxs(S.Fragment,{children:[S.jsxs("group",{ref:r,children:[S.jsx("mesh",{children:S.jsx(Bl,{args:[1,.3,1],children:S.jsx("meshStandardMaterial",{color:"#00ffff",emissive:"#00ffff",emissiveIntensity:.5,metalness:.8,roughness:.2})})}),[[-.7,.3,-.7],[.7,.3,-.7],[-.7,.3,.7],[.7,.3,.7]].map((a,l)=>S.jsx("group",{position:a,children:S.jsxs("mesh",{rotation:[0,Date.now()*.01,0],children:[S.jsx("cylinderGeometry",{args:[.3,.3,.05]}),S.jsx("meshStandardMaterial",{color:"#ffffff",emissive:"#00ffff",emissiveIntensity:.3,transparent:!0,opacity:.6})]})},l)),S.jsx(Fl,{args:[.2,.4],position:[0,-.3,.5],rotation:[Math.PI/2,0,0],children:S.jsx("meshStandardMaterial",{color:"#ff0080",emissive:"#ff0080",emissiveIntensity:.8})}),S.jsx("pointLight",{color:"#00ffff",intensity:2,distance:10}),S.jsx("pointLight",{color:"#ff0080",intensity:1,distance:5,position:[0,-.3,.5]})]}),e&&r.current&&S.jsx(zl,{width:2,length:50,color:"#0088ff",attenuation:a=>a*a,target:r}),S.jsxs("line",{children:[S.jsx("bufferGeometry",{children:S.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array(s.flatMap(a=>[a.x,a.y,a.z])),3]})}),S.jsx("lineBasicMaterial",{color:"#FFD700",opacity:.3,transparent:!0,linewidth:1})]}),S.jsxs("mesh",{children:[S.jsx("tubeGeometry",{args:[new lc(s.slice(0,50)),50,.2+Math.sin(Date.now()*.001)*.1,8,!1]}),S.jsx("meshStandardMaterial",{color:"#8800ff",transparent:!0,opacity:.3,emissive:"#8800ff",emissiveIntensity:.2})]})]})}const zb={uniforms:{time:{value:0},scale:{value:1}},vertexShader:`
    attribute vec4 instanceColor;
    uniform float time;
    uniform float scale;
    varying vec4 vColor;
    varying float vAlpha;
    
    void main() {
      vColor = instanceColor;
      
      // Extract instance position from the matrix (column 3)
      vec3 instancePos = vec3(instanceMatrix[3][0], instanceMatrix[3][1], instanceMatrix[3][2]);
      
      // Shimmering effect
      float shimmer = 1.0 + sin(time * 2.0 + instancePos.x) * 0.1;
      
      // Apply scale and shimmer to local position
      vec3 transformed = position * scale * shimmer;
      
      // Calculate world position
      vec4 mvPosition = modelViewMatrix * instanceMatrix * vec4(transformed, 1.0);
      
      gl_Position = projectionMatrix * mvPosition;
      
      // Distance-based alpha
      float dist = length(mvPosition.xyz);
      vAlpha = 1.0 - smoothstep(10.0, 50.0, dist);
    }
  `,fragmentShader:`
    varying vec4 vColor;
    varying float vAlpha;
    
    void main() {
      gl_FragColor = vec4(vColor.rgb, vColor.a * vAlpha);
    }
  `};function Ub({scale:e,count:t}){const n=u.useRef(null),r=u.useRef(null),i=u.useMemo(()=>new uc,[]),o=u.useRef(0),s=u.useRef(0),{positions:a,colors:l,scales:c}=u.useMemo(()=>{const f=new Float32Array(t*3),d=new Float32Array(t*4),h=new Float32Array(t*3);for(let p=0;p<t;p++){f[p*3]=(Math.random()-.5)*40,f[p*3+1]=Math.random()*20,f[p*3+2]=(Math.random()-.5)*40;const g=Math.random();g<.3?(d[p*4]=0,d[p*4+1]=1,d[p*4+2]=1):g<.6?(d[p*4]=1,d[p*4+1]=0,d[p*4+2]=.5):(d[p*4]=1,d[p*4+1]=1,d[p*4+2]=0),d[p*4+3]=.6+Math.random()*.4,h[p*3]=.5+Math.random()*1.5,h[p*3+1]=.5+Math.random()*1.5,h[p*3+2]=.5+Math.random()*1.5}return{positions:f,colors:d,scales:h}},[t]);return u.useEffect(()=>{if(n.current){for(let f=0;f<t;f++){i.position.set(a[f*3],a[f*3+1],a[f*3+2]),i.scale.set(c[f*3],c[f*3+1],c[f*3+2]),i.updateMatrix(),n.current.setMatrixAt(f,i.matrix);const d=new Ye(l[f*4],l[f*4+1],l[f*4+2]);n.current.setColorAt(f,d)}n.current.instanceMatrix&&(n.current.instanceMatrix.needsUpdate=!0),n.current.instanceColor&&(n.current.instanceColor.needsUpdate=!0)}},[t,a,l,c,i]),Ve(f=>{if(!(!n.current||!r.current)){if(r.current.uniforms.time.value=f.clock.elapsedTime,r.current.uniforms.scale.value=e,Math.random()<.002){o.current=f.clock.elapsedTime;const d=Math.floor(Math.random()*t),h=new Ye(10,10,10);n.current.setColorAt(d,h),n.current.instanceColor&&(n.current.instanceColor.needsUpdate=!0)}if(Math.random()<.001){s.current=f.clock.elapsedTime;const d=Math.floor(Math.random()*t),h=new Ye(10,0,0);n.current.setColorAt(d,h),n.current.instanceColor&&(n.current.instanceColor.needsUpdate=!0)}if(f.clock.elapsedTime-o.current>.1){for(let d=0;d<Math.min(10,t);d++){const h=Math.floor(Math.random()*t),p=new Ye(l[h*4],l[h*4+1],l[h*4+2]);n.current.setColorAt(h,p)}n.current.instanceColor&&(n.current.instanceColor.needsUpdate=!0)}for(let d=0;d<Math.min(100,t);d++){const h=Math.floor(Math.random()*t);i.position.set(a[h*3],a[h*3+1]+Math.sin(f.clock.elapsedTime*2+h)*.1,a[h*3+2]),i.scale.set(c[h*3]*(1+Math.sin(f.clock.elapsedTime*3+h)*.2),c[h*3+1]*(1+Math.cos(f.clock.elapsedTime*3+h)*.2),c[h*3+2]),i.updateMatrix(),n.current.setMatrixAt(h,i.matrix)}n.current.instanceMatrix&&(n.current.instanceMatrix.needsUpdate=!0)}}),S.jsxs("instancedMesh",{ref:n,args:[void 0,void 0,t],frustumCulled:!1,children:[S.jsx("sphereGeometry",{args:[.1,8,8]}),S.jsx("shaderMaterial",{ref:r,...zb,transparent:!0,depthWrite:!1,blending:ri})]})}function Lb({count:e,loopClosureEvent:t}){const n=u.useRef(null),[r,i]=u.useState(!1),[o,s]=u.useState(!1),a=u.useRef(new Float32Array),l=u.useRef(new Float32Array),c=u.useRef(0),{positions:f,colors:d}=u.useMemo(()=>{const h=new Float32Array(e*3),p=new Float32Array(e*3),g=new Float32Array(e*3),m=new Float32Array(e);for(let v=0;v<e;v++){const x=Math.random()*Math.PI*2,y=Math.random()*Math.PI,w=Math.random()*30;h[v*3]=Math.sin(y)*Math.cos(x)*w,h[v*3+1]=Math.sin(y)*Math.sin(x)*w+10,h[v*3+2]=Math.cos(y)*w,g[v*3]=(Math.random()-.5)*2,g[v*3+1]=Math.random()*2,g[v*3+2]=(Math.random()-.5)*2,m[v]=Math.random();const E=m[v];p[v*3]=E,p[v*3+1]=1-E,p[v*3+2]=1}return a.current=g,l.current=m,{positions:h,colors:p}},[e]);return u.useEffect(()=>{i(!0),setTimeout(()=>{i(!1),s(!0)},2e3)},[]),Ve(h=>{if(!n.current||!a.current||!l.current)return;const p=n.current.geometry.attributes.position.array,g=n.current.geometry.attributes.color.array,m=h.clock.elapsedTime;if(Math.random()<.01||t){c.current=m;for(let v=0;v<e;v++)Math.random()<.3?(g[v*3]=0,g[v*3+1]=10,g[v*3+2]=10):Math.random()<.1&&(g[v*3]=10,g[v*3+1]=0,g[v*3+2]=0)}for(let v=0;v<e;v++){let x=p[v*3],y=p[v*3+1],w=p[v*3+2];if(r)x+=a.current[v*3]*.5,y+=a.current[v*3+1]*.5,w+=a.current[v*3+2]*.5;else if(o){const E=Math.sin(m*.5)*15,T=Math.sin(m)*5+10,C=Math.cos(m*.5)*15,R=t?.2:.05;x+=(E-x)*R,y+=(T-y)*R,w+=(C-w)*R,t&&(x+=(Math.random()-.5)*2,y+=(Math.random()-.5)*2,w+=(Math.random()-.5)*2)}if(x+=Math.sin(m*2+v)*.01,y+=Math.cos(m*2+v)*.01,w+=Math.sin(m*3+v)*.01,p[v*3]=x,p[v*3+1]=y,p[v*3+2]=w,m-c.current>.5){const E=l.current[v];g[v*3]=g[v*3]*.95+E*.05,g[v*3+1]=g[v*3+1]*.95+(1-E)*.05,g[v*3+2]=g[v*3+2]*.95+1*.05}}n.current.geometry.attributes.position.needsUpdate=!0,n.current.geometry.attributes.color.needsUpdate=!0}),S.jsxs("points",{ref:n,children:[S.jsxs("bufferGeometry",{children:[S.jsx("bufferAttribute",{attach:"attributes-position",args:[f,3]}),S.jsx("bufferAttribute",{attach:"attributes-color",args:[d,3]})]}),S.jsx("pointsMaterial",{size:.1,transparent:!0,opacity:.8,vertexColors:!0,blending:ri,depthWrite:!1,sizeAttenuation:!0})]})}function jb({loopClosureEvent:e}){const t=u.useRef(null),[n,r]=u.useState(0),[i,o]=u.useState([]),s=u.useMemo(()=>{const l=[];for(let f=0;f<50;f++){const d=f/50*Math.PI*4,h=Math.sin(d)*15,p=Math.sin(d*2)*5+10,g=Math.cos(d)*15;l.push(new ze(h,p,g))}return l},[]),a=u.useMemo(()=>{const l=[];for(let c=0;c<s.length-1;c++)l.push([s[c],s[c+1]]);return l},[s]);return u.useEffect(()=>{if(e){const l=[];for(let c=0;c<3;c++){const f=Math.floor(Math.random()*s.length),d=Math.floor(Math.random()*s.length);Math.abs(f-d)>10&&l.push([s[f],s[d]])}o(l),r(0),setTimeout(()=>{o([])},3e3)}},[e,s]),Ve(l=>{if(t.current)if(e&&n<1&&r(c=>Math.min(c+.02,1)),e){const c=Math.sin(l.clock.elapsedTime*20)*.2;t.current.position.x=c,t.current.position.z=c}else t.current.position.x=0,t.current.position.z=0}),S.jsxs("group",{ref:t,children:[s.map((l,c)=>S.jsx(Ul,{position:l,args:[.2],children:S.jsx("meshStandardMaterial",{color:e&&n>c/s.length?"#00ff00":"#FFD700",emissive:e?"#00ff00":"#FFD700",emissiveIntensity:e?1:.3})},c)),a.map((l,c)=>S.jsx(Ai,{points:l,color:e?"#00ff00":"#FFD700",lineWidth:e?3:1,opacity:.6,transparent:!0},`edge-${c}`)),i.map((l,c)=>S.jsxs("group",{children:[S.jsx(Ai,{points:l,color:"#00ff00",lineWidth:5,opacity:.9,transparent:!0}),Array.from({length:10}).map((f,d)=>{const h=d/10,p=new ze().lerpVectors(l[0],l[1],h);return S.jsxs("mesh",{position:p,children:[S.jsx("sphereGeometry",{args:[.1]}),S.jsx("meshBasicMaterial",{color:"#00ffff",transparent:!0,opacity:Math.sin((n-h)*Math.PI)*(n>h?1:0)})]},`spark-${c}-${d}`)})]},`loop-${c}`)),e&&n>0&&S.jsxs("mesh",{position:[0,10,0],rotation:[Math.PI/2,0,0],children:[S.jsx("ringGeometry",{args:[n*30,n*30+2,64]}),S.jsx("meshBasicMaterial",{color:"#00ff00",transparent:!0,opacity:1-n,side:At})]})]})}const Hb={uniforms:{uTime:{value:0},uDecay:{value:.5},uPointSize:{value:4},uColorMode:{value:0},uMaxRange:{value:30}},vertexShader:`
    attribute float timestamp;
    varying float vAge;
    varying vec3 vPos;
    varying float vDist;
    uniform float uTime;
    uniform float uPointSize;

    void main() {
      vPos = position;
      vAge = uTime - timestamp;
      vDist = length(position);
      
      vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
      gl_Position = projectionMatrix * mvPosition;
      
      // Size attenuation
      gl_PointSize = uPointSize * (300.0 / -mvPosition.z);
    }
  `,fragmentShader:`
    uniform float uDecay;
    uniform int uColorMode;
    uniform float uMaxRange;
    
    varying float vAge;
    varying vec3 vPos;
    varying float vDist;

    void main() {
      // Calculate alpha based on age and decay
      float alpha = 1.0 - (vAge * uDecay);
      
      if (alpha <= 0.0) discard;
      
      vec3 color = vec3(1.0);
      
      if (uColorMode == 0) {
        // Distance (Cyan -> Red)
        float t = clamp(vDist / uMaxRange, 0.0, 1.0);
        color = mix(vec3(0.0, 1.0, 1.0), vec3(1.0, 0.0, 0.0), t);
      } else if (uColorMode == 1) {
        // Height (Blue -> Yellow)
        float t = clamp((vPos.y + 5.0) / 20.0, 0.0, 1.0);
        color = mix(vec3(0.0, 0.0, 1.0), vec3(1.0, 1.0, 0.0), t);
      } else {
        // Intensity (Green fade)
        color = vec3(0.0, 1.0, 0.0);
      }

      gl_FragColor = vec4(color, alpha);
    }
  `};function Wb(){const e=u.useRef(null),t=u.useRef(null),n=u.useRef(0),r=1e5,i=u.useRef(0),{scanSpeed:o,pointsPerFrame:s,maxRange:a,pointSize:l,persistence:c,colorMode:f,freeze:d}=Ml("LiDAR System",{scanSpeed:{value:1,min:0,max:5,step:.1},pointsPerFrame:{value:200,min:10,max:1e3,step:10},maxRange:{value:30,min:5,max:100},pointSize:{value:.05,min:.01,max:.2},persistence:{value:.95,min:.1,max:1,label:"Persistence"},colorMode:{options:{Distance:0,Height:1,Intensity:2}},freeze:{value:!1,label:"Freeze Scan"},clear:ib(()=>{e.current&&(e.current.geometry.attributes.timestamp.array.fill(-1e3),e.current.geometry.attributes.timestamp.needsUpdate=!0)})}),{positions:h,timestamps:p}=u.useMemo(()=>{const g=new Float32Array(r*3),m=new Float32Array(r);for(let v=0;v<r;v++)g[v*3]=0,g[v*3+1]=-1e3,g[v*3+2]=0,m[v]=-1e3;return{positions:g,timestamps:m}},[]);return Ve(g=>{if(!e.current||!t.current)return;const m=g.clock.elapsedTime;if(n.current=m,t.current.uniforms.uTime.value=m,t.current.uniforms.uDecay.value=(1-c)*.5,t.current.uniforms.uPointSize.value=l,t.current.uniforms.uColorMode.value=f,t.current.uniforms.uMaxRange.value=a,d)return;const v=e.current.geometry.attributes.position.array,x=e.current.geometry.attributes.timestamp.array;for(let y=0;y<s;y++){const w=i.current%r,E=m*o*2+y/s*Math.PI*2,T=Math.sin(m*o*.5+y*.01)*Math.PI/3,C=5+Math.random()*a;let R=!1,O=0,k=0,M=0;const P=Math.cos(E)*Math.cos(T),_=Math.sin(T),I=Math.sin(E)*Math.cos(T);if(_<0){const N=-10/_;N>0&&N<a&&(O=P*N,k=_*N+10,M=I*N,R=!0)}!R&&Math.random()>.3&&(O=P*C,k=_*C+10,M=I*C,R=!0),R?(v[w*3]=O,v[w*3+1]=k,v[w*3+2]=M,x[w]=m):(v[w*3]=0,v[w*3+1]=-1e3,v[w*3+2]=0,x[w]=-1e3),i.current++}e.current.geometry.attributes.position.needsUpdate=!0,e.current.geometry.attributes.timestamp.needsUpdate=!0}),S.jsxs("points",{ref:e,frustumCulled:!1,children:[S.jsxs("bufferGeometry",{children:[S.jsx("bufferAttribute",{attach:"attributes-position",args:[h,3]}),S.jsx("bufferAttribute",{attach:"attributes-timestamp",args:[p,1]})]}),S.jsx("shaderMaterial",{ref:t,...Hb,transparent:!0,depthWrite:!1,blending:ri})]})}function Vb(){const[e,t]=u.useState({gaussians:1e4,particles:8e3,loopClosures:0,ate:.012,fps:60});return u.useEffect(()=>{const n=setInterval(()=>{t(r=>({gaussians:Math.min(r.gaussians+Math.floor(Math.random()*5e4),3e6),particles:Math.max(312,r.particles-Math.floor(Math.random()*100)),loopClosures:r.loopClosures+(Math.random()<.02?1:0),ate:Math.max(.001,r.ate+(Math.random()-.5)*.002),fps:55+Math.floor(Math.random()*10)}))},500);return()=>clearInterval(n)},[]),S.jsxs("div",{className:"hud",children:[S.jsx("div",{className:"hud-title",children:"SLAM VISUALIZATION"}),S.jsxs("div",{className:"hud-stats",children:[S.jsxs("div",{className:"stat",children:[S.jsx("span",{className:"stat-label",children:"Gaussians:"}),S.jsxs("span",{className:"stat-value",children:[(e.gaussians/1e6).toFixed(1),"M "]})]}),S.jsxs("div",{className:"stat",children:[S.jsx("span",{className:"stat-label",children:"Particles:"}),S.jsxs("span",{className:"stat-value",children:[e.particles.toLocaleString(),"  312"]})]}),S.jsxs("div",{className:"stat",children:[S.jsx("span",{className:"stat-label",children:"Loop Closures:"}),S.jsx("span",{className:"stat-value",children:e.loopClosures})]}),S.jsxs("div",{className:"stat",children:[S.jsx("span",{className:"stat-label",children:"ATE:"}),S.jsxs("span",{className:"stat-value",children:[(e.ate*100).toFixed(1)," cm"]})]}),S.jsxs("div",{className:"stat",children:[S.jsx("span",{className:"stat-label",children:"FPS:"}),S.jsx("span",{className:"stat-value fps",children:e.fps})]})]}),S.jsxs("div",{className:"hud-grid",children:[S.jsx("div",{className:"grid-line"}),S.jsx("div",{className:"grid-line"}),S.jsx("div",{className:"grid-line"})]})]})}function Gb({loopClosureEvent:e}){const{camera:t}=ei(),n=u.useRef(t),r=u.useRef(30),i=u.useRef(.2),o=u.useRef(new ze(0,10,0)),s=u.useRef(!1);return u.useEffect(()=>{e&&(s.current=!0,r.current=15,i.current=.05,setTimeout(()=>{s.current=!1,r.current=30,i.current=.2},3e3))},[e]),Ve(a=>{const l=a.clock.elapsedTime*i.current,c=Math.sin(l)*r.current,f=15+Math.sin(l*.5)*5,d=Math.cos(l)*r.current;n.current.position.lerp(new ze(c,f,d),s.current?.02:.05);const h=n.current.quaternion.clone();n.current.lookAt(o.current);const p=n.current.quaternion.clone();if(n.current.quaternion.copy(h),n.current.quaternion.slerp(p,.05),"fov"in t){const g=t;s.current?g.fov=Ni.lerp(g.fov,40,.05):g.fov=Ni.lerp(g.fov,60,.02),g.updateProjectionMatrix()}}),null}function Kb(){const e=u.useRef([null,null,null,null]),t=u.useRef(0),n=u.useMemo(()=>[[-15,18,0],[15,18,0],[-15,2,0],[15,2,0]],[]),r=["Front View","Side View","Top View","Novel View"];return Ve(i=>{const o=i.clock.elapsedTime;t.current=o,e.current.forEach((s,a)=>{s&&(s.position.y=n[a][1]+Math.sin(o+a)*.5,s.rotation.y=Math.sin(o*.5+a)*.1)})}),S.jsx(S.Fragment,{children:n.map((i,o)=>S.jsxs("group",{position:i,children:[S.jsx(Ll,{ref:s=>{e.current[o]=s},args:[5,3,.1],radius:.1,smoothness:4,children:S.jsx(jl,{color:"#00ffff",transmission:.9,thickness:.5,roughness:.1,chromaticAberration:.2,anisotropicBlur:.3,distortion:.1,temporalDistortion:.1,clearcoat:1,clearcoatRoughness:0})}),S.jsxs("group",{position:[0,0,.2],children:[Array.from({length:20}).map((s,a)=>{const l=a/20*Math.PI*2,c=1.5,f=Math.cos(l)*c,d=Math.sin(l)*c;return S.jsxs("mesh",{position:[f,d,0],children:[S.jsx("sphereGeometry",{args:[.15,16,16]}),S.jsx("meshStandardMaterial",{color:new Ye().setHSL((t.current*.1+o*.25+a*.05)%1,.8,.5),metalness:.8,roughness:Math.sin(t.current+a)*.5+.5,emissive:new Ye().setHSL((t.current*.1+o*.25+a*.05)%1,.8,.3),emissiveIntensity:.5})]},a)}),S.jsxs("mesh",{children:[S.jsx("sphereGeometry",{args:[.8,32,32]}),S.jsx("meshStandardMaterial",{color:"#ffffff",metalness:.9,roughness:.1,envMapIntensity:2,emissive:"#00ffff",emissiveIntensity:Math.sin(t.current)*.2+.1})]})]}),S.jsx(Hl,{position:[0,-2,.1],fontSize:.3,color:"#00ffff",anchorX:"center",anchorY:"middle",children:r[o]})]},o))})}function qb(){const[e,t]=u.useState(!1),n=u.useRef(null),r=u.useRef([]),i=async()=>{try{const s=document.querySelector("canvas");if(!s)return;const a=s.captureStream(30),l=new MediaRecorder(a,{mimeType:"video/webm;codecs=vp9",videoBitsPerSecond:5e6});n.current=l,r.current=[],l.ondataavailable=c=>{c.data.size>0&&r.current.push(c.data)},l.onstop=()=>{const c=new Blob(r.current,{type:"video/webm"}),f=URL.createObjectURL(c),d=document.createElement("a");d.style.display="none",d.href=f,d.download=`slam-visualization-${Date.now()}.webm`,document.body.appendChild(d),d.click(),URL.revokeObjectURL(f),document.body.removeChild(d)},l.start(),t(!0),setTimeout(()=>{n.current?.state==="recording"&&o()},3e4)}catch(s){console.error("Failed to start recording:",s)}},o=()=>{n.current?.state==="recording"&&(n.current.stop(),t(!1))};return S.jsx("button",{className:`record-button ${e?"recording":""}`,onClick:e?o:i,children:e?S.jsxs(S.Fragment,{children:[S.jsx("span",{className:"record-dot"}),"Recording..."]}):"Record"})}function Yb(){const[e,t]=u.useState(!1),[n,r]=u.useState({gaussians:1e4,particles:8e3,loopClosures:0,ate:.012,fps:60}),i=Ml({"Visual Effects":bn({enableGaussians:{value:!0,label:"Gaussian Splatting"},enableParticles:{value:!0,label:"Monte Carlo Particles"},enableLidar:{value:!0,label:"LiDAR Point Cloud"},enableTrail:{value:!0,label:"Drone Trail"},enableNeRF:{value:!0,label:"NeRF Views"},enableGraphSLAM:{value:!0,label:"Graph SLAM"}}),"Post-processing":bn({bloomIntensity:{value:2,min:0,max:5,step:.1},bloomRadius:{value:.85,min:0,max:1,step:.01},vignetteIntensity:{value:.3,min:0,max:1,step:.01},chromaticAberration:{value:.02,min:0,max:.1,step:.001},depthOfField:{value:!0,label:"Depth of Field"}}),Simulation:bn({simulationSpeed:{value:1,min:.1,max:3,step:.1},particleCount:{value:8e3,min:1e3,max:2e4,step:1e3},gaussianScale:{value:1,min:.1,max:3,step:.1},autoCamera:{value:!0,label:"Cinematic Camera"}})});return u.useEffect(()=>{const o=setInterval(()=>{t(!0),r(s=>({...s,loopClosures:s.loopClosures+1})),setTimeout(()=>t(!1),3e3)},6e4);return()=>clearInterval(o)},[]),Ve(o=>{const s=Math.round(1/o.clock.getDelta());Math.random()<.1&&r(a=>({...a,fps:Math.min(s,120)}))}),u.useEffect(()=>{const o=setInterval(()=>{r(s=>({...s,gaussians:Math.min(s.gaussians+Math.floor(Math.random()*5e4),3e6)}))},500);return()=>clearInterval(o)},[]),S.jsxs(S.Fragment,{children:[S.jsx("fog",{attach:"fog",args:["#000510",10,100]}),S.jsx("ambientLight",{intensity:.1}),S.jsx("pointLight",{position:[10,10,10],intensity:.5,color:"#00ffff"}),S.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#ff00ff"}),S.jsx(Gl,{preset:"night"}),S.jsx(Kl,{count:200,scale:50,size:2,speed:.1,opacity:.1,color:"#00ffff"}),S.jsx(Fb,{enableTrail:i.enableTrail,speed:i.simulationSpeed,loopClosureEvent:e}),i.enableGaussians&&S.jsx(Ub,{scale:i.gaussianScale,count:n.gaussians}),i.enableParticles&&S.jsx(Lb,{count:i.particleCount,loopClosureEvent:e}),i.enableGraphSLAM&&S.jsx(jb,{loopClosureEvent:e}),i.enableLidar&&S.jsx(Wb,{}),i.enableNeRF&&S.jsx(Kb,{}),i.autoCamera?S.jsx(Gb,{loopClosureEvent:e}):S.jsx(ql,{enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:5,maxDistance:100}),S.jsxs(ju,{children:[S.jsx(Vu,{intensity:i.bloomIntensity,radius:i.bloomRadius,luminanceThreshold:.1,luminanceSmoothing:.9}),S.jsx(Ku,{eskil:!1,offset:.1,darkness:i.vignetteIntensity}),S.jsx(Gu,{offset:[i.chromaticAberration,i.chromaticAberration]}),S.jsx(Wu,{focusDistance:.01,focalLength:.05,bokehScale:i.depthOfField?3:0})]})]})}function Xb(){return S.jsxs("div",{className:"app-container",children:[S.jsxs(kl,{camera:{position:[20,15,20],fov:60},gl:{antialias:!0,alpha:!1,powerPreference:"high-performance",preserveDrawingBuffer:!0},shadows:!0,children:[S.jsx(u.Suspense,{fallback:null,children:S.jsx(Yb,{})}),S.jsx(Wl,{className:"stats"})]}),S.jsx(Vb,{}),S.jsx(qb,{}),S.jsx(Vl,{})]})}ms.createRoot(document.getElementById("root")).render(S.jsx(u.StrictMode,{children:S.jsx(Xb,{})}));
